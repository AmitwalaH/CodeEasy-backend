{
  "language": "csharp",
  "slug": "beauty-salon-goes-global",
  "docs": {
    "introduction": "# Introduction\r\n\r\n## Time\r\n\r\nThe concept of _time_ is dealt with in .NET using the `DateTime` struct. There are routines to convert between local time and UTC. Arithmetic can be performed with the help of `TimeSpan`.\r\n\r\n## Timezone\r\n\r\nThe `TimeZoneInfo` class provides routines for handling the differences between time zones. The `TimeZoneInfo` class also contains methods that facilitate dealing with daylight saving time.\r\n\r\nThe `CultureInfo` class supports locale dependent date time formats.\r\n\r\nTo support cross-platform coding the `RuntimeInformation` class allows you to detect which operating system your code is executing on, Linux, Windows or OSX.\r\n",
    "instructions": "# Instructions\r\n\r\nIn this exercise you are back in the world of salons (first introduced in the `datetimes` exercise). As with a number of your projects another of your clients has had great success and opened outlets in London and Paris in addition to their New York base.\r\n\r\n## 1. Provide local time equivalents of UTC (Universal Coordinated Time) appointments for the administrators\r\n\r\nImplement the static `Appointment.ShowLocalTime()` method that takes a UTC time and returns it as a local time\r\n\r\n```csharp\r\n// For a student in NY\r\nAppointment.ShowLocalTime(new DateTime(2030, 7, 25, 13, 45, 0));\r\n// => {2030, 7, 25, 8, 45, 0}\r\n```\r\n\r\n## 2. Schedule appointments in New York, London and Paris\r\n\r\nSalons are responsible for taking their own bookings. The time input is local to the location of the salon. For instance, if someone enters a time of 13:45 for the New York salon for an appointment, they would expect the client to turn up just after lunch. Similarly, if someone entered a time of 13:45 for the London salon they would also expect the client arrive just after lunch.\r\n\r\nIt will help you to know the time zone id for New York, London and Paris.\r\n\r\nOn Mac (OSX) and Linux these are:\r\n\r\n- New York - America/New_York\r\n- London - Europe/London\r\n- Paris - Europe/Paris\r\n\r\nOn Windows, they are:\r\n\r\n- New York - Eastern Standard Time\r\n- London - GMT Standard Time\r\n- Paris - W. Europe Standard Time\r\n\r\nImplement the static `Appointment.Schedule()` overload which takes a location and time string and returns the UTC time of the appointment.\r\n\r\nThe implementation of `Schedule()` will need to allow the code, once built, to be run on Linux, Windows and Mac. This is the first exercise where you need to be concerned about the operating system. It will be necessary to have separate code paths to accommodate the difference in the time zone ids as described above.\r\n\r\nThe date-time strings input are guaranteed to be valid.\r\n\r\n```csharp\r\nAppointment.Schedule(\"7/25/2030 13:45:00\", Location.Paris);\r\n// => {2030, 7, 25, 11, 45, 0}\r\n```\r\n\r\n## 3. Provide alerts to clients at intervals before the appointment\r\n\r\nImplement the static `Appointment.GetAlertTime()` to provide alerts at 1 day (early), 1 hour 45 minutes (standard) and 30 minutes (late) before the appointment.\r\n\r\n```csharp\r\nAppointment.GetAlertTime(new DateTime(2030, 7, 25, 14, 45, 0), AlertLevel.Early);\r\n// => {2030, 7, 24, 14, 45, 0}\r\n```\r\n\r\n## 4. If daylight savings has recently changed we send a message to clients reminding them.\r\n\r\nImplement the static `Appointment.HasDaylightSavingChanged()` to return `true` if the daylight savings has become active or inactive in the last 7 days.\r\n\r\n```csharp\r\nAppointment.HasDaylightSavingChanged(new DateTime(2020, 3, 30, 14, 45, 0), Location.London);\r\n// => true\r\n```\r\n\r\n## 5. Use the local date time format to enter appointments\r\n\r\nIn order that appointments can be made in a format familiar to the local staff you have been tasked with creating an experimental routine to allow dates and times to be entered in the default format for the location of the salon.\r\n\r\nImplement the `Appointment.NormalizeDateTime()` method that takes a well-formed date-time string in an format appropriate to the location and converts it into a `DateTime` object. No attempt is made to convert the date-time to UTC.\r\n\r\nIf a bad format is entered then a `DateTime` with a value of 1/1/1 should be returned.\r\n\r\n```csharp\r\nAppointment.NormalizeDateTime(\"25/11/2019 13:45:00\", Location.London);\r\n// => {2019, 11, 25, 13, 45, 0}\r\nAppointment.NormalizeDateTime(\"25/11/2019 13:45:00\", Location.NewYork);\r\n// => {1, 1, 1, 0, 0, 0}\r\n```\r\n",
    "hints": "# Hints\r\n\r\n## General\r\n\r\n- This [article][time-overview] is an overview of dates, times and time zones on .NET.\r\n- The `DateTime` struct is documented [here][date-time].\r\n\r\n## 1. Provide local time equivalents of UTC (Universal Coordinated Time) appointments for the administrators\r\n\r\nLook for a suitable `DateTime` member converting from UTC to local time.\r\n\r\n## 2. Schedule appointments in New York, London and Paris\r\n\r\nUse the [`TimeZoneInfo`][time-zone-info] class and select the appropriate time zone ids from the task instructions. Remember that Windows and OSX/Linux have different ids.\r\n\r\nThe method [`RuntimeInformation.IsOSPlatform()`] is central to having code paths that target different operating systems.\r\n\r\n## 3. Provide alerts to clients at intervals before the appointment\r\n\r\nOne approach is to use [`TimeSpan`][time-span] to perform arithmetic on times.\r\n\r\n## 4. If daylight savings has recently changed we send a message to clients reminding them.\r\n\r\n`TimeZoneInfo` has appropriate methods for this.\r\n\r\n## 5. Use the local date time format to enter appointments\r\n\r\nHave a look at `DateTime.Parse()` and [`CultureInfo`][culture-info].\r\n\r\n[time-overview]: https://docs.microsoft.com/en-us/dotnet/standard/datetime/\r\n[date-time]: https://docs.microsoft.com/en-us/dotnet/api/system.datetime\r\n[time-span]: https://docs.microsoft.com/en-us/dotnet/api/system.timespan\r\n[culture-info]: https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo\r\n[time-zone-info]: https://docs.microsoft.com/en-us/dotnet/api/system.timezoneinfo\r\n"
  },
  "starter_code": {
    "BeautySalonGoesGlobal.cs": "public enum Location\r\n{\r\n    NewYork,\r\n    London,\r\n    Paris\r\n}\r\n\r\npublic enum AlertLevel\r\n{\r\n    Early,\r\n    Standard,\r\n    Late\r\n}\r\n\r\npublic static class Appointment\r\n{\r\n    public static DateTime ShowLocalTime(DateTime dtUtc)\r\n    {\r\n        throw new NotImplementedException(\"Please implement the (static) Appointment.ShowLocalTime() method\");\r\n    }\r\n\r\n    public static DateTime Schedule(string appointmentDateDescription, Location location)\r\n    {\r\n        throw new NotImplementedException(\"Please implement the (static) Appointment.Schedule() method\");\r\n    }\r\n\r\n    public static DateTime GetAlertTime(DateTime appointment, AlertLevel alertLevel)\r\n    {\r\n        throw new NotImplementedException(\"Please implement the (static) Appointment.GetAlertTime() method\");\r\n    }\r\n\r\n    public static bool HasDaylightSavingChanged(DateTime dt, Location location)\r\n    {\r\n        throw new NotImplementedException(\"Please implement the (static) Appointment.HasDaylightSavingChanged() method\");\r\n    }\r\n\r\n    public static DateTime NormalizeDateTime(string dtStr, Location location)\r\n    {\r\n        throw new NotImplementedException(\"Please implement the (static) Appointment.NormalizeDateTime() method\");\r\n    }\r\n}\r\n"
  },
  "tests": {
    "BeautySalonGoesGlobalTests.cs": "using System.Globalization;\r\n\r\nusing Exercism.Tests;\r\n\r\npublic class BeautySalonGoesGlobalTests\r\n{\r\n    public BeautySalonGoesGlobalTests()\r\n    {\r\n        Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(\"en-US\");\r\n    }\r\n\r\n    [Fact]\r\n    [Task(1)]\r\n    public void ShowLocalTime()\r\n    {\r\n        var dt = new DateTime(2030, 07, 25, 13, 45, 0);\r\n        var tzi = TimeZoneInfo.Local;\r\n        var offset = tzi.GetUtcOffset(dt);\r\n        Assert.Equal(dt + offset, Appointment.ShowLocalTime(dt));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(2)]\r\n    public void Schedule_newyork()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 07, 25, 12, 45, 0),\r\n            Appointment.Schedule(\"7/25/2019 08:45:00\", Location.NewYork));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(2)]\r\n    public void Schedule_london()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 07, 25, 12, 45, 0),\r\n            Appointment.Schedule(\"7/25/2019 13:45:00\", Location.London));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(2)]\r\n    public void Schedule_paris()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 07, 25, 12, 45, 0),\r\n            Appointment.Schedule(\"7/25/2019 14:45:00\", Location.Paris));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(3)]\r\n    public void GetAlertTime_early()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 07, 24, 16, 0, 0),\r\n            Appointment.GetAlertTime(new DateTime(2019, 7, 25, 16, 0, 0),\r\n                AlertLevel.Early));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(3)]\r\n    public void GetAlertTime_standard()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 07, 25, 14, 15, 0),\r\n            Appointment.GetAlertTime(new DateTime(2019, 7, 25, 16, 0, 0),\r\n                AlertLevel.Standard));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(3)]\r\n    public void GetAlertTime_late()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 07, 25, 15, 30, 0),\r\n            Appointment.GetAlertTime(new DateTime(2019, 7, 25, 16, 0, 0),\r\n                AlertLevel.Late));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_newyork_active()\r\n    {\r\n        Assert.True(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 3, 13, 0, 0, 0),\r\n                Location.NewYork));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_newyork_inactive()\r\n    {\r\n        Assert.True(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 11, 7, 0, 0, 0),\r\n                Location.NewYork));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_newyork_no_change()\r\n    {\r\n        Assert.False(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 12, 25, 0, 0, 0),\r\n                Location.NewYork));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_london_active()\r\n    {\r\n        Assert.True(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 4, 1, 0, 0, 0),\r\n                Location.London));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_london_inactive()\r\n    {\r\n        Assert.True(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 10, 29, 0, 0, 0),\r\n                Location.London));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_london_no_change()\r\n    {\r\n        Assert.False(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 12, 25, 0, 0, 0),\r\n                Location.London));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_paris_active()\r\n    {\r\n        Assert.True(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 4, 1, 0, 0, 0),\r\n                Location.Paris));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_paris_inactive()\r\n    {\r\n        Assert.True(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 10, 29, 0, 0, 0),\r\n                Location.Paris));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(4)]\r\n    public void DaylightSavingChanged_paris_no_change()\r\n    {\r\n        Assert.False(\r\n            Appointment.HasDaylightSavingChanged(new DateTime(2019, 12, 25, 0, 0, 0),\r\n                Location.Paris));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(5)]\r\n    public void NormalizeDateTime_newyork()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 11, 25, 13, 45, 0),\r\n            Appointment.NormalizeDateTime(\"11/25/2019 13:45:00\",\r\n                Location.NewYork));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(5)]\r\n    public void NormalizeDateTime_london()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 11, 25, 13, 45, 0),\r\n            Appointment.NormalizeDateTime(\"25/11/2019 13:45:00\",\r\n                Location.London));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(5)]\r\n    public void NormalizeDateTime_paris()\r\n    {\r\n        Assert.Equal(new DateTime(2019, 11, 25, 13, 45, 0),\r\n            Appointment.NormalizeDateTime(\"25/11/2019 13:45:00\",\r\n                Location.Paris));\r\n    }\r\n\r\n    [Fact]\r\n    [Task(5)]\r\n    public void NormalizeDateTime_bad()\r\n    {\r\n        Assert.Equal(DateTime.MinValue,\r\n            Appointment.NormalizeDateTime(\"25/11/2019 13:45:00\",\r\n                Location.NewYork));\r\n    }\r\n\r\n    private static IList<string> GetTimeZoneIds()\r\n    {\r\n        return TimeZoneInfo.GetSystemTimeZones().Select(tzi => tzi.Id).OrderBy(tzi => tzi).ToList();\r\n    }\r\n}\r\n"
  }
}