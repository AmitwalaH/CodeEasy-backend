{
  "language": "csharp",
  "slug": "remote-control-cleanup",
  "docs": {
    "introduction": "# Introduction\r\n\r\n## Nested Types\r\n\r\nC# types can be defined within the scope of a class or struct. The enclosing type provides a kind of namespace. Access to the type is through the enclosing type with dot syntax.\r\n\r\n```csharp\r\nclass Outer\r\n{\r\n    public interface IInner {}\r\n    public enum EInner {}\r\n    public class CInner {}\r\n    public struct SInner {}\r\n}\r\n\r\nvar outer = new Outer();\r\nvar inner = new Outer.CInner();\r\n```\r\n\r\nYou can set access levels for inner types.\r\n\r\nPrivate members of the outer type are in scope for members of the inner type but not vice versa.\r\n",
    "instructions": "# Instructions\r\n\r\nSome \"other\" developers have been working on the remote control car project [exercise:csharp/remote-control-competition](). You have been called in to clean up the code.\r\n\r\n## 1. Separate concerns between the car itself and the telemetry system\r\n\r\nRefactor the `RemoteControlCar` class to move to separate out telemetry methods and properties accessed via a `Telemetry` property.\r\n\r\n```csharp\r\nvar car = new RemoteControlCar();\r\ncar.Telemetry.Calibrate();\r\ncar.Telemetry.SelfTest();\r\ncar.Telemetry.ShowSponsor(\"Walker Industries Inc.\");\r\ncar.CurrentSponsor\r\n// => \"Walker Industries Inc.\"\r\ncar.Telemetry.SetSpeed(100, \"cps\");\r\ncar.GetSpeed()\r\n// => \"100 centimeters per second\"\r\n```\r\n\r\n## 2. Prevent other code taking too many dependencies on the Telemetry type\r\n\r\nEnsure that the `Telemetry` instance cannot be created outside the scope of the car.\r\n\r\n## 3. Prevent other code from taking dependencies on the Speed struct\r\n\r\nEnsure that the `Speed` struct cannot be used outside the scope of the `RemoteControlCar` class.\r\n\r\n## 4. Prevent other code from taking dependencies on the SpeedUnits enum\r\n\r\nEnsure that the `SpeedUnits` enum cannot be used outside the scope of the `RemoteControlCar` class.\r\n",
    "hints": "# Hints\r\n\r\n## General\r\n\r\n- This documentation of [nested types][nested-types] details the syntax.\r\n\r\n## 1. Separate concerns between the car itself and the telemetry system\r\n\r\n- Members of `RemoteControlCar` suffixed with \"\\_Telemetry\" could be moved to a separate class.\r\n\r\n## 2. Prevent other code taking too many dependencies on the Telemetry type\r\n\r\n- [Interfaces][interfaces] are the secret sauce here.\r\n\r\n## 3. Prevent other code from taking dependencies on the Speed struct\r\n\r\n- Give some consideration to [access levels][access-levels].\r\n\r\n[nested-types]: https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/nested-types\r\n[interfaces]: https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/interfaces/\r\n[access-levels]: https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers\r\n"
  },
  "starter_code": {
    "RemoteControlCleanup.cs": "public class RemoteControlCar\r\n{\r\n    public string CurrentSponsor { get; private set; }\r\n\r\n    private Speed currentSpeed;\r\n\r\n    // TODO encapsulate the methods suffixed with \"_Telemetry\" in their own class\r\n    // dropping the suffix from the method name\r\n    public void Calibrate_Telemetry()\r\n    {\r\n\r\n    }\r\n\r\n    public bool SelfTest_Telemetry()\r\n    {\r\n        return true;\r\n    }\r\n\r\n    public void ShowSponsor_Telemetry(string sponsorName)\r\n    {\r\n        SetSponsor(sponsorName);\r\n    }\r\n\r\n    public void SetSpeed_Telemetry(decimal amount, string unitsString)\r\n    {\r\n        SpeedUnits speedUnits = SpeedUnits.MetersPerSecond;\r\n        if (unitsString == \"cps\")\r\n        {\r\n            speedUnits = SpeedUnits.CentimetersPerSecond;\r\n        }\r\n\r\n        SetSpeed(new Speed(amount, speedUnits));\r\n    }\r\n\r\n    public string GetSpeed()\r\n    {\r\n        return currentSpeed.ToString();\r\n    }\r\n\r\n    private void SetSponsor(string sponsorName)\r\n    {\r\n        CurrentSponsor = sponsorName;\r\n\r\n    }\r\n\r\n    private void SetSpeed(Speed speed)\r\n    {\r\n        currentSpeed = speed;\r\n    }\r\n}\r\n\r\npublic enum SpeedUnits\r\n{\r\n    MetersPerSecond,\r\n    CentimetersPerSecond\r\n}\r\n\r\npublic struct Speed\r\n{\r\n    public decimal Amount { get; }\r\n    public SpeedUnits SpeedUnits { get; }\r\n\r\n    public Speed(decimal amount, SpeedUnits speedUnits)\r\n    {\r\n        Amount = amount;\r\n        SpeedUnits = speedUnits;\r\n    }\r\n\r\n    public override string ToString()\r\n    {\r\n        string unitsString = \"meters per second\";\r\n        if (SpeedUnits == SpeedUnits.CentimetersPerSecond)\r\n        {\r\n            unitsString = \"centimeters per second\";\r\n        }\r\n\r\n        return Amount + \" \" + unitsString;\r\n    }\r\n}\r\n"
  },
  "tests": {
    "RemoteControlCleanupTests.cs": "using Exercism.Tests;\r\n\r\npublic class RemoteControlCleanupTests\r\n{\r\n    [Fact]\r\n    [Task(1)]\r\n    public void ShowSponsor()\r\n    {\r\n        var car = new RemoteControlCar();\r\n        string expected = \"Walker Industries Inc.\";\r\n        car.Telemetry.ShowSponsor(expected);\r\n        Assert.Equal(expected, car.CurrentSponsor);\r\n    }\r\n\r\n    [Fact]\r\n    [Task(1)]\r\n    public void ShowSpeed()\r\n    {\r\n        var car = new RemoteControlCar();\r\n        string expected = \"100 meters per second\";\r\n        car.Telemetry.SetSpeed(100, \"mps\");\r\n        Assert.Equal(expected, car.GetSpeed());\r\n    }\r\n}\r\n"
  }
}