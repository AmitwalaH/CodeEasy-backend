{
  "language": "csharp",
  "slug": "switch-statements",
  "title": "Switch Statements",
  "docs": {
    "about": "# About\r\n\r\nSwitch statements have a venerable [history][wiki-switch] in programming languages. They were introduced in [`C`][c-switch] where they were prized for their speed. That speed came at the cost of functionality which was very constrained. In C# the role of the switch statement has been expanded beyond integers. Switch statements can encompass any arbitrary type, value or reference.\r\n\r\nIf you are coming from a functional language then working with switch statements (and [switch expressions][switch-expression] discussed elsewhere) is the nearest you will get in C# to using discriminated unions and pattern matching. However, they have nowhere near the discriminated union's power to enforce type safety.\r\n\r\nSimple switch statements resemble their `C` ancestors combining [`switch`][switch], [`case`][case], [`break`][switch-break] and [`default`][switch-default].\r\n\r\n```csharp\r\nint direction = GetDirection();\r\nswitch (direction)\r\n{\r\n    case 1:\r\n        GoLeft();\r\n        break;\r\n    case 2:\r\n        GoRight();\r\n        break;\r\n    default:\r\n        MarkTime();\r\n        break;\r\n}\r\n```\r\n\r\nThe above pattern can be used with any simple (primitives + strings) type.\r\n\r\nWhen reference types are added into the mix then [extra syntax][switch-pattern-matching] is involved, firstly to down cast the type and then to add guards ([`when`][switch-when]) although guards can be used with simple value cases. This is illustrated below:\r\n\r\n```csharp\r\nAnimal animal = GetAnimal();\r\n\r\nswitch(animal)\r\n{\r\n    case Dog canine:\r\n    case Coyote canine:\r\n        canine.Bark();\r\n        break;\r\n    case Cat cat when cat.HasOnly8Lives():\r\n        cat.IsCareful();\r\n        cat.Meow();\r\n        break;\r\n    case Cat cat:\r\n        cat.Meow();\r\n        break;\r\n}\r\n```\r\n\r\n- The `default` clause is optional but typically desirable.\r\n- The `break` statement is mandatory for any non-empty `case` clause.\r\n- Obviously the type of all the arguments to the `case` labels must be derived from the type of the `switch` argument. A `switch` argument of type `Object` obviously allows the widest range.\r\n- The guard expression can include anything in scope not just members of the `case` argument.\r\n- Multiple `case` with different `case` arguments can refer to the same code block.\r\n\r\n[switch statement][switch-statement] documentation provides an introduction to `switch` statements.\r\n\r\n[wiki-switch]: https://en.wikipedia.org/wiki/Switch_statement\r\n[switch-statement]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch\r\n[switch-expression]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/switch-expression#basic-example\r\n[switch]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-switch-section\r\n[case]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#case-labels\r\n[switch-break]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/break\r\n[switch-default]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-default-case\r\n[switch-pattern-matching]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#type-pattern\r\n[switch-when]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-case-statement-and-the-when-clause\r\n[c-switch]: https://docs.microsoft.com/en-us/cpp/c-language/switch-statement-c\r\n",
    "introduction": "# Introduction\r\n\r\nWikipedia describes a `switch` statement as \"a type of selection control mechanism used to allow the value of a variable or expression to change the control flow of program\".\r\n\r\nThe mechanism involves the following keywords: `switch`, `case`, `break` and `default`.\r\n\r\nAt their simplest they test a primitive or string expression and make a decision based on its value. For example:\r\n\r\n```csharp\r\nstring direction = GetDirection();\r\nswitch (direction)\r\n{\r\n    case \"left\":\r\n        GoLeft();\r\n        break;\r\n    case \"right\":\r\n        GoRight();\r\n        break;\r\n    default:\r\n        MarkTime();\r\n        break;\r\n}\r\n```\r\n\r\nAt their most sophisticated they introduce down casting `case <Type> <variable>:` and guards (`when`).\r\n\r\n```csharp\r\nAnimal animal = GetAnimal();\r\n\r\nswitch (animal)\r\n{\r\n    case Dog canine:\r\n    case Coyote canine:\r\n        canine.Bark();\r\n        break;\r\n    case Cat cat when cat.HasOnly8Lives():\r\n        cat.IsCareful();\r\n        cat.Meow();\r\n        break;\r\n    case Cat cat:\r\n        cat.Meow();\r\n        break;\r\n}\r\n```\r\n"
  },
  "links": [
    {
      "url": "https://en.wikipedia.org/wiki/Switch_statement",
      "description": "wiki-switch"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/switch-expression#basic-example",
      "description": "switch-expression"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-switch-section",
      "description": "switch"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#case-labels",
      "description": "case"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/break",
      "description": "switch-break"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-default-case",
      "description": "switch-default"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#type-pattern",
      "description": "switch-pattern-matching"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-case-statement-and-the-when-clause",
      "description": "switch-when"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch",
      "description": "switch-statement"
    }
  ]
}