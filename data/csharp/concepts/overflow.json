{
  "language": "csharp",
  "slug": "overflow",
  "title": "Overflow",
  "docs": {
    "about": "# About\r\n\r\nThe exercise shows the behavior of various numeric types when they overflow, i.e. when their capacity is insufficient to contain the value resulting from a computation such as an arithmetic operation or cast.\r\n\r\n- unsigned [integers][integral-numeric-types] (`byte`, `ushort`, `uint`, `ulong`) will wrap around to zero (the type's maximum value + 1 acts as a modulus) unless [broadly speaking][checked-compiler-setting] they appear within a [`checked`][checked-and-unchecked] block in which case an instance of `OverflowException` is thrown. `int` and `long` will behave similarly except that they wrap around to `int.MinValue` and `long.minValue` respectively.\r\n\r\n```csharp\r\nint one = 1;\r\nchecked\r\n{\r\n    int expr = int.MaxValue + one;  // overflow exception is thrown\r\n}\r\n\r\n// or\r\n\r\nint expr2 = checked(int.MaxValue + one);  // overflow exception is thrown\r\n```\r\n\r\n- If a literal expression would cause the variable to which it is assigned to overflow then a compile-time error occurs.\r\n- the `checked` state applies only to expressions directly in the block. Overflow states in called functions are not caught.\r\n- [`float` and `double`][floating-point-numeric-types] types will adopt a state of _infinity_ that can be tested wtih `float.IsInfinity()` etc.\r\n\r\n```csharp\r\ndouble d = double.MaxValue;\r\nd *= 2d;\r\nDouble.IsFinite(d)\r\n// => false\r\n```\r\n\r\n- Numbers of type [`decimal`][floating-point-numeric-types] will cause an instance of `OverflowException` to be thrown.\r\n- There is a corresponding `unchecked` keyword for circumstances where you want to reverse the effect of `unchecked` inside a `checked` block or when the compiler setting has been used.\r\n\r\nOverflows that occur without an exception being thrown can be problematic because it's generally true that the earlier an error condition can be reported the better.\r\n\r\nProblems with overflows for `int` and `float` can be mitigated by assigning the result to a variable of type `long`, `decimal` or `double`.\r\n\r\nIf large integers are essential to your code then using the [`BigInteger`][big-integer] type is an option.\r\n\r\nNaturally there are occasions on which it is legitimate to allow an integer to wrap around particularly in the case of unsigned values. A classic case is that of hash codes that use the width of the integer as a kind of modulo.\r\n\r\nYou will usually find in code bases that there is often no check where an `uint` or a `ulong` is used as an identifier because it is considered more trouble than it's worth. This also applies where it is evident from the domain that no very large values will be involved. But, look at [this][computerphile-gangnam-style] for a cautionary tale.\r\n\r\n[computerphile-gangnam-style]: https://www.youtube.com/watch?v=vA0Rl6Ne5C8\r\n[integral-numeric-types]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/integral-numeric-types\r\n[floating-point-numeric-types]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types\r\n[numeric-conversions]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/numeric-conversions\r\n[checked-and-unchecked]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/checked-and-unchecked\r\n[checked-keyword]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/checked\r\n[unchecked-keyword]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/unchecked\r\n[checked-compiler-setting]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/checked-compiler-option\r\n[big-integer]: https://docs.microsoft.com/en-us/dotnet/api/system.numerics.biginteger\r\n",
    "introduction": "# Introduction\r\n\r\nArithmetic overflow occurs when a computation such as an arithmetic operation or type conversion results in a value that is greater than the capacity of the receiving type.\r\n\r\nExpressions of type `int` and `long` and their unsigned counterparts will quietly wrap around under these circumstances.\r\n\r\nThe behavior of integer computations can be modified by using the `checked` keyword. When an overflow occurs within a `checked` block an instance of `OverflowException` is thrown.\r\n\r\n```csharp\r\nint one = 1;\r\nchecked\r\n{\r\n    int expr = int.MaxValue + one;   // OverflowException is thrown\r\n}\r\n\r\n// or\r\n\r\nint expr2 = checked(int.MaxValue + one);     // OverflowException is thrown\r\n```\r\n\r\nExpressions of type `float` and `double` will take a special value of infinity.\r\n\r\nExpressions of type `decimal` will throw an instance of `OverflowException`.\r\n"
  },
  "links": [
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/integral-numeric-types",
      "description": "integral-numeric-types"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/checked-compiler-option",
      "description": "checked-compiler-setting"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/checked-and-unchecked",
      "description": "checked-and-unchecked"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types",
      "description": "floating-point-numeric-types"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/api/system.numerics.biginteger?view=netcore-3.1",
      "description": "big-integer"
    },
    {
      "url": "https://www.youtube.com/watch?v=vA0Rl6Ne5C8",
      "description": "computerphile-gangnam-style"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/numeric-conversions",
      "description": "numeric-conversions"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/checked",
      "description": "checked-keyword"
    },
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/unchecked",
      "description": "unchecked-keyword"
    }
  ]
}