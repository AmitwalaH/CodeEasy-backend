{
  "language": "csharp",
  "slug": "nested-types",
  "title": "Nested Types",
  "docs": {
    "about": "# About\r\n\r\nC# types can be defined within the scope of a class or struct. The enclosing type provides a kind of namespace. Access to the type is through the enclosing type with dot syntax.\r\n\r\n```csharp\r\nclass Outer\r\n{\r\n    public interface IInner {}\r\n    public enum EInner {}\r\n    public class CInner {}\r\n    public struct SInner {}\r\n}\r\n\r\nvar outer = new Outer();\r\nvar inner = new Outer.CInner();\r\n```\r\n\r\n## Access levels\r\n\r\nAccess levels can be applied to the inner types. For example if a class is `private` then it cannot be seen outside of the enclosing type's scope and of course instances cannot be seen or used outside the scope.\r\n\r\nThe private members of the outer class are in scope for all the members of the inner class but only the non-private members of the inner class are in scope for the members of the outer class. In order to access the outer classes members the inner class has to be given an instance of the outer class.\r\n\r\nThis can be seen in the following example:\r\n\r\n```csharp\r\nclass Outer\r\n{\r\n    public class InnerImpl\r\n    {\r\n        private Outer outer;\r\n\r\n        public int Interesting = 42;\r\n\r\n        public InnerImpl(Outer outer, int interesting)\r\n        {\r\n            this.outer = outer;\r\n            Interesting = interesting;\r\n        }\r\n\r\n    }\r\n\r\n    public InnerImpl Inner;\r\n    public Outer()\r\n    {\r\n        Inner = new InnerImpl(this, 42);\r\n    }\r\n}\r\n\r\nvar outer = new Outer();\r\nouter.Inner.Interesting\r\n// => 42\r\nvar inner = new Outer.InnerImpl(outer, 1729);\r\nouter.Inner.Interesting\r\n// => 1729\r\n```\r\n\r\n## Prevent independent instantiation\r\n\r\nThere is a pattern to prevent an instantiable type being created outside the enclosing type. You expose a public interface but keep the implementing class private.\r\n\r\n```csharp\r\nclass Outer\r\n{\r\n    public interface IInner\r\n    {\r\n        void DoSomething();\r\n    }\r\n\r\n    private class InnerImpl : IInner\r\n    {\r\n        private Outer outer;\r\n        public InnerImpl(Outer outer)\r\n        {\r\n            this.outer = outer;\r\n        }\r\n        public void DoSomething()\r\n        {\r\n            outer.DoSomethingElse();\r\n        }\r\n    }\r\n\r\n    public IInner Inner;\r\n\r\n    public Outer()\r\n    {\r\n        Inner = new InnerImpl(this);\r\n    }\r\n    private void DoSomethingElse()\r\n    {\r\n    }\r\n}\r\n\r\nvar outer = new Outer();\r\nouter.Inner.DoSomething();\r\n\r\n// NOT var inner = new Outer.Inner(outer);\r\n```\r\n\r\n## Note for Java developers\r\n\r\nC#'s nested classes are a cross between Java's static nested classes and inner classes. In C# private members of the enclosing class are in scope for members of the nested class but there is no special syntax for instantiating them and linking them to an instance of the enclosing class. You have to use some variation of the pattern illustrated in the examples above.\r\n\r\nC# does have static nested classes, but these are simply enclosed classes with static behavior.\r\n\r\n[nested-types]: https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/nested-types\r\n",
    "introduction": "# Introduction\r\n\r\nC# types can be defined within the scope of a class or struct. The enclosing type provides a kind of namespace. Access to the type is through the enclosing type with dot syntax.\r\n\r\n```csharp\r\nclass Outer\r\n{\r\n    public interface IInner {}\r\n    public enum EInner {}\r\n    public class CInner {}\r\n    public struct SInner {}\r\n}\r\n\r\nvar outer = new Outer();\r\nvar inner = new Outer.CInner();\r\n```\r\n\r\nYou can set access levels for inner types.\r\n\r\nPrivate members of the outer type are in scope for members of the inner type but not vice versa.\r\n"
  },
  "links": [
    {
      "url": "https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/nested-types",
      "description": "nested-types"
    }
  ]
}