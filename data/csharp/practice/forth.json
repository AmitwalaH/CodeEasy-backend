{
  "language": "csharp",
  "slug": "forth",
  "docs": {
    "instructions": "# Instructions\r\n\r\nImplement an evaluator for a very simple subset of Forth.\r\n\r\n[Forth][forth]\r\nis a stack-based programming language.\r\nImplement a very basic evaluator for a small subset of Forth.\r\n\r\nYour evaluator has to support the following words:\r\n\r\n- `+`, `-`, `*`, `/` (integer arithmetic)\r\n- `DUP`, `DROP`, `SWAP`, `OVER` (stack manipulation)\r\n\r\nYour evaluator also has to support defining new words using the customary syntax: `: word-name definition ;`.\r\n\r\nTo keep things simple the only data type you need to support is signed integers of at least 16 bits size.\r\n\r\nYou should use the following rules for the syntax: a number is a sequence of one or more (ASCII) digits, a word is a sequence of one or more letters, digits, symbols or punctuation that is not a number.\r\n(Forth probably uses slightly different rules, but this is close enough.)\r\n\r\nWords are case-insensitive.\r\n\r\n[forth]: https://en.wikipedia.org/wiki/Forth_%28programming_language%29\r\n",
    "instructions_append": "# Hints\r\n\r\n- To parse the text, you could try to use the [Sprache](https://github.com/sprache/Sprache/blob/develop/README.md) library. You can also find a good tutorial [here](https://www.thomaslevesque.com/2017/02/23/easy-text-parsing-in-c-with-sprache/).\r\n",
    "hints": ""
  },
  "starter_code": {
    "Forth.cs": "public static class Forth\r\n{\r\n    public static string Evaluate(string[] instructions)\r\n    {\r\n        throw new NotImplementedException(\"You need to implement this method.\");\r\n    }\r\n}"
  },
  "tests": {
    "ForthTests.cs": "public class ForthTests\r\n{\r\n    [Fact]\r\n    public void Parsing_and_numbers_numbers_just_get_pushed_onto_the_stack()\r\n    {\r\n        Assert.Equal(\"1 2 3 4 5\", Forth.Evaluate([\"1 2 3 4 5\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Parsing_and_numbers_pushes_negative_numbers_onto_the_stack()\r\n    {\r\n        Assert.Equal(\"-1 -2 -3 -4 -5\", Forth.Evaluate([\"-1 -2 -3 -4 -5\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Addition_can_add_two_numbers()\r\n    {\r\n        Assert.Equal(\"3\", Forth.Evaluate([\"1 2 +\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Addition_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"+\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Addition_errors_if_there_is_only_one_value_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"1 +\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Addition_more_than_two_values_on_the_stack()\r\n    {\r\n        Assert.Equal(\"1 5\", Forth.Evaluate([\"1 2 3 +\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Subtraction_can_subtract_two_numbers()\r\n    {\r\n        Assert.Equal(\"-1\", Forth.Evaluate([\"3 4 -\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Subtraction_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"-\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Subtraction_errors_if_there_is_only_one_value_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"1 -\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Subtraction_more_than_two_values_on_the_stack()\r\n    {\r\n        Assert.Equal(\"1 9\", Forth.Evaluate([\"1 12 3 -\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Multiplication_can_multiply_two_numbers()\r\n    {\r\n        Assert.Equal(\"8\", Forth.Evaluate([\"2 4 *\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Multiplication_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"*\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Multiplication_errors_if_there_is_only_one_value_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"1 *\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Multiplication_more_than_two_values_on_the_stack()\r\n    {\r\n        Assert.Equal(\"1 6\", Forth.Evaluate([\"1 2 3 *\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Division_can_divide_two_numbers()\r\n    {\r\n        Assert.Equal(\"4\", Forth.Evaluate([\"12 3 /\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Division_performs_integer_division()\r\n    {\r\n        Assert.Equal(\"2\", Forth.Evaluate([\"8 3 /\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Division_errors_if_dividing_by_zero()\r\n    {\r\n        Assert.Throws<DivideByZeroException>(() => Forth.Evaluate([\"4 0 /\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Division_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"/\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Division_errors_if_there_is_only_one_value_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"1 /\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Division_more_than_two_values_on_the_stack()\r\n    {\r\n        Assert.Equal(\"1 4\", Forth.Evaluate([\"1 12 3 /\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Combined_arithmetic_addition_and_subtraction()\r\n    {\r\n        Assert.Equal(\"-1\", Forth.Evaluate([\"1 2 + 4 -\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Combined_arithmetic_multiplication_and_division()\r\n    {\r\n        Assert.Equal(\"2\", Forth.Evaluate([\"2 4 * 3 /\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Combined_arithmetic_multiplication_and_addition()\r\n    {\r\n        Assert.Equal(\"13\", Forth.Evaluate([\"1 3 4 * +\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Combined_arithmetic_addition_and_multiplication()\r\n    {\r\n        Assert.Equal(\"7\", Forth.Evaluate([\"1 3 4 + *\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Dup_copies_a_value_on_the_stack()\r\n    {\r\n        Assert.Equal(\"1 1\", Forth.Evaluate([\"1 dup\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Dup_copies_the_top_value_on_the_stack()\r\n    {\r\n        Assert.Equal(\"1 2 2\", Forth.Evaluate([\"1 2 dup\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Dup_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"dup\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Drop_removes_the_top_value_on_the_stack_if_it_is_the_only_one()\r\n    {\r\n        Assert.Equal(\"\", Forth.Evaluate([\"1 drop\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Drop_removes_the_top_value_on_the_stack_if_it_is_not_the_only_one()\r\n    {\r\n        Assert.Equal(\"1\", Forth.Evaluate([\"1 2 drop\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Drop_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"drop\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Swap_swaps_the_top_two_values_on_the_stack_if_they_are_the_only_ones()\r\n    {\r\n        Assert.Equal(\"2 1\", Forth.Evaluate([\"1 2 swap\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Swap_swaps_the_top_two_values_on_the_stack_if_they_are_not_the_only_ones()\r\n    {\r\n        Assert.Equal(\"1 3 2\", Forth.Evaluate([\"1 2 3 swap\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Swap_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"swap\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Swap_errors_if_there_is_only_one_value_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"1 swap\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Over_copies_the_second_element_if_there_are_only_two()\r\n    {\r\n        Assert.Equal(\"1 2 1\", Forth.Evaluate([\"1 2 over\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Over_copies_the_second_element_if_there_are_more_than_two()\r\n    {\r\n        Assert.Equal(\"1 2 3 2\", Forth.Evaluate([\"1 2 3 over\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Over_errors_if_there_is_nothing_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"over\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Over_errors_if_there_is_only_one_value_on_the_stack()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"1 over\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_can_consist_of_built_in_words()\r\n    {\r\n        Assert.Equal(\"1 1 1\", Forth.Evaluate([\": dup-twice dup dup ;\", \"1 dup-twice\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_execute_in_the_right_order()\r\n    {\r\n        Assert.Equal(\"1 2 3\", Forth.Evaluate([\": countup 1 2 3 ;\", \"countup\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_can_override_other_user_defined_words()\r\n    {\r\n        Assert.Equal(\"1 1 1\", Forth.Evaluate([\": foo dup ;\", \": foo dup dup ;\", \"1 foo\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_can_override_built_in_words()\r\n    {\r\n        Assert.Equal(\"1 1\", Forth.Evaluate([\": swap dup ;\", \"1 swap\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_can_override_built_in_operators()\r\n    {\r\n        Assert.Equal(\"12\", Forth.Evaluate([\": + * ;\", \"3 4 +\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_can_use_different_words_with_the_same_name()\r\n    {\r\n        Assert.Equal(\"5 6\", Forth.Evaluate([\": foo 5 ;\", \": bar foo ;\", \": foo 6 ;\", \"bar foo\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_can_define_word_that_uses_word_with_the_same_name()\r\n    {\r\n        Assert.Equal(\"11\", Forth.Evaluate([\": foo 10 ;\", \": foo foo 1 + ;\", \"foo\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_cannot_redefine_non_negative_numbers()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\": 1 2 ;\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_cannot_redefine_negative_numbers()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\": -1 2 ;\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_errors_if_executing_a_non_existent_word()\r\n    {\r\n        Assert.Throws<InvalidOperationException>(() => Forth.Evaluate([\"foo\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void User_defined_words_only_defines_locally()\r\n    {\r\n        Assert.Equal(\"0\", Forth.Evaluate([\": + - ;\", \"1 1 +\"]));\r\n        Assert.Equal(\"2\", Forth.Evaluate([\"1 1 +\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Case_insensitivity_dup_is_case_insensitive()\r\n    {\r\n        Assert.Equal(\"1 1 1 1\", Forth.Evaluate([\"1 DUP Dup dup\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Case_insensitivity_drop_is_case_insensitive()\r\n    {\r\n        Assert.Equal(\"1\", Forth.Evaluate([\"1 2 3 4 DROP Drop drop\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Case_insensitivity_swap_is_case_insensitive()\r\n    {\r\n        Assert.Equal(\"2 3 4 1\", Forth.Evaluate([\"1 2 SWAP 3 Swap 4 swap\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Case_insensitivity_over_is_case_insensitive()\r\n    {\r\n        Assert.Equal(\"1 2 1 2 1\", Forth.Evaluate([\"1 2 OVER Over over\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Case_insensitivity_user_defined_words_are_case_insensitive()\r\n    {\r\n        Assert.Equal(\"1 1 1 1\", Forth.Evaluate([\": foo dup ;\", \"1 FOO Foo foo\"]));\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Case_insensitivity_definitions_are_case_insensitive()\r\n    {\r\n        Assert.Equal(\"1 1 1 1\", Forth.Evaluate([\": SWAP DUP Dup dup ;\", \"1 swap\"]));\r\n    }\r\n}\r\n"
  }
}