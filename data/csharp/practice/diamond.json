{
  "language": "csharp",
  "slug": "diamond",
  "docs": {
    "instructions": "# Instructions\r\n\r\nThe diamond kata takes as its input a letter, and outputs it in a diamond shape.\r\nGiven a letter, it prints a diamond starting with 'A', with the supplied letter at the widest point.\r\n\r\n## Requirements\r\n\r\n- The first row contains one 'A'.\r\n- The last row contains one 'A'.\r\n- All rows, except the first and last, have exactly two identical letters.\r\n- All rows have as many trailing spaces as leading spaces. (This might be 0).\r\n- The diamond is horizontally symmetric.\r\n- The diamond is vertically symmetric.\r\n- The diamond has a square shape (width equals height).\r\n- The letters form a diamond shape.\r\n- The top half has the letters in ascending order.\r\n- The bottom half has the letters in descending order.\r\n- The four corners (containing the spaces) are triangles.\r\n\r\n## Examples\r\n\r\nIn the following examples, spaces are indicated by `·` characters.\r\n\r\nDiamond for letter 'A':\r\n\r\n```text\r\nA\r\n```\r\n\r\nDiamond for letter 'C':\r\n\r\n```text\r\n··A··\r\n·B·B·\r\nC···C\r\n·B·B·\r\n··A··\r\n```\r\n\r\nDiamond for letter 'E':\r\n\r\n```text\r\n····A····\r\n···B·B···\r\n··C···C··\r\n·D·····D·\r\nE·······E\r\n·D·····D·\r\n··C···C··\r\n···B·B···\r\n····A····\r\n```\r\n",
    "instructions_append": "# Hints\r\n\r\nThe tests in this exercise are different from your usual tests. Normally, a test checks if for a given input, the output matches the expected value. This is called _value-based testing_. However, this exercise uses _property-based testing_, where the tests check if for a range of inputs, the output has a specific property. The two key differences that differentiate property-based testing from value-based testing are:\r\n\r\n1. A property-based test works not with a single input value, but with many.\r\n1. A property-based test verifies properties, not concrete values.\r\n\r\nFor this exercise, the tests all verify a property of the diamond shape your code should be producing. Furthermore, all tests check if the property they test holds for all valid input letters ('A' to 'Z').\r\n\r\nIn order to facilitate propery-based testing, the tests in this exercise leverage the [FsCheck](https://www.nuget.org/packages/FsCheck) and [FsCheck.Xunit](https://packages.nuget.org/packages/FsCheck.Xunit/2.2.0) packages. To learn more about FsCheck, the documentation on the framework can be found [here](https://fscheck.github.io/FsCheck/).\r\n\r\nIf you would like more information on property-based testing, see [this article](http://www.erikschierboom.com/2016/02/22/property-based-testing/).\r\n",
    "hints": ""
  },
  "starter_code": {
    "Diamond.cs": "public static class Diamond\r\n{\r\n    public static string Make(char target)\r\n    {\r\n        throw new NotImplementedException(\"Please implement this function\");\r\n    }\r\n}"
  },
  "tests": {
    "DiamondTests.cs": "using FsCheck;\r\nusing FsCheck.Fluent;\r\n\r\npublic class DiamondTests\r\n{\r\n    public static readonly char[] AllLetters = GetLetterRange('A', 'Z');\r\n    private static string[] Rows(string x) => x.Split('\\n').Select(line => line.TrimEnd('\\r')).ToArray();\r\n\r\n    private static string LeadingSpaces(string x) => x.Substring(0, x.IndexOfAny(AllLetters));\r\n    private static string TrailingSpaces(string x) => x.Substring(x.LastIndexOfAny(AllLetters) + 1);\r\n\r\n    private static char[] GetLetterRange(char min, char max) => Enumerable.Range(min, max - min + 1).Select(i => (char) i).ToArray();\r\n\r\n    [Fact]\r\n    public void Diamond_is_not_empty()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n            Assert.NotEmpty(actual);\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void First_row_contains_a()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n            var rows = Rows(actual);\r\n            var firstRowCharacters = rows.First().Trim();\r\n\r\n            Assert.Equal(\"A\", firstRowCharacters);\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void All_rows_must_have_symmetric_contour()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n            var rows = Rows(actual);\r\n\r\n            Assert.All(rows, row => { Assert.Equal(LeadingSpaces(row), TrailingSpaces(row)); });\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Top_of_figure_has_letters_in_correct_order()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n            var rows = Rows(actual);\r\n\r\n            var expected = GetLetterRange('A', letter);\r\n            var firstNonSpaceLetters = rows.Take(expected.Length).Select(row => row.Trim()[0]);\r\n\r\n            Assert.Equal(firstNonSpaceLetters, expected);\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Figure_is_symmetric_around_the_horizontal_axis()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n\r\n            var rows = Rows(actual);\r\n            var top = rows.TakeWhile(row => !row.Contains(letter));\r\n            var bottom = rows.Reverse().TakeWhile(row => !row.Contains(letter));\r\n\r\n            Assert.Equal(bottom, top);\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Diamond_has_square_shape()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n\r\n            var rows = Rows(actual);\r\n            var expected = rows.Length;\r\n\r\n            Assert.All(rows, row => { Assert.Equal(expected, row.Length); });\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void All_rows_except_top_and_bottom_have_two_identical_letters()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n\r\n            var rows = Rows(actual).Where(row => !row.Contains('A'));\r\n\r\n            Assert.All(rows, row =>\r\n            {\r\n                var twoCharacters = row.Replace(\" \", \"\").Length == 2;\r\n                var identicalCharacters = row.Replace(\" \", \"\").Distinct().Count() == 1;\r\n                Assert.True(twoCharacters && identicalCharacters, \"Does not have two identical letters\");\r\n            });\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Bottom_left_corner_spaces_are_triangle()\r\n    {\r\n        Prop.ForAll(Letters, letter =>\r\n        {\r\n            var actual = Diamond.Make(letter);\r\n\r\n            var rows = Rows(actual);\r\n\r\n            var cornerSpaces = rows.Reverse().SkipWhile(row => !row.Contains(letter)).Select(LeadingSpaces);\r\n            var spaceCounts = cornerSpaces.Select(row => row.Length).ToList();\r\n            var expected = Enumerable.Range(0, spaceCounts.Count).Select(i => i).ToList();\r\n\r\n            Assert.Equal(expected, spaceCounts);\r\n        }).QuickCheckThrowOnFailure();\r\n    }\r\n\r\n    private static readonly Arbitrary<char> Letters = Gen.Elements(\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".ToCharArray()).ToArbitrary();\r\n}"
  }
}