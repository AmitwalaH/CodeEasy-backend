{
  "language": "csharp",
  "slug": "split-second-stopwatch",
  "docs": {
    "instructions": "# Instructions\r\n\r\nYour task is to build a stopwatch to keep precise track of lap times.\r\n\r\nThe stopwatch uses four commands (start, stop, lap, and reset) to keep track of:\r\n\r\n1. The current lap's tracked time\r\n2. Previously recorded lap times\r\n\r\nWhat commands can be used depends on which state the stopwatch is in:\r\n\r\n1. Ready: initial state\r\n2. Running: tracking time\r\n3. Stopped: not tracking time\r\n\r\n| Command | Begin state | End state | Effect                                                   |\r\n| ------- | ----------- | --------- | -------------------------------------------------------- |\r\n| Start   | Ready       | Running   | Start tracking time                                      |\r\n| Start   | Stopped     | Running   | Resume tracking time                                     |\r\n| Stop    | Running     | Stopped   | Stop tracking time                                       |\r\n| Lap     | Running     | Running   | Add current lap to previous laps, then reset current lap |\r\n| Reset   | Stopped     | Ready     | Reset current lap and clear previous laps                |\r\n",
    "instructions_append": "",
    "hints": ""
  },
  "starter_code": {
    "SplitSecondStopwatch.cs": "public enum StopwatchState\r\n{\r\n    Ready,\r\n    Running,\r\n    Stopped\r\n}\r\n\r\npublic class SplitSecondStopwatch(TimeProvider time)\r\n{    \r\n    public StopwatchState State { get; }\r\n    public TimeSpan CurrentLap { get; }\r\n    public TimeSpan Total { get; }\r\n    public IReadOnlyCollection<TimeSpan> PreviousLaps { get; }\r\n\r\n    public void Start()\r\n    {\r\n        throw new NotImplementedException(\"You need to implement this method.\");\r\n    }\r\n\r\n    public void Stop()\r\n    {\r\n        throw new NotImplementedException(\"You need to implement this method.\");\r\n    }\r\n\r\n    public void Reset()\r\n    {\r\n        throw new NotImplementedException(\"You need to implement this method.\");\r\n    }\r\n\r\n    public void Lap()\r\n    {\r\n        throw new NotImplementedException(\"You need to implement this method.\");\r\n    }\r\n}\r\n"
  },
  "tests": {
    "SplitSecondStopwatchTests.cs": "using Microsoft.Extensions.Time.Testing;\r\n\r\npublic class SplitSecondStopwatchTests\r\n{\r\n    [Fact]\r\n    public void New_stopwatch_starts_in_ready_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Equal(StopwatchState.Ready, stopwatch.State);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void New_stopwatch_s_current_lap_has_no_elapsed_time()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Equal(TimeSpan.Zero, stopwatch.CurrentLap);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void New_stopwatch_s_total_has_no_elapsed_time()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Equal(TimeSpan.Zero, stopwatch.Total);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void New_stopwatch_does_not_have_previous_laps()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Empty(stopwatch.PreviousLaps);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_from_ready_state_changes_state_to_running()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        Assert.Equal(StopwatchState.Running, stopwatch.State);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_does_not_change_previous_laps()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        Assert.Empty(stopwatch.PreviousLaps);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_initiates_time_tracking_for_current_lap()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 5));\r\n        Assert.Equal(new TimeSpan(0, 0, 5), stopwatch.CurrentLap);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_initiates_time_tracking_for_total()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 23));\r\n        Assert.Equal(new TimeSpan(0, 0, 23), stopwatch.Total);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_cannot_be_called_from_running_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Start());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Stop_from_running_state_changes_state_to_stopped()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        stopwatch.Stop();\r\n\r\n        Assert.Equal(StopwatchState.Stopped, stopwatch.State);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Stop_pauses_time_tracking_for_current_lap()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 5));\r\n        stopwatch.Stop();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 8));\r\n        Assert.Equal(new TimeSpan(0, 0, 5), stopwatch.CurrentLap);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Stop_pauses_time_tracking_for_total()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 13));\r\n        stopwatch.Stop();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 44));\r\n        Assert.Equal(new TimeSpan(0, 0, 13), stopwatch.Total);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Stop_cannot_be_called_from_ready_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Stop());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Stop_cannot_be_called_from_stopped_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        stopwatch.Stop();\r\n\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Stop());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_from_stopped_state_changes_state_to_running()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        stopwatch.Stop();\r\n\r\n        stopwatch.Start();\r\n\r\n        Assert.Equal(StopwatchState.Running, stopwatch.State);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_from_stopped_state_resumes_time_tracking_for_current_lap()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 1, 20));\r\n        stopwatch.Stop();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 20));\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 8));\r\n        Assert.Equal(new TimeSpan(0, 1, 28), stopwatch.CurrentLap);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Start_from_stopped_state_resumes_time_tracking_for_total()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 23));\r\n        stopwatch.Stop();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 44));\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 9));\r\n        Assert.Equal(new TimeSpan(0, 0, 32), stopwatch.Total);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Lap_adds_current_lap_to_previous_laps()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 1, 38));\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(0, 1, 38)], stopwatch.PreviousLaps);\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 44));\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(0, 1, 38), new TimeSpan(0, 0, 44)], stopwatch.PreviousLaps);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Lap_resets_current_lap_and_resumes_time_tracking()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 8, 22));\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal(TimeSpan.Zero, stopwatch.CurrentLap);\r\n        timeProvider.Advance(new TimeSpan(0, 0, 15));\r\n        Assert.Equal(new TimeSpan(0, 0, 15), stopwatch.CurrentLap);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Lap_continues_time_tracking_for_total()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 22));\r\n        stopwatch.Lap();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 33));\r\n        Assert.Equal(new TimeSpan(0, 0, 55), stopwatch.Total);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Lap_cannot_be_called_from_ready_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Lap());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Lap_cannot_be_called_from_stopped_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        stopwatch.Stop();\r\n\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Lap());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Stop_does_not_change_previous_laps()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 11, 22));\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(0, 11, 22)], stopwatch.PreviousLaps);\r\n\r\n        stopwatch.Stop();\r\n\r\n        Assert.Equal([new TimeSpan(0, 11, 22)], stopwatch.PreviousLaps);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Reset_from_stopped_state_changes_state_to_ready()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        stopwatch.Stop();\r\n\r\n        stopwatch.Reset();\r\n\r\n        Assert.Equal(StopwatchState.Ready, stopwatch.State);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Reset_resets_current_lap()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 10));\r\n        stopwatch.Stop();\r\n\r\n        stopwatch.Reset();\r\n\r\n        Assert.Equal(TimeSpan.Zero, stopwatch.CurrentLap);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Reset_clears_previous_laps()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 10));\r\n        stopwatch.Lap();\r\n\r\n        timeProvider.Advance(new TimeSpan(0, 0, 20));\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(0, 0, 10), new TimeSpan(0, 0, 20)], stopwatch.PreviousLaps);\r\n\r\n        stopwatch.Stop();\r\n\r\n        stopwatch.Reset();\r\n\r\n        Assert.Empty(stopwatch.PreviousLaps);\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Reset_cannot_be_called_from_ready_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Reset());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Reset_cannot_be_called_from_running_state()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        Assert.Throws<InvalidOperationException>(() => stopwatch.Reset());\r\n    }\r\n\r\n    [Fact(Skip = \"Remove this Skip property to run this test\")]\r\n    public void Supports_very_long_laps()\r\n    {\r\n        var timeProvider = new FakeTimeProvider();\r\n        var stopwatch = new SplitSecondStopwatch(timeProvider);\r\n        stopwatch.Start();\r\n\r\n        timeProvider.Advance(new TimeSpan(1, 23, 45));\r\n        Assert.Equal(new TimeSpan(1, 23, 45), stopwatch.CurrentLap);\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(1, 23, 45)], stopwatch.PreviousLaps);\r\n\r\n        timeProvider.Advance(new TimeSpan(4, 1, 40));\r\n        Assert.Equal(new TimeSpan(4, 1, 40), stopwatch.CurrentLap);\r\n        Assert.Equal(new TimeSpan(5, 25, 25), stopwatch.Total);\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(1, 23, 45), new TimeSpan(4, 1, 40)], stopwatch.PreviousLaps);\r\n\r\n        timeProvider.Advance(new TimeSpan(8, 43, 5));\r\n        Assert.Equal(new TimeSpan(8, 43, 5), stopwatch.CurrentLap);\r\n        Assert.Equal(new TimeSpan(14, 8, 30), stopwatch.Total);\r\n        stopwatch.Lap();\r\n\r\n        Assert.Equal([new TimeSpan(1, 23, 45), new TimeSpan(4, 1, 40), new TimeSpan(8, 43, 5)], stopwatch.PreviousLaps);\r\n    }\r\n}\r\n"
  }
}