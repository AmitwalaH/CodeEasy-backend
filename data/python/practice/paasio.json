{
  "language": "python",
  "type": "practice",
  "slug": "paasio",
  "title": "Paasio",
  "docs": {
    "instructions": "# Instructions\r\n\r\nReport network IO statistics.\r\n\r\nYou are writing a [PaaS][paas], and you need a way to bill customers based on network and filesystem usage.\r\n\r\nCreate a wrapper for network connections and files that can report IO statistics.\r\nThe wrapper must report:\r\n\r\n- The total number of bytes read/written.\r\n- The total number of read/write operations.\r\n\r\n[paas]: https://en.wikipedia.org/wiki/Platform_as_a_service\r\n",
    "hints": ""
  },
  "starter_code": "import io\r\n\r\n\r\nclass MeteredFile(io.BufferedRandom):\r\n    \"\"\"Implement using a subclassing model.\"\"\"\r\n\r\n    def __init__(self, *args, **kwargs):\r\n        pass\r\n\r\n    def __enter__(self):\r\n        pass\r\n\r\n    def __exit__(self, exc_type, exc_val, exc_tb):\r\n        pass\r\n\r\n    def __iter__(self):\r\n        pass\r\n\r\n    def __next__(self):\r\n        pass\r\n\r\n    def read(self, size=-1):\r\n        pass\r\n\r\n    @property\r\n    def read_bytes(self):\r\n        pass\r\n\r\n    @property\r\n    def read_ops(self):\r\n        pass\r\n\r\n    def write(self, b):\r\n        pass\r\n\r\n    @property\r\n    def write_bytes(self):\r\n        pass\r\n\r\n    @property\r\n    def write_ops(self):\r\n        pass\r\n\r\n\r\nclass MeteredSocket:\r\n    \"\"\"Implement using a delegation model.\"\"\"\r\n\r\n    def __init__(self, socket):\r\n        pass\r\n\r\n    def __enter__(self):\r\n        pass\r\n\r\n    def __exit__(self, exc_type, exc_val, exc_tb):\r\n        pass\r\n\r\n    def recv(self, bufsize, flags=0):\r\n        pass\r\n\r\n    @property\r\n    def recv_bytes(self):\r\n        pass\r\n\r\n    @property\r\n    def recv_ops(self):\r\n        pass\r\n\r\n    def send(self, data, flags=0):\r\n        pass\r\n\r\n    @property\r\n    def send_bytes(self):\r\n        pass\r\n\r\n    @property\r\n    def send_ops(self):\r\n        pass\r\n",
  "tests": "import errno\r\nimport os\r\nimport unittest\r\nfrom unittest.mock import ANY, call, NonCallableMagicMock, patch\r\n\r\nfrom test_utils import MockSock, MockFile, MockException, ZEN, SuperMock\r\n\r\nfrom paasio import MeteredFile, MeteredSocket\r\n\r\n\r\nclass PaasioTest(unittest.TestCase):\r\n    def test_meteredsocket_context_manager(self):\r\n        wrapped = MockSock()\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        mock.__exit__.side_effect = wrapped.__exit__\r\n        with MeteredSocket(mock) as socket:\r\n            self.assertFalse(mock.__enter__.called)\r\n            socket.recv(30)\r\n        self.assertFalse(mock.__enter__.called)\r\n        mock.__exit__.assert_called_once_with(None, None, None)\r\n        self.assertEqual(2, len(mock.mock_calls))\r\n        with self.assertRaisesRegex(OSError, os.strerror(errno.EBADF)):\r\n            socket.recv(30)\r\n        with self.assertRaisesRegex(OSError, os.strerror(errno.EBADF)):\r\n            socket.send(b\"\")\r\n\r\n    def test_meteredsocket_context_manager_exception_raise(self):\r\n        exception = MockException(\"Should raise\")\r\n        wrapped = MockSock(exception=exception)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        mock.__exit__.side_effect = wrapped.__exit__\r\n        with self.assertRaisesRegex(MockException, \"Should raise\") as err:\r\n            with MeteredSocket(mock) as socket:\r\n                self.assertFalse(mock.__enter__.called)\r\n                socket.recv(4096)\r\n        self.assertFalse(mock.__enter__.called)\r\n        mock.__exit__.assert_called_once_with(\r\n            MockException,\r\n            err.exception,\r\n            ANY,\r\n        )\r\n        self.assertEqual(exception, err.exception)\r\n\r\n    def test_meteredsocket_context_manager_exception_suppress(self):\r\n        exception = MockException(\"Should suppress\")\r\n        wrapped = MockSock(exception=exception)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        mock.__exit__.side_effect = wrapped.__exit__\r\n        with MeteredSocket(mock) as socket:\r\n            self.assertFalse(mock.__enter__.called)\r\n            socket.recv(4096)\r\n        self.assertFalse(mock.__enter__.called)\r\n        mock.__exit__.assert_called_once_with(\r\n            MockException,\r\n            exception,\r\n            ANY,\r\n        )\r\n\r\n    def test_meteredsocket_recv_once(self):\r\n        mock = NonCallableMagicMock(wraps=MockSock(), autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            actual_recv = socket.recv(4096)\r\n        self.assertEqual(ZEN, actual_recv)\r\n        self.assertEqual(1, socket.recv_ops)\r\n        self.assertEqual(len(ZEN), socket.recv_bytes)\r\n        self.assertEqual(1, mock.recv.call_count)\r\n\r\n    def test_meteredsocket_recv_multiple(self):\r\n        wrapped = MockSock()\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        actual_recv = b\"\"\r\n        with MeteredSocket(mock) as socket:\r\n            for _ in range(5):\r\n                actual_recv += socket.recv(30)\r\n        self.assertEqual(ZEN[:150], actual_recv)\r\n        self.assertEqual(5, socket.recv_ops)\r\n        self.assertEqual(150, socket.recv_bytes)\r\n        self.assertEqual(5, mock.recv.call_count)\r\n\r\n    def test_meteredsocket_recv_multiple_chunk(self):\r\n        wrapped = MockSock(chunk=20)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        actual_recv = b\"\"\r\n        with MeteredSocket(mock) as socket:\r\n            for _ in range(5):\r\n                actual_recv += socket.recv(4096)\r\n            actual_recv += socket.recv(10)\r\n        self.assertEqual(ZEN[:110], actual_recv)\r\n        self.assertEqual(6, socket.recv_ops)\r\n        self.assertEqual(110, socket.recv_bytes)\r\n        self.assertEqual(6, mock.recv.call_count)\r\n\r\n    def test_meteredsocket_recv_under_size(self):\r\n        wrapped = MockSock(chunk=257)  # largish odd number\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            actual_recv = socket.recv(4096)\r\n        self.assertEqual(ZEN[:257], actual_recv)\r\n        self.assertEqual(1, socket.recv_ops)\r\n        self.assertEqual(257, socket.recv_bytes)\r\n        self.assertEqual(1, mock.recv.call_count)\r\n\r\n    def test_meteredsocket_send_once(self):\r\n        wrapped = MockSock(chunk=257)  # largish odd number\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            send_len = socket.send(ZEN)\r\n            self.assertEqual(ZEN[:257], wrapped._sender.getbuffer())\r\n        self.assertEqual(257, send_len)\r\n        self.assertEqual(1, socket.send_ops)\r\n        self.assertEqual(257, socket.send_bytes)\r\n        self.assertEqual(1, mock.send.call_count)\r\n\r\n    def test_meteredsocket_send_multiple(self):\r\n        wrapped = MockSock()\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        send_len = 0\r\n        expected = b\"Tomorrow's victory is today's practice.\"\r\n        with MeteredSocket(mock) as socket:\r\n            send_len += socket.send(b\"Tomorro\")\r\n            send_len += socket.send(b\"w's victo\")\r\n            send_len += socket.send(b\"ry is today\")\r\n            send_len += socket.send(b\"'s practice.\")\r\n            self.assertEqual(expected, wrapped._sender.getbuffer())\r\n        self.assertEqual(39, send_len)\r\n        self.assertEqual(4, socket.send_ops)\r\n        self.assertEqual(39, socket.send_bytes)\r\n        self.assertEqual(4, mock.send.call_count)\r\n\r\n    def test_meteredsocket_send_under_size(self):\r\n        wrapped = MockSock(chunk=257)  # largish odd number\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            send_len = socket.send(ZEN[:123])\r\n            self.assertEqual(ZEN[:123], wrapped._sender.getbuffer())\r\n        self.assertEqual(123, send_len)\r\n        self.assertEqual(1, socket.send_ops)\r\n        self.assertEqual(123, socket.send_bytes)\r\n        self.assertEqual(1, mock.send.call_count)\r\n\r\n    def test_meteredsocket_bufsize_required(self):\r\n        mock = NonCallableMagicMock(wraps=MockSock(), autospec=True)\r\n        with self.assertRaisesRegex(TypeError, \"argument\"):\r\n            with MeteredSocket(mock) as socket:\r\n                socket.recv()\r\n        self.assertFalse(mock.recv.called)\r\n\r\n        mock = NonCallableMagicMock(wraps=MockSock(), autospec=True)\r\n        with self.assertRaisesRegex(TypeError, \"^'NoneType'.+integer$\"):\r\n            with MeteredSocket(mock) as socket:\r\n                socket.recv(None)\r\n        self.assertTrue(\r\n            call(None) in mock.recv.mock_calls\r\n            or call(None, ANY) in mock.recv.mock_calls\r\n        )\r\n\r\n    def test_meteredsocket_flags_support(self):\r\n        mock = NonCallableMagicMock(wraps=MockSock(), autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            self.assertEqual(len(ZEN), socket.send(ZEN, 42))\r\n            self.assertEqual(ZEN, socket.recv(4096, 24))\r\n        mock.send.assert_called_once_with(ZEN, 42)\r\n        mock.recv.assert_called_once_with(4096, 24)\r\n\r\n        wrapped = MockSock()\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            socket.recv(50)\r\n            self.assertEqual(0, wrapped.flags)\r\n            socket.send(b\"no flags\")\r\n            self.assertEqual(0, wrapped.flags)\r\n            socket.recv(30, 30)\r\n            self.assertEqual(30, wrapped.flags)\r\n            socket.send(b\"flags\", 1024)\r\n            self.assertEqual(1024, wrapped.flags)\r\n            with self.assertRaisesRegex(TypeError, \"integer is required\"):\r\n                socket.send(b\"data\", None)\r\n            with self.assertRaisesRegex(TypeError, \"integer is required\"):\r\n                socket.send(b\"data\", b\"flags\")\r\n            with self.assertRaisesRegex(TypeError, \"integer is required\"):\r\n                socket.recv(b\"data\", None)\r\n            with self.assertRaisesRegex(TypeError, \"integer is required\"):\r\n                socket.recv(b\"data\", b\"flags\")\r\n\r\n    def test_meteredsocket_stats_read_only(self):\r\n        mock = NonCallableMagicMock(wraps=MockSock(), autospec=True)\r\n        with MeteredSocket(mock) as socket:\r\n            self.assertEqual(0, socket.send_ops)\r\n            self.assertEqual(0, socket.send_bytes)\r\n            self.assertEqual(0, socket.recv_ops)\r\n            self.assertEqual(0, socket.recv_bytes)\r\n            for _ in range(277):\r\n                socket.send(b\"b\")\r\n            socket.send(b\"bytes\")\r\n            for _ in range(257):\r\n                socket.recv(1)\r\n            socket.recv(2)\r\n            self.assertEqual(278, socket.send_ops)\r\n            self.assertEqual(282, socket.send_bytes)\r\n            self.assertEqual(258, socket.recv_ops)\r\n            self.assertEqual(259, socket.recv_bytes)\r\n            with self.assertRaises(AttributeError, msg=\"property 'send_ops' of 'MeteredSocket' object has no setter\"):\r\n                socket.send_ops = 0\r\n            with self.assertRaises(AttributeError, msg=\"property 'send_bytes' of 'MeteredSocket' object has no setter\"):\r\n                socket.send_bytes = 0\r\n            with self.assertRaises(AttributeError, msg=\"property 'recv_ops' of 'MeteredSocket' object has no setter\"):\r\n                socket.recv_ops = 0\r\n            with self.assertRaises(AttributeError, msg=\"property 'recv_bytes' of 'MeteredSocket' object has no setter\"):\r\n                socket.recv_bytes = 0\r\n            self.assertEqual(278, socket.send_ops)\r\n            self.assertEqual(282, socket.send_bytes)\r\n            self.assertEqual(258, socket.recv_ops)\r\n            self.assertEqual(259, socket.recv_bytes)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_context_manager(self, super_mock):\r\n        wrapped = MockFile(ZEN)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        mock.__exit__.side_effect = wrapped.__exit__\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            self.assertEqual(1, super_mock.init_called)\r\n            self.assertFalse(mock.__enter__.called)\r\n            file.read()\r\n        self.assertFalse(mock.__enter__.called)\r\n        mock.__exit__.assert_called_once_with(None, None, None)\r\n        self.assertEqual(2, len(mock.mock_calls))\r\n        with self.assertRaisesRegex(ValueError, \"I/O operation on closed file.\"):\r\n            file.read()\r\n        with self.assertRaisesRegex(ValueError, \"I/O operation on closed file.\"):\r\n            file.write(b\"data\")\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_context_manager_exception_raise(self, super_mock):\r\n        exception = MockException(\"Should raise\")\r\n        wrapped = MockFile(ZEN, exception=exception)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        mock.__exit__.side_effect = wrapped.__exit__\r\n        super_mock.mock_object = mock\r\n        with self.assertRaisesRegex(MockException, \"Should raise\") as err:\r\n            with MeteredFile() as file:\r\n                self.assertFalse(mock.__enter__.called)\r\n                file.read()\r\n        self.assertFalse(mock.__enter__.called)\r\n        mock.__exit__.assert_called_once_with(\r\n            MockException,\r\n            err.exception,\r\n            ANY,\r\n        )\r\n        self.assertEqual(exception, err.exception)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_context_manager_exception_suppress(self, super_mock):\r\n        exception = MockException(\"Should suppress\")\r\n        wrapped = MockFile(ZEN, exception=exception)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        mock.__exit__.side_effect = wrapped.__exit__\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            self.assertFalse(mock.__enter__.called)\r\n            file.read()\r\n        self.assertFalse(mock.__enter__.called)\r\n        mock.__exit__.assert_called_once_with(\r\n            MockException,\r\n            exception,\r\n            ANY,\r\n        )\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_iteration(self, super_mock):\r\n        mock = NonCallableMagicMock(wraps=MockFile(ZEN), autospec=True)\r\n        super_mock.mock_object = mock\r\n        actual_reads = b\"\"\r\n        file = MeteredFile()\r\n        for line in file:\r\n            actual_reads += line\r\n            self.assertLess(0, mock.readline.call_count, \"File's readline not called\")\r\n            self.assertGreater(\r\n                50, mock.readline.call_count, \"Possible infinte loop detected\"\r\n            )\r\n            self.assertEqual(file.read_ops, mock.readline.call_count)\r\n        self.assertFalse(mock.__iter__.called)\r\n        self.assertEqual(len(ZEN), file.read_bytes)\r\n        self.assertEqual(ZEN, actual_reads)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_read_once(self, super_mock):\r\n        mock = NonCallableMagicMock(wraps=MockFile(ZEN), autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            actual_read = file.read()\r\n        self.assertEqual(ZEN, actual_read)\r\n        self.assertEqual((len(ZEN)), file.read_bytes)\r\n        self.assertEqual(1, file.read_ops)\r\n        self.assertEqual(mock.read.call_count, file.read_ops)\r\n        mock = NonCallableMagicMock(wraps=MockFile(ZEN), autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            actual_read = file.read(None)\r\n        self.assertEqual(ZEN, actual_read)\r\n        self.assertEqual((len(ZEN)), file.read_bytes)\r\n        self.assertEqual(1, file.read_ops)\r\n        self.assertEqual(mock.read.call_count, file.read_ops)\r\n        mock = NonCallableMagicMock(wraps=MockFile(ZEN), autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            actual_read = file.read(-1)\r\n        self.assertEqual(ZEN, actual_read)\r\n        self.assertEqual((len(ZEN)), file.read_bytes)\r\n        self.assertEqual(1, file.read_ops)\r\n        self.assertEqual(mock.read.call_count, file.read_ops)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_read_multiple(self, super_mock):\r\n        wrapped = MockFile(ZEN)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        actual_read = b\"\"\r\n        with MeteredFile() as file:\r\n            for _ in range(5):\r\n                actual_read += file.read(30)\r\n        self.assertEqual(ZEN[:150], actual_read)\r\n        self.assertEqual(5, file.read_ops)\r\n        self.assertEqual(150, file.read_bytes)\r\n        self.assertEqual(5, mock.read.call_count)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_read_multiple_chunk(self, super_mock):\r\n        wrapped = MockFile(ZEN, chunk=20)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        actual_read = b\"\"\r\n        with MeteredFile() as file:\r\n            for _ in range(5):\r\n                actual_read += file.read()\r\n            actual_read += file.read(10)\r\n        self.assertEqual(ZEN[:110], actual_read)\r\n        self.assertEqual(6, file.read_ops)\r\n        self.assertEqual(110, file.read_bytes)\r\n        self.assertEqual(6, mock.read.call_count)\r\n        wrapped = MockFile(ZEN, chunk=20)\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        actual_read = b\"\"\r\n        with MeteredFile() as file:\r\n            for size in [None, -2, -1, 0, 1, 2]:\r\n                actual_read += file.read(size)\r\n            actual_read += file.read(10)\r\n        self.assertEqual(ZEN[:73], actual_read)\r\n        self.assertEqual(7, file.read_ops)\r\n        self.assertEqual(73, file.read_bytes)\r\n        self.assertEqual(7, mock.read.call_count)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_read_under_size(self, super_mock):\r\n        wrapped = MockFile(ZEN, chunk=257)  # largish odd number\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            actual_read = file.read()\r\n        self.assertEqual(ZEN[:257], actual_read)\r\n        self.assertEqual(1, file.read_ops)\r\n        self.assertEqual(257, file.read_bytes)\r\n        self.assertEqual(1, mock.read.call_count)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_write_once(self, super_mock):\r\n        wrapped = MockFile(chunk=257)  # largish odd number\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            write_len = file.write(ZEN)\r\n            self.assertEqual(ZEN[:257], wrapped.getbuffer())\r\n        self.assertEqual(257, write_len)\r\n        self.assertEqual(1, file.write_ops)\r\n        self.assertEqual(257, file.write_bytes)\r\n        self.assertEqual(1, mock.write.call_count)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_write_multiple(self, super_mock):\r\n        wrapped = MockFile()\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        write_len = 0\r\n        expected = b\"Tomorrow's victory is today's practice.\"\r\n        with MeteredFile() as file:\r\n            write_len += file.write(b\"Tomorro\")\r\n            write_len += file.write(b\"w's victo\")\r\n            write_len += file.write(b\"ry is today\")\r\n            write_len += file.write(b\"'s practice.\")\r\n            self.assertEqual(expected, wrapped.getbuffer())\r\n        self.assertEqual(39, write_len)\r\n        self.assertEqual(4, file.write_ops)\r\n        self.assertEqual(39, file.write_bytes)\r\n        self.assertEqual(4, mock.write.call_count)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_write_under_size(self, super_mock):\r\n        wrapped = MockFile(chunk=257)  # largish odd number\r\n        mock = NonCallableMagicMock(wraps=wrapped, autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            write_len = file.write(ZEN[:123])\r\n            self.assertEqual(ZEN[:123], wrapped.getbuffer())\r\n        self.assertEqual(123, write_len)\r\n        self.assertEqual(1, file.write_ops)\r\n        self.assertEqual(123, file.write_bytes)\r\n        self.assertEqual(1, mock.write.call_count)\r\n\r\n    @patch(\"paasio.super\", create=True, new_callable=SuperMock)\r\n    def test_meteredfile_stats_read_only(self, super_mock):\r\n        mock = NonCallableMagicMock(wraps=MockFile(ZEN), autospec=True)\r\n        super_mock.mock_object = mock\r\n        with MeteredFile() as file:\r\n            self.assertEqual(0, file.read_ops)\r\n            self.assertEqual(0, file.read_bytes)\r\n            for _ in range(57):\r\n                file.read(1)\r\n            file.read(2)\r\n            self.assertEqual(58, file.read_ops)\r\n            self.assertEqual(59, file.read_bytes)\r\n            self.assertEqual(0, file.write_ops)\r\n            self.assertEqual(0, file.write_bytes)\r\n            for _ in range(77):\r\n                file.write(b\"b\")\r\n            file.write(b\"bytes\")\r\n            self.assertEqual(78, file.write_ops)\r\n            self.assertEqual(82, file.write_bytes)\r\n            with self.assertRaises(AttributeError, msg=\"property 'write_ops' of 'MeteredFile' object has no setter\"):\r\n                file.write_ops = 0\r\n            with self.assertRaises(AttributeError, msg=\"property 'write_bytes' of 'MeteredFile' object has no setter\"):\r\n                file.write_bytes = 0\r\n            with self.assertRaises(AttributeError, msg=\"property 'read_ops' of 'MeteredFile' object has no setter\"):\r\n                file.read_ops = 0\r\n            with self.assertRaises(AttributeError, msg=\"property 'read_bytes' of 'MeteredFile' object has no setter\"):\r\n                file.read_bytes = 0\r\n            self.assertEqual(78, file.write_ops)\r\n            self.assertEqual(82, file.write_bytes)\r\n            self.assertEqual(58, file.read_ops)\r\n            self.assertEqual(59, file.read_bytes)\r\n"
}