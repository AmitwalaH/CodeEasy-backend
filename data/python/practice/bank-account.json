{
  "language": "python",
  "type": "practice",
  "slug": "bank-account",
  "title": "Bank Account",
  "docs": {
    "instructions": "# Instructions\r\n\r\nYour task is to implement bank accounts supporting opening/closing, withdrawals, and deposits of money.\r\n\r\nAs bank accounts can be accessed in many different ways (internet, mobile phones, automatic charges), your bank software must allow accounts to be safely accessed from multiple threads/processes (terminology depends on your programming language) in parallel.\r\nFor example, there may be many deposits and withdrawals occurring in parallel; you need to ensure there are no [race conditions][wikipedia] between when you read the account balance and set the new balance.\r\n\r\nIt should be possible to close an account; operations against a closed account must fail.\r\n\r\n[wikipedia]: https://en.wikipedia.org/wiki/Race_condition#In_software\r\n",
    "hints": ""
  },
  "starter_code": "class BankAccount:\r\n    def __init__(self):\r\n        pass\r\n\r\n    def get_balance(self):\r\n        pass\r\n\r\n    def open(self):\r\n        pass\r\n\r\n    def deposit(self, amount):\r\n        pass\r\n\r\n    def withdraw(self, amount):\r\n        pass\r\n\r\n    def close(self):\r\n        pass\r\n",
  "tests": "# These tests are auto-generated with test data from:\r\n# https://github.com/exercism/problem-specifications/tree/main/exercises/bank-account/canonical-data.json\r\n# File last updated on 2023-07-20\r\n\r\nimport unittest\r\n\r\nfrom bank_account import (\r\n    BankAccount,\r\n)\r\n\r\n\r\nclass BankAccountTest(unittest.TestCase):\r\n    def test_newly_opened_account_has_zero_balance(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        self.assertEqual(account.get_balance(), 0)\r\n\r\n    def test_single_deposit(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(100)\r\n        self.assertEqual(account.get_balance(), 100)\r\n\r\n    def test_multiple_deposits(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(100)\r\n        account.deposit(50)\r\n        self.assertEqual(account.get_balance(), 150)\r\n\r\n    def test_withdraw_once(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(100)\r\n        account.withdraw(75)\r\n        self.assertEqual(account.get_balance(), 25)\r\n\r\n    def test_withdraw_twice(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(100)\r\n        account.withdraw(80)\r\n        account.withdraw(20)\r\n        self.assertEqual(account.get_balance(), 0)\r\n\r\n    def test_can_do_multiple_operations_sequentially(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(100)\r\n        account.deposit(110)\r\n        account.withdraw(200)\r\n        account.deposit(60)\r\n        account.withdraw(50)\r\n        self.assertEqual(account.get_balance(), 20)\r\n\r\n    def test_cannot_check_balance_of_closed_account(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.close()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.get_balance()\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"account not open\")\r\n\r\n    def test_cannot_deposit_into_closed_account(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.close()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.deposit(50)\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"account not open\")\r\n\r\n    def test_cannot_deposit_into_unopened_account(self):\r\n        account = BankAccount()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.deposit(50)\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"account not open\")\r\n\r\n    def test_cannot_withdraw_from_closed_account(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.close()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.withdraw(50)\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"account not open\")\r\n\r\n    def test_cannot_close_an_account_that_was_not_opened(self):\r\n        account = BankAccount()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.close()\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"account not open\")\r\n\r\n    def test_cannot_open_an_already_opened_account(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.open()\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"account already open\")\r\n\r\n    def test_reopened_account_does_not_retain_balance(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(50)\r\n        account.close()\r\n        account.open()\r\n        self.assertEqual(account.get_balance(), 0)\r\n\r\n    def test_cannot_withdraw_more_than_deposited(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(25)\r\n        with self.assertRaises(ValueError) as err:\r\n            account.withdraw(50)\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"amount must be less than balance\")\r\n\r\n    def test_cannot_withdraw_negative(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        account.deposit(100)\r\n        with self.assertRaises(ValueError) as err:\r\n            account.withdraw(-50)\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"amount must be greater than 0\")\r\n\r\n    def test_cannot_deposit_negative(self):\r\n        account = BankAccount()\r\n        account.open()\r\n        with self.assertRaises(ValueError) as err:\r\n            account.deposit(-50)\r\n        self.assertEqual(type(err.exception), ValueError)\r\n        self.assertEqual(err.exception.args[0], \"amount must be greater than 0\")\r\n"
}