{
  "language": "go",
  "type": "practice",
  "slug": "dominoes",
  "title": "Dominoes",
  "docs": {
    "instructions": "# Instructions\r\n\r\nMake a chain of dominoes.\r\n\r\nCompute a way to order a given set of domino stones so that they form a correct domino chain.\r\nIn the chain, the dots on one half of a stone must match the dots on the neighboring half of an adjacent stone.\r\nAdditionally, the dots on the halves of the stones without neighbors (the first and last stone) must match each other.\r\n\r\nFor example given the stones `[2|1]`, `[2|3]` and `[1|3]` you should compute something\r\nlike `[1|2] [2|3] [3|1]` or `[3|2] [2|1] [1|3]` or `[1|3] [3|2] [2|1]` etc, where the first and last numbers are the same.\r\n\r\nFor stones `[1|2]`, `[4|1]` and `[2|3]` the resulting chain is not valid: `[4|1] [1|2] [2|3]`'s first and last numbers are not the same.\r\n4 != 3\r\n\r\nSome test cases may use duplicate stones in a chain solution, assume that multiple Domino sets are being used.\r\n",
    "hints": ""
  },
  "starter_code": "package dominoes\r\n\r\n// Define the Domino type here.\r\n\r\nfunc MakeChain(input []Domino) ([]Domino, bool) {\r\n\tpanic(\"Please implement the MakeChain function\")\r\n}\r\n",
  "tests": "package dominoes\r\n\r\nimport (\r\n\t\"errors\"\r\n\t\"reflect\"\r\n\t\"sort\"\r\n\t\"testing\"\r\n)\r\n\r\nfunc TestMakeChain(t *testing.T) {\r\n\tfor _, tc := range testCases {\r\n\t\tt.Run(tc.description, func(t *testing.T) {\r\n\t\t\tc, ok := MakeChain(tc.dominoes)\r\n\t\t\tif ok != tc.valid {\r\n\t\t\t\tt.Fatalf(\"MakeChain(%v)\\nexpected 'ok' result: %t, actual 'ok': %t\", tc.dominoes, tc.valid, ok)\r\n\t\t\t}\r\n\t\t\tif ok {\r\n\t\t\t\t// There can be a variety of \"valid\" chains. Verify the chain is valid.\r\n\t\t\t\tif err := verifyChain(tc.dominoes, c); err != nil {\r\n\t\t\t\t\tt.Fatalf(\"MakeChain(%v)\\nverifying chain failed with error: %v\\nchain: %v\", tc.dominoes, err, c)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nvar (\r\n\terrWrongLengthChain          = errors.New(\"wrong length chain\")\r\n\terrChainIsNotLegalAdj        = errors.New(\"chain is not legal - adjacent mismatch\")\r\n\terrChainIsNotLegalEnd        = errors.New(\"chain is not legal - ends mismatch\")\r\n\terrChainSetNotSameAsInputSet = errors.New(\"chain dominoes not same as input\")\r\n)\r\n\r\nfunc verifyChain(input, chain []Domino) error {\r\n\tif len(input) != len(chain) {\r\n\t\treturn errWrongLengthChain\r\n\t}\r\n\r\n\tswitch len(input) {\r\n\tcase 0:\r\n\t\treturn nil\r\n\tcase 1:\r\n\t\tif input[0] != chain[0] {\r\n\t\t\treturn errChainSetNotSameAsInputSet\r\n\t\t}\r\n\t\treturn nil\r\n\t}\r\n\r\n\t// Check adjacent pairs.\r\n\tfor i := 0; i < len(chain)-1; i++ {\r\n\t\tif chain[i][1] != chain[i+1][0] {\r\n\t\t\treturn errChainIsNotLegalAdj\r\n\t\t}\r\n\t}\r\n\t// Check end dominoes.\r\n\tif chain[0][0] != chain[len(chain)-1][1] {\r\n\t\treturn errChainIsNotLegalEnd\r\n\t}\r\n\r\n\t// Make copies of input and chain.\r\n\tcinput := copyDominoes(input)\r\n\tcchain := copyDominoes(chain)\r\n\r\n\tsortDominoes(cinput)\r\n\tsortDominoes(cchain)\r\n\r\n\t// Compare for equality (same set in input and chain).\r\n\tif !reflect.DeepEqual(cinput, cchain) {\r\n\t\treturn errChainSetNotSameAsInputSet\r\n\t}\r\n\treturn nil\r\n}\r\n\r\nfunc copyDominoes(d []Domino) (c []Domino) {\r\n\tc = make([]Domino, len(d))\r\n\t// Put each domino in \"canonical position\" [a,b] where a <= b.\r\n\tfor i := range d {\r\n\t\tc[i] = d[i]\r\n\t\tif c[i][0] > c[i][1] {\r\n\t\t\tc[i][0], c[i][1] = c[i][1], c[i][0]\r\n\t\t}\r\n\t}\r\n\treturn c\r\n}\r\n\r\nfunc sortDominoes(d []Domino) {\r\n\tsort.Slice(d,\r\n\t\tfunc(i, j int) bool {\r\n\t\t\tif d[i][0] < d[j][0] {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\tif d[i][0] > d[j][0] {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn d[i][1] < d[j][1]\r\n\t\t})\r\n}\r\n\r\nfunc BenchmarkMakeChain(b *testing.B) {\r\n\tif testing.Short() {\r\n\t\tb.Skip(\"skipping benchmark in short mode.\")\r\n\t}\r\n\tfor i := 0; i < b.N; i++ {\r\n\t\tfor _, test := range testCases {\r\n\t\t\tMakeChain(test.dominoes)\r\n\t\t}\r\n\t}\r\n}\r\n"
}