{
  "language": "php",
  "slug": "windowing-system",
  "docs": {
    "introduction": "# Introduction\r\n\r\n## Classes\r\n\r\nClasses are a unit of code organization in PHP.\r\nCode represents the behavior of an item or the behavior of a process can be grouped together as a class.\r\nFunctions that are assigned to a class are called `methods` by convention.\r\n\r\n```php\r\n<?php\r\n\r\nclass Door\r\n{\r\n    function lock()\r\n    {\r\n        // ...\r\n    }\r\n\r\n    function unlock()\r\n    {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nClasses are instantiated with the `new` keyword, this allocates memory for the class instance and calls the classes constructor method.\r\nInstantiated classes may be assigned to a variable.\r\nTo invoke the methods of a class instance, we can use the `->` access operator.\r\n\r\n```php\r\n<?php\r\n\r\n$a_door = new Door();\r\n$a_door->lock();\r\n$a_door->unlock();\r\n```\r\n\r\nAn instantiated class may reference its own instance using the special `$this` variable.\r\nClasses may also have properties, these act as variables that are tied to the instance of the class object.\r\nThese properties may be referenced internally or externally.\r\n\r\n```php\r\n<?php\r\n\r\nclass Car\r\n{\r\n    public $color;\r\n\r\n    function __construct($color)\r\n    {\r\n        $this->color = $color;\r\n    }\r\n\r\n    function getColor()\r\n    {\r\n        return $this->color;\r\n    }\r\n}\r\n\r\n$a_car = new Car(\"red\");\r\n$a_car->color; // => \"red\" by accessing the property\r\n$a_car->getColor(); // => \"red\" by invoking the instance method\r\n```\r\n",
    "instructions": "# Instructions\r\n\r\nIn this exercise, you will be simulating a windowing based computer system.\r\nYou will create some windows that can be moved and resized.\r\nThe following image is representative of the values you will be working with below.\r\n\r\n```text\r\n ╔════════════════════════════════════════════════════════════╗\r\n ║                                                            ║\r\n ║        position::$y,_                                      ║\r\n ║        position::$x  \\                                     ║\r\n ║                       \\<---- size::$width ---->            ║\r\n ║                 ^      *──────────────────────┐            ║\r\n ║                 |      │        title         │            ║\r\n ║                 |      ├──────────────────────┤            ║\r\n ║                 |      │                      │            ║\r\n ║          size::$height │                      │            ║\r\n ║                 |      │       contents       │            ║\r\n ║                 |      │                      │            ║\r\n ║                 |      │                      │            ║\r\n ║                 v      └──────────────────────┘            ║\r\n ║                                                            ║\r\n ║                                                            ║\r\n ╚════════════════════════════════════════════════════════════╝\r\n```\r\n\r\n## 1. Define the properties of the Program Window\r\n\r\nUsing the provided class scaffold, provide the properties for the `y`, `x`, `height`, and `width` values.\r\n\r\n```php\r\n<?php\r\n\r\n$window = new ProgramWindow();\r\n$window->y; // => null\r\n$window->x; // => null\r\n$window->height; // => null\r\n$window->width; // => null\r\n```\r\n\r\n## 2. Define the initial values for the program window\r\n\r\nDefine a constructor function for `ProgramWindow`.\r\nIt should not take any arguments, but during the constructor execution set the default values for its properties.\r\nIt should set the initial `y` and `x` values to `0`.\r\nIt should set the initial `height` and `width` to a `600x800` screen size.\r\n\r\n```php\r\n<?php\r\n\r\n$window = new ProgramWindow();\r\n$window->y; // => 0 \r\n$window->x; // => 0\r\n$window->height; // => 600\r\n$window->width; // => 800\r\n```\r\n\r\n## 3. Define a function to resize the window\r\n\r\nDefine a new class in `Size.php` for a Size class.\r\nIt should take constructor arguments to set the `height` and `width` properties.\r\nAdditionally `ProgramWindow` requires a resize function, which receives the `Size` object instance and updates its own properties.\r\n\r\n```php\r\n<?php \r\n\r\n$window = new ProgramWindow();\r\n$size = new Size(764, 1080);\r\n$window->resize($size)\r\n\r\n$window->height;\r\n// => 764\r\n$window->width;\r\n// => 1080\r\n```\r\n\r\n## 4. Define a function to move the window\r\n\r\nDefine a new class in `Position.php` for a Position class.\r\nIt should take constructor arguments to set the `y` and `x` properties.\r\nAdditionally `ProgramWindow` requires a move function, which receives the `Position` object instance and updates its own properties.\r\n\r\n```php\r\n<?php \r\n\r\n$window = new ProgramWindow();\r\n$position = new Position(80, 313);\r\n$window->move($position)\r\n\r\n$window->y;\r\n// => 80\r\n$window->x;\r\n// => 313\r\n```\r\n",
    "hints": "# Hints\r\n\r\n## General\r\n\r\n- Revisit the [Objects Concept][concept-class-basics] if needed to fresh up on the basics.\r\n- Carefully read the instructions for the parameter positioning of `x`, `y`, `width`, and `height`. These are easily confused.\r\n\r\n## 1. Define a ProgramWindow class\r\n\r\n- Remember to use [class syntax][php-class] for this task.\r\n- Define [properties][php-properties] by adding them to the class declaration.\r\n\r\n## 2. Define a constructor function for the ProgramWindow class\r\n\r\n- Check that your constructor function does not accept any arguments.\r\n- Check that each property is being set to the expected integer value.\r\n\r\n## 3. Add a method to resize the window\r\n\r\n- Remember to use a new [class][php-class] in the `Size.php` file for this task.\r\n  - By convention, files usually only contain a single class.\r\n- The `Size` constructor should accept arguments for the class [properties'][php-properties] initial values.\r\n- Make a `resize` method of the `ProgramWindow` object to apply the change using an instance of `Size`.\r\n\r\n## 4. Add a method to move the window\r\n\r\n- Remember to use a new [class][php-class] in the `Position.php` file for this task.\r\n  - By convention, files usually only contain a single class.\r\n- The `Position` constructor should accept arguments for the class [properties'][php-properties] initial values.\r\n- Make a `move` method of the `ProgramWindow` object to apply the change using an instance of `Position`.\r\n\r\n[concept-class-basics]: /tracks/php/concepts/class-basics\r\n[php-class]: https://www.php.net/manual/en/language.oop5.basic.php\r\n[php-properties]: https://www.php.net/manual/en/language.oop5.properties.php\r\n"
  },
  "starter_code": {
    "Position.php": "<?php\r\n",
    "ProgramWindow.php": "<?php\r\n\r\nclass ProgramWindow\r\n{\r\n}\r\n",
    "Size.php": "<?php\r\n"
  },
  "tests": {
    "ProgramWindowTest.php": "<?php\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\n\r\nclass ProgramWindowTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'ProgramWindow.php';\r\n        require_once 'Size.php';\r\n        require_once 'Position.php';\r\n    }\r\n\r\n    /**\r\n     * @task_id 1\r\n     */\r\n    #[TestDox('assert ProgramWindow has a $y property')]\r\n    public function testHasPropertyY()\r\n    {\r\n        $reflector = new ReflectionClass(ProgramWindow::class);\r\n        $this->assertHasProperty($reflector, 'y', [\r\n            'has_type' => false,\r\n            'has_default' => false\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * @task_id 1\r\n     */\r\n    #[TestDox('assert ProgramWindow has a $x property')]\r\n    public function testHasPropertyX()\r\n    {\r\n        $reflector = new ReflectionClass(ProgramWindow::class);\r\n        $this->assertHasProperty($reflector, 'x', [\r\n            'has_type' => false,\r\n            'has_default' => false\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * @task_id 1\r\n     */\r\n    #[TestDox('assert ProgramWindow has a $height property')]\r\n    public function testHasPropertyHeight()\r\n    {\r\n        $reflector = new ReflectionClass(ProgramWindow::class);\r\n        $this->assertHasProperty($reflector, 'height', [\r\n            'has_type' => false,\r\n            'has_default' => false\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * @task_id 1\r\n     */\r\n    #[TestDox('assert ProgramWindow has a $width property')]\r\n    public function testHasPropertyWidth()\r\n    {\r\n        $reflector = new ReflectionClass(ProgramWindow::class);\r\n        $this->assertHasProperty($reflector, 'width', [\r\n            'has_type' => false,\r\n            'has_default' => false\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * @task_id 2\r\n     */\r\n    #[TestDox('assert ProgramWindow has a constructor initial values')]\r\n    public function testHasConstructorSettingInitialValues()\r\n    {\r\n        $window = new ProgramWindow();\r\n        $this->assertEquals(0, $window->y);\r\n        $this->assertEquals(0, $window->x);\r\n        $this->assertEquals(600, $window->height);\r\n        $this->assertEquals(800, $window->width);\r\n    }\r\n\r\n    /**\r\n     * @task_id 3\r\n     */\r\n    #[TestDox('assert Position class exists, with constructor, properties')]\r\n    public function testSizeHasConstructorSettingInitialValues()\r\n    {\r\n        $size = new Size(300, 700);\r\n        $this->assertEquals(300, $size->height);\r\n        $this->assertEquals(700, $size->width);\r\n    }\r\n\r\n    /**\r\n     * @task_id 3\r\n     */\r\n    #[TestDox('assert ProgramWindow::resize function exists')]\r\n    public function testProgramWindowResize()\r\n    {\r\n        $window = new ProgramWindow();\r\n        $size = new Size(430, 2135);\r\n        $window->resize($size);\r\n        $this->assertEquals(430, $window->height);\r\n        $this->assertEquals(2135, $window->width);\r\n    }\r\n\r\n    /**\r\n     * @task_id 4\r\n     */\r\n    #[TestDox('assert Position class exists, with constructor, properties')]\r\n    public function testPositionHasConstructorSettingInitialValues()\r\n    {\r\n        $position = new Position(30, 70);\r\n        $this->assertEquals(30, $position->y);\r\n        $this->assertEquals(70, $position->x);\r\n    }\r\n\r\n    /**\r\n     * @task_id 4\r\n     */\r\n    #[TestDox('assert ProgramWindow::move function exists')]\r\n    public function testProgramWindowMove()\r\n    {\r\n        $window = new ProgramWindow();\r\n        $position = new Position(40, 235);\r\n        $window->move($position);\r\n        $this->assertEquals(40, $window->y);\r\n        $this->assertEquals(235, $window->x);\r\n    }\r\n\r\n    private function assertHasProperty(\r\n        ReflectionClass $class,\r\n        string $name,\r\n        array $assertions = []\r\n    ) {\r\n        $assertions = array_merge([\r\n            'has_type' => false,\r\n            'has_default_value' => false\r\n        ], $assertions);\r\n\r\n        try {\r\n            $property = $class->getProperty($name);\r\n        } catch (ReflectionException) {\r\n            $this->fail(\r\n                \"Property '$name' missing from class '{$class->getName()}'\"\r\n            );\r\n        };\r\n\r\n        if ($assertions['has_type']) {\r\n            $this->assertTrue($property->hasType());\r\n        } else {\r\n            $this->assertFalse(\r\n                $property->hasType(),\r\n                \"Property '$name' should not have a type declared\"\r\n            );\r\n        }\r\n\r\n        if ($assertions['has_default_value']) {\r\n            $this->assertTrue($property->hasDefaultValue());\r\n        } else {\r\n            if ($assertions['has_type'] === false) {\r\n                $this->assertTrue($property->hasDefaultValue());\r\n                $this->assertNull($property->getDefaultValue());\r\n            } else {\r\n                $this->assertFalse(\r\n                    $property->hasDefaultValue(),\r\n                    \"Property '$name' should not have a default value declared\"\r\n                );\r\n            }\r\n        }\r\n    }\r\n}\r\n"
  }
}