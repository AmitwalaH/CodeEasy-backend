{
  "language": "php",
  "slug": "lucky-numbers",
  "docs": {
    "introduction": "# Introduction\r\n\r\n## Type Juggling\r\n\r\nType juggling may also be known as type coercion.\r\nType juggling is when two values of different types are coerced to the same type to perform an operation.\r\n\r\n```php\r\n$baskets = 5 // int\r\n$apples_per_basket = \"3\" // string\r\n$baskets * $apples_per_basket\r\n# => 15\r\n```\r\n\r\nThis can be done implicitly (see above example), or explicitly with `C`-style type casting:\r\n\r\n```php\r\n$apples_per_basket = \"3\" // string\r\n$my_number = (int) $apples_per_basket // cast string to int\r\n# => 3 // int\r\n```\r\n\r\nAllowed types for manual type casting are: `bool`, `int`, `float`, `string`, `array`, `object`.\r\nMost commonly, type casting is used to change an integer (`int`) to a float (`float`) or vice-versa.\r\n",
    "instructions": "# Instructions\r\n\r\nYour friend Kojo is a big fan of numbers.\r\nHe has a small website for playing around with numbers.\r\nKojo is not that good at programming so he asked you for help.\r\n\r\nYou will build two helper methods for new number games on Kojos' website and a third one to validate some input the user can enter.\r\n\r\n## 1. Calculate the sum for the numbers on the slot machine\r\n\r\nOne of the games on Kojos' website looks like a slot machine that shows two groups of wheels with digits on them.\r\nEach group of digits represents a number.\r\nFor the game mechanics, Kojo needs to know the sum of those two numbers.\r\n\r\nWrite a method `sumUp` that accepts two arrays as parameters.\r\nEach array consists of one or more digits between 0 and 9.\r\nThe function should interpret each array as a number and return the sum of those two numbers.\r\n\r\n```php\r\n<?php\r\n$lucky_numbers = new LuckyNumbers()\r\n\r\n$lucky_numbers->sumUp([1, 2, 3], [0, 7]);\r\n//=> 130\r\n\r\n// [1, 2, 3] represents 123 and [0, 7] represents 7.\r\n// 123 + 7 = 130\r\n```\r\n\r\n## 2. Determine if a number is a palindrome\r\n\r\nAnother game on the website is a little quiz called \"Lucky Numbers\".\r\nA user can enter a number and then sees whether the number belongs to some secret sequence or pattern.\r\nThe sequence or pattern of the \"lucky numbers\" changes each month and each user only has a limited number of tries to guess it.\r\n\r\nThis months' lucky numbers should be numbers that are palindromes.\r\nPalindromic numbers remain the same when the digits are reversed.\r\n\r\nImplement the new `isPalindrome` function that accepts an integer as a parameter.\r\nThe function should return `true` if the number is a palindrome and `false` otherwise.\r\nThe input number will always be a positive integer.\r\n\r\n```php\r\n<?php\r\n$lucky_numbers = new LuckyNumbers()\r\n\r\n$lucky_numbers->isPalindrome(1441);\r\n//=>  true\r\n\r\n$lucky_numbers->isPalindrome(123);\r\n//=> false\r\n```\r\n\r\n## 3. Generate an error message for invalid user input\r\n\r\nIn various places on the website, there are input fields where the users can enter numbers and click a button to trigger some action.\r\nKojo wants to improve the user experience of his site.\r\nHe wants to show an error message in case the user clicks the button but the field contains an invalid input value.\r\n\r\nHere is some more information on how the value of an input field is provided.\r\n\r\n- If the user types something into a field, the associated value is always a string even if the user only typed in numbers.\r\n- If the user types something but deletes it again, the variable will be an empty string.\r\n- Before the user even started typing, the variable will be an empty string.\r\n\r\nWrite a function `validate` that accepts the user input as a parameter.\r\nIf the user did not provide any input, `validate` should return `'Required field'`.\r\nIf the input does not represent a positive non-zero whole number (according to the [PHP type casting rules][php-type-cast-int]), `'Must be a whole number larger than 0'` should be returned.\r\nIn all other cases you can assume the input is valid, the return value should be an empty string then.\r\n\r\n```php\r\n<?php\r\n$lucky_numbers = new LuckyNumbers()\r\n\r\n$lucky_numbers->validate('123');\r\n// => ''\r\n\r\n$lucky_numbers->validate('');\r\n// => 'Required field'\r\n\r\n$lucky_numbers->validate('abc');\r\n// => 'Must be a whole number larger than 0'\r\n```\r\n\r\n[php-type-cast-int]: https://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting.from-string\r\n",
    "hints": "# Hints\r\n\r\n## General\r\n\r\n- Review the [Type Juggling][ref-type-juggling] reference\r\n- Review the [Integer][ref-type-cast-int] and [String][ref-type-cast-string] type casting reference\r\n- Review the [Numeric Strings][ref-numeric-strings] reference\r\n\r\n## 1. Calculate the sum for the numbers on the slot machine\r\n\r\n- You can use [`implode`][ref-implode] to combine the digits.\r\n  `implode` will implicitly coerce the digits in the array to strings and return a string.\r\n- To sum the numbers see the [arithmetic operations][ref-arithmetic-ops] concept.\r\n  Arithmetic operators will implicitly coerce strings to integers or floats.\r\n\r\n## 2. Determine if a number is a palindrome\r\n\r\n- This task can be solved by comparing the number given to its reversed version.\r\n  To do this, you first need to reverse the number given.\r\n  Then return the comparison result of both versions.\r\n- You can use [`strrev`][ref-strrev] to get the reversed number.\r\n  `strrev` will implicitly coerce the number to a string and return a string.\r\n- Finally, you can [compare][ref-comparison-ops] the number given with the reversed string.\r\n  When writing the condition for that, make use of the [comparison][ref-comparison-ops] that does type juggling.\r\n  PHP will coerce the reversed string to a number for this comparison.\r\n- The result of the comparison is a `bool`, which is the type to return.\r\n\r\n## 3. Generate an error message for invalid user input\r\n\r\n- You can use [if statements][ref-if-statement] to check for the different conditions.\r\n- First, you should cover the case that the value does not contain any characters.\r\n- Next, tackle the case that the input is not a number or `0`.\r\n  Type coercion rules of the [comparison operators][ref-comparison-ops] are against you in this case.\r\n  They make PHP compare strings in some cases and that gives wrong results.\r\n  Use the explicit casting to `int` you learned about in the introduction.\r\n  Then you can rely on the [comparison operators][ref-comparison-ops] for a number larger than `0`.\r\n\r\n[ref-type-juggling]: https://www.php.net/manual/en/language.types.type-juggling.php\r\n[ref-type-cast-int]: https://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting.from-string\r\n[ref-type-cast-string]: https://www.php.net/manual/en/language.types.string.php#language.types.string.casting\r\n[ref-numeric-strings]: https://www.php.net/manual/en/language.types.numeric-strings.php\r\n[ref-implode]: https://www.php.net/manual/en/function.implode.php\r\n[ref-arithmetic-ops]: https://www.php.net/manual/en/language.operators.arithmetic.php\r\n[ref-strrev]: https://www.php.net/manual/en/function.strrev\r\n[ref-comparison-ops]: https://www.php.net/manual/en/language.operators.comparison.php\r\n[ref-if-statement]: https://www.php.net/manual/en/control-structures.if.php\r\n"
  },
  "starter_code": {
    "LuckyNumbers.php": "<?php\r\n\r\nclass LuckyNumbers\r\n{\r\n    public function sumUp(array $digitsOfNumber1, array $digitsOfNumber2): int\r\n    {\r\n        throw new \\BadFunctionCallException(\"Implement the function\");\r\n    }\r\n\r\n    public function isPalindrome(int $number): bool\r\n    {\r\n        throw new \\BadFunctionCallException(\"Implement the function\");\r\n    }\r\n\r\n    public function validate(string $input): string\r\n    {\r\n        throw new \\BadFunctionCallException(\"Implement the function\");\r\n    }\r\n}\r\n"
  },
  "tests": {
    "LuckyNumbersTest.php": "<?php\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\DataProvider;\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\n\r\nclass LuckyNumbersTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'LuckyNumbers.php';\r\n    }\r\n\r\n    /**\r\n     * @task_id 1\r\n     */\r\n    #[DataProvider('sumUpTestCases')]\r\n    #[TestDox('Sums up $digitsOfNumber1 and $digitsOfNumber2 to $expected')]\r\n    public function testSumUp(\r\n        array $digitsOfNumber1,\r\n        array $digitsOfNumber2,\r\n        int $expected\r\n    ): void {\r\n        $class = new LuckyNumbers();\r\n\r\n        $actual = $class->sumUp($digitsOfNumber1, $digitsOfNumber2);\r\n\r\n        $this->assertSame($expected, $actual);\r\n    }\r\n\r\n    public static function sumUpTestCases()\r\n    {\r\n        return [\r\n            'both numbers same length 1' => [ [2], [7], 9 ],\r\n            'both numbers same length 2' => [ [2, 4], [5, 7], 81 ],\r\n            'both numbers same length 3' => [ [5, 3, 4], [3, 6, 2], 896 ],\r\n            'first shorter than second number' => [ [2, 4], [1, 5, 7], 181 ],\r\n            'first longer than second number' => [ [2, 2, 5], [5, 7], 282 ],\r\n            'handles overflow' => [ [9, 9, 9], [1, 0, 1], 1100 ],\r\n            'handles large numbers' => [ [9, 9, 9, 9, 9, 9], [1], 1000000 ],\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * @task_id 2\r\n     */\r\n    #[DataProvider('isPalindromeTestCases')]\r\n    #[TestDox('Detects palindromic number $number')]\r\n    public function testIsPalindrome(int $number): void\r\n    {\r\n        $class = new LuckyNumbers();\r\n\r\n        $actual = $class->isPalindrome($number);\r\n\r\n        $this->assertTrue($actual);\r\n    }\r\n\r\n    public static function isPalindromeTestCases()\r\n    {\r\n        return [\r\n            [ 0 ],\r\n            [ 6 ],\r\n            [ 33 ],\r\n            [ 15651 ],\r\n            [ 48911984 ],\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * @task_id 2\r\n     */\r\n    #[DataProvider('isNoPalindromeTestCases')]\r\n    #[TestDox('Detects non-palindromic number $number')]\r\n    public function testIsNoPalindrome(int $number): void\r\n    {\r\n        $class = new LuckyNumbers();\r\n\r\n        $actual = $class->isPalindrome($number);\r\n\r\n        $this->assertFalse($actual);\r\n    }\r\n\r\n    public static function isNoPalindromeTestCases()\r\n    {\r\n        return [\r\n            [ 12 ],\r\n            [ 156512 ],\r\n            [ 48921984 ],\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * @task_id 3\r\n     */\r\n    #[TestDox('Error message for empty input')]\r\n    public function testErrorMessageForEmptyInput(): void\r\n    {\r\n        $class = new LuckyNumbers();\r\n\r\n        $actual = $class->validate('');\r\n\r\n        $this->assertSame('Required field', $actual);\r\n    }\r\n\r\n    /**\r\n     * @task_id 3\r\n     */\r\n    #[DataProvider('invalidInputTestCases')]\r\n    #[TestDox('Error message for invalid input $input')]\r\n    public function testErrorMessageForInvalidInput(\r\n        string $input\r\n    ): void {\r\n        $class = new LuckyNumbers();\r\n\r\n        $actual = $class->validate($input);\r\n\r\n        $this->assertSame('Must be a whole number larger than 0', $actual);\r\n    }\r\n\r\n    public static function invalidInputTestCases()\r\n    {\r\n        return [\r\n            [ 'some text' ],\r\n            [ 'f861' ],\r\n            [ '-42' ],\r\n            [ '0' ],\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * @task_id 3\r\n     */\r\n    #[DataProvider('validInputTestCases')]\r\n    #[TestDox('Error message for invalid input $input')]\r\n    public function testErrorMessageForValidInput(\r\n        string $input\r\n    ): void {\r\n        $class = new LuckyNumbers();\r\n\r\n        $actual = $class->validate($input);\r\n\r\n        $this->assertSame('', $actual);\r\n    }\r\n\r\n    public static function validInputTestCases()\r\n    {\r\n        return [\r\n            [ '1' ],\r\n            [ '123456789' ],\r\n            [ '   123    ' ],\r\n            [ '5e3' ],\r\n            [ '4.2E1' ],\r\n            [ '00015-plus' ],\r\n        ];\r\n    }\r\n}\r\n"
  }
}