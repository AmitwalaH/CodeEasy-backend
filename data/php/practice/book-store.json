{
  "language": "php",
  "slug": "book-store",
  "docs": {
    "instructions": "# Instructions\r\n\r\nTo try and encourage more sales of different books from a popular 5 book series, a bookshop has decided to offer discounts on multiple book purchases.\r\n\r\nOne copy of any of the five books costs $8.\r\n\r\nIf, however, you buy two different books, you get a 5% discount on those two books.\r\n\r\nIf you buy 3 different books, you get a 10% discount.\r\n\r\nIf you buy 4 different books, you get a 20% discount.\r\n\r\nIf you buy all 5, you get a 25% discount.\r\n\r\nNote that if you buy four books, of which 3 are different titles, you get a 10% discount on the 3 that form part of a set, but the fourth book still costs $8.\r\n\r\nYour mission is to write code to calculate the price of any conceivable shopping basket (containing only books of the same series), giving as big a discount as possible.\r\n\r\nFor example, how much does this basket of books cost?\r\n\r\n- 2 copies of the first book\r\n- 2 copies of the second book\r\n- 2 copies of the third book\r\n- 1 copy of the fourth book\r\n- 1 copy of the fifth book\r\n\r\nOne way of grouping these 8 books is:\r\n\r\n- 1 group of 5 (1st, 2nd,3rd, 4th, 5th)\r\n- 1 group of 3 (1st, 2nd, 3rd)\r\n\r\nThis would give a total of:\r\n\r\n- 5 books at a 25% discount\r\n- 3 books at a 10% discount\r\n\r\nResulting in:\r\n\r\n- 5 × (100% - 25%) × $8 = 5 × $6.00 = $30.00, plus\r\n- 3 × (100% - 10%) × $8 = 3 × $7.20 = $21.60\r\n\r\nWhich equals $51.60.\r\n\r\nHowever, a different way to group these 8 books is:\r\n\r\n- 1 group of 4 books (1st, 2nd, 3rd, 4th)\r\n- 1 group of 4 books (1st, 2nd, 3rd, 5th)\r\n\r\nThis would give a total of:\r\n\r\n- 4 books at a 20% discount\r\n- 4 books at a 20% discount\r\n\r\nResulting in:\r\n\r\n- 4 × (100% - 20%) × $8 = 4 × $6.40 = $25.60, plus\r\n- 4 × (100% - 20%) × $8 = 4 × $6.40 = $25.60\r\n\r\nWhich equals $51.20.\r\n\r\nAnd $51.20 is the price with the biggest discount.\r\n",
    "instructions_append": "",
    "hints": ""
  },
  "starter_code": {
    "BookStore.php": "<?php\r\n\r\n/*\r\n * By adding type hints and enabling strict type checking, code can become\r\n * easier to read, self-documenting and reduce the number of potential bugs.\r\n * By default, type declarations are non-strict, which means they will attempt\r\n * to change the original type to match the type specified by the\r\n * type-declaration.\r\n *\r\n * In other words, if you pass a string to a function requiring a float,\r\n * it will attempt to convert the string value to a float.\r\n *\r\n * To enable strict mode, a single declare directive must be placed at the top\r\n * of the file.\r\n * This means that the strictness of typing is configured on a per-file basis.\r\n * This directive not only affects the type declarations of parameters, but also\r\n * a function's return type.\r\n *\r\n * For more info review the Concept on strict type checking in the PHP track\r\n * <link>.\r\n *\r\n * To disable strict typing, comment out the directive below.\r\n */\r\n\r\ndeclare(strict_types=1);\r\n\r\n/**\r\n * Note: we expect the total in cents (1$ = 100 cents).\r\n */\r\nfunction total(array $items): int\r\n{\r\n    throw new \\BadFunctionCallException(\"Implement the total function\");\r\n}\r\n"
  },
  "tests": {
    "BookStoreTest.php": "<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\n\r\n/**\r\n * Calculate lowest price for shopping basket only\r\n * containing books from a single series. There is no\r\n * discount advantage for having more than one copy of\r\n * any single book in a grouping.\r\n */\r\n\r\nclass BookStoreTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'BookStore.php';\r\n    }\r\n\r\n    /**\r\n     * A basket containing only a single book.\r\n     * Target grouping: [[1]]\r\n     *\r\n     * uuid 17146bd5-2e80-4557-ab4c-05632b6b0d01\r\n     */\r\n    #[TestDox('Only a single book')]\r\n    public function testSingleBook(): void\r\n    {\r\n        $basket = [1];\r\n        $this->assertEquals(800, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing only two of the same book.\r\n     * Target grouping: [[2], [2]]\r\n     *\r\n     * uuid cc2de9ac-ff2a-4efd-b7c7-bfe0f43271ce\r\n     */\r\n    #[TestDox('Two of the same book')]\r\n    public function testTwoSame(): void\r\n    {\r\n        $basket = [2, 2];\r\n        $this->assertEquals(1600, total($basket));\r\n    }\r\n\r\n    /**\r\n     * No charge to carry around an empty basket.\r\n     * Target grouping: []\r\n     *\r\n     * uuid 5a86eac0-45d2-46aa-bbf0-266b94393a1a\r\n     */\r\n    #[TestDox('Empty basket')]\r\n    public function testEmpty(): void\r\n    {\r\n        $basket = [];\r\n        $this->assertEquals(0, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing only two different books.\r\n     * Target grouping: [[1, 2]]\r\n     *\r\n     * uuid 158bd19a-3db4-4468-ae85-e0638a688990\r\n     */\r\n    #[TestDox('Two different books')]\r\n    public function testTwoDifferent(): void\r\n    {\r\n        $basket = [1, 2];\r\n        $this->assertEquals(1520, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket of three different books.\r\n     * Target grouping: [[1, 2, 3]]\r\n     *\r\n     * uuid f3833f6b-9332-4a1f-ad98-6c3f8e30e163\r\n     */\r\n    #[TestDox('Three different books')]\r\n    public function testThreeDifferent(): void\r\n    {\r\n        $basket = [1, 2, 3];\r\n        $this->assertEquals(2160, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket of four different books.\r\n     * Target grouping: [[1, 2, 3, 4]]\r\n     *\r\n     * uuid 1951a1db-2fb6-4cd1-a69a-f691b6dd30a2\r\n     */\r\n    #[TestDox('Four different books')]\r\n    public function testFourDifferent(): void\r\n    {\r\n        $basket = [1, 2, 3, 4];\r\n        $this->assertEquals(2560, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket of five different books.\r\n     * Target grouping: [[1, 2, 3, 4, 5]]\r\n     *\r\n     * uuid d70f6682-3019-4c3f-aede-83c6a8c647a3\r\n     */\r\n    #[TestDox('Five different books')]\r\n    public function testFiveDifferent(): void\r\n    {\r\n        $basket = [1, 2, 3, 4, 5];\r\n        $this->assertEquals(3000, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing eight books consisting of a\r\n     * pair each of the first three books plus one copy\r\n     * each of the last two books. Please pay careful\r\n     * attention to this particular target grouping, it\r\n     * is not intuitive, but does grant the largest\r\n     * discount.\r\n     * Target grouping: [[1, 2, 3, 4], [1, 2, 3, 5]]\r\n     *\r\n     * uuid 78cacb57-911a-45f1-be52-2a5bd428c634\r\n     */\r\n    #[TestDox('Two groups of four is cheaper than group of five plus group of three')]\r\n    public function testEight(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 3, 4, 5];\r\n        $this->assertEquals(5120, total($basket));\r\n    }\r\n\r\n    /**\r\n     * Target Grouping: [[1, 2, 4, 5], [1, 3, 4, 5]]\r\n     *\r\n     * uuid f808b5a4-e01f-4c0d-881f-f7b90d9739da\r\n     */\r\n    #[TestDox('Two groups of four is cheaper than groups of five and three')]\r\n    public function testTwoGroupsOfFourIsCheaperThanGroupsOfFiveAndThree(): void\r\n    {\r\n        $basket = [1, 1, 2, 3, 4, 4, 5, 5];\r\n        $this->assertEquals(5120, total($basket));\r\n    }\r\n\r\n    /**\r\n     * Target Grouping: [[1, 2, 3, 4], [1, 2]]\r\n     *\r\n     * uuid fe96401c-5268-4be2-9d9e-19b76478007c\r\n     */\r\n    #[TestDox('Group of four plus group of two is cheaper than two groups of three')]\r\n    public function testGroupOfFourPlusGroupOfTwoIsCheaperThanTwoGroupsOfThree(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 4];\r\n        $this->assertEquals(4080, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing nine books consisting of a\r\n     * pair each of the first four books plus one of\r\n     * the last book.\r\n     * Target grouping: [[1, 2, 3, 4, 5], [1, 2, 3, 4]],\r\n     *\r\n     * uuid 68ea9b78-10ad-420e-a766-836a501d3633\r\n     */\r\n    #[TestDox('Two each of first four books and one copy each of rest')]\r\n    public function testFourPairsPlusOne(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 3, 4, 4, 5];\r\n        $this->assertEquals(5560, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing ten books consisting of two\r\n     * copies of each book in the series.\r\n     * Target grouping: [[1, 2, 3, 4, 5], [1, 2, 3, 4, 5]]\r\n     *\r\n     * uuid c0a779d5-a40c-47ae-9828-a340e936b866\r\n     */\r\n    #[TestDox('Two copies of each boo')]\r\n    public function testFivePairs(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5];\r\n        $this->assertEquals(6000, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing eleven books consisting\r\n     * of three copies of the first book plus two each\r\n     * of the remaining four books in the series.\r\n     * Target grouping: [[1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1]]\r\n     *\r\n     * uuid 18fd86fe-08f1-4b68-969b-392b8af20513\r\n     */\r\n    #[TestDox('Three copies of first book and two each of remaining')]\r\n    public function testFivePairsPlusOne(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 1];\r\n        $this->assertEquals(6800, total($basket));\r\n    }\r\n\r\n    /**\r\n     * A basket containing twelve books consisting of\r\n     * three copies of the first two books, plus two\r\n     * each of the remaining three books in the series.\r\n     * Target grouping: [[1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2]]\r\n     *\r\n     * uuid 0b19a24d-e4cf-4ec8-9db2-8899a41af0da\r\n     */\r\n    #[TestDox('Three each of first two books and two each of remaining books')]\r\n    public function testTwelve(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 1, 2];\r\n        $this->assertEquals(7520, total($basket));\r\n    }\r\n\r\n    /**\r\n     * Target Grouping: [[1, 2, 3, 4], [1, 2, 3, 5], [1, 2, 3, 4], [1, 2, 3, 5]]\r\n     *\r\n     * uuid bb376344-4fb2-49ab-ab85-e38d8354a58d\r\n     */\r\n    #[TestDox('Four groups of four are cheaper than two groups each of five and three')]\r\n    public function testFourGroupsOfFourAreCheaperThanTwoGroupsEachOfFiveAndThree(): void\r\n    {\r\n        $basket = [1, 1, 2, 2, 3, 3, 4, 5, 1, 1, 2, 2, 3, 3, 4, 5];\r\n        $this->assertEquals(10240, total($basket));\r\n    }\r\n\r\n    /**\r\n     * Target Grouping: [[1, 2, 3, 4], [1, 2, 3, 5], [1, 2, 3, 4], [1, 2, 3, 5], [1, 2, 3], [1, 2, 3]]\r\n     *\r\n     * uuid 5260ddde-2703-4915-b45a-e54dbbac4303\r\n     */\r\n    #[TestDox('Check that groups of 4 are created properly even when there are more groups of 3 than groups of 5')]\r\n    public function testCheckThatGroupsOfFourAreCreatedProperlyEvenWhenThereAreMoreGroupsOfThreeThanGroupsOfFive(): void\r\n    {\r\n        $basket = [1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 5, 5];\r\n        $this->assertEquals(14560, total($basket));\r\n    }\r\n\r\n    /**\r\n     * Target Grouping: [[1], [1, 2, 3, 4]]\r\n     *\r\n     * uuid b0478278-c551-4747-b0fc-7e0be3158b1f\r\n     */\r\n    #[TestDox('One group of one and four is cheaper than one group of two and three')]\r\n    public function testOneGroupOfOneAndFourIsCheaperThanOneGroupOfTwoAndThree(): void\r\n    {\r\n        $basket = [1, 1, 2, 3, 4];\r\n        $this->assertEquals(3360, total($basket));\r\n    }\r\n\r\n    /**\r\n     * Target Grouping: [[5], [5, 4], [5, 4, 3, 2], [5, 4, 3, 2], [5, 4, 3, 1]]\r\n     *\r\n     * uuid cf868453-6484-4ae1-9dfc-f8ee85bbde01\r\n     */\r\n    #[TestDox('One group of one and two plus three groups of four is cheaper than one group of each size')]\r\n    public function testOneGroupOfOneAndTwoPlusThreeGroupsOfFourIsCheaperThanOneGroupOfEachSize(): void\r\n    {\r\n        $basket = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5];\r\n        $this->assertEquals(10000, total($basket));\r\n    }\r\n}\r\n"
  }
}