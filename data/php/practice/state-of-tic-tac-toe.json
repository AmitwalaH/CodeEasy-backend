{
  "language": "php",
  "slug": "state-of-tic-tac-toe",
  "docs": {
    "instructions": "# Instructions\r\n\r\nIn this exercise, you're going to implement a program that determines the state of a [tic-tac-toe][] game.\r\n(_You may also know the game as \"noughts and crosses\" or \"Xs and Os\"._)\r\n\r\nThe game is played on a 3Ã—3 grid.\r\nPlayers take turns to place `X`s and `O`s on the grid.\r\nThe game ends when one player has won by placing three of marks in a row, column, or along a diagonal of the grid, or when the entire grid is filled up.\r\n\r\nIn this exercise, we will assume that `X` starts.\r\n\r\nIt's your job to determine which state a given game is in.\r\n\r\nThere are 3 potential game states:\r\n\r\n- The game is **ongoing**.\r\n- The game ended in a **draw**.\r\n- The game ended in a **win**.\r\n\r\nIf the given board is invalid, throw an appropriate error.\r\n\r\nIf a board meets the following conditions, it is invalid:\r\n\r\n- The given board cannot be reached when turns are taken in the correct order (remember that `X` starts).\r\n- The game was played after it already ended.\r\n\r\n## Examples\r\n\r\n### Ongoing game\r\n\r\n```text\r\n   |   |\r\n X |   |\r\n___|___|___\r\n   |   |\r\n   | X | O\r\n___|___|___\r\n   |   |\r\n O | X |\r\n   |   |\r\n```\r\n\r\n### Draw\r\n\r\n```text\r\n   |   |\r\n X | O | X\r\n___|___|___\r\n   |   |\r\n X | X | O\r\n___|___|___\r\n   |   |\r\n O | X | O\r\n   |   |\r\n```\r\n\r\n### Win\r\n\r\n```text\r\n   |   |\r\n X | X | X\r\n___|___|___\r\n   |   |\r\n   | O | O\r\n___|___|___\r\n   |   |\r\n   |   |\r\n   |   |\r\n```\r\n\r\n### Invalid\r\n\r\n#### Wrong turn order\r\n\r\n```text\r\n   |   |\r\n O | O | X\r\n___|___|___\r\n   |   |\r\n   |   |\r\n___|___|___\r\n   |   |\r\n   |   |\r\n   |   |\r\n```\r\n\r\n#### Continued playing after win\r\n\r\n```text\r\n   |   |\r\n X | X | X\r\n___|___|___\r\n   |   |\r\n O | O | O\r\n___|___|___\r\n   |   |\r\n   |   |\r\n   |   |\r\n```\r\n\r\n[tic-tac-toe]: https://en.wikipedia.org/wiki/Tic-tac-toe\r\n",
    "instructions_append": "",
    "hints": ""
  },
  "starter_code": {
    "StateOfTicTacToe.php": "<?php\r\n\r\n/*\r\n * By adding type hints and enabling strict type checking, code can become\r\n * easier to read, self-documenting and reduce the number of potential bugs.\r\n * By default, type declarations are non-strict, which means they will attempt\r\n * to change the original type to match the type specified by the\r\n * type-declaration.\r\n *\r\n * In other words, if you pass a string to a function requiring a float,\r\n * it will attempt to convert the string value to a float.\r\n *\r\n * To enable strict mode, a single declare directive must be placed at the top\r\n * of the file.\r\n * This means that the strictness of typing is configured on a per-file basis.\r\n * This directive not only affects the type declarations of parameters, but also\r\n * a function's return type.\r\n *\r\n * For more info review the Concept on strict type checking in the PHP track\r\n * <link>.\r\n *\r\n * To disable strict typing, comment out the directive below.\r\n */\r\n\r\ndeclare(strict_types=1);\r\n\r\nenum State\r\n{\r\n    case Win;\r\n    case Ongoing;\r\n    case Draw;\r\n}\r\n\r\nclass StateOfTicTacToe\r\n{\r\n    public function gameState(array $board): State\r\n    {\r\n        throw new \\BadMethodCallException(sprintf('Implement the %s method', __FUNCTION__));\r\n    }\r\n}\r\n"
  },
  "tests": {
    "StateOfTicTacToeTest.php": "<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\n\r\nclass StateOfTicTacToeTest extends TestCase\r\n{\r\n    private StateOfTicTacToe $stateOfTicTacToe;\r\n\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'StateOfTicTacToe.php';\r\n    }\r\n\r\n    protected function setUp(): void\r\n    {\r\n        $this->stateOfTicTacToe = new StateOfTicTacToe();\r\n    }\r\n\r\n    /**\r\n     * uuid: fe8e9fa9-37af-4d7e-aa24-2f4b8517161a\r\n     */\r\n    public function testWonGamesFinishedGameWhereXWonViaLeftColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"XOO\",\r\n            \"X  \",\r\n            \"X  \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 96c30df5-ae23-4cf6-bf09-5ef056dddea1\r\n     */\r\n    public function testWonGameFinishedGameWhereXWonViaMiddleColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"OXO\",\r\n            \" X \",\r\n            \" X \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 0d7a4b0a-2afd-4a75-8389-5fb88ab05eda\r\n     */\r\n    public function testWonGameFinishedGameWhereXWonViaRightColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"OOX\",\r\n            \"  X\",\r\n            \"  X\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: bd1007c0-ec5d-4c60-bb9f-1a4f22177d51\r\n     */\r\n    public function testWonGamesFinishedGameWhereOWonViaLeftColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"OXX\",\r\n            \"OX \",\r\n            \"O  \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: c032f800-5735-4354-b1b9-46f14d4ee955\r\n     */\r\n    public function testWonGameFinishedGameWhereOWonViaMiddleColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"XOX\",\r\n            \" OX\",\r\n            \" O \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 662c8902-c94a-4c4c-9d9c-e8ca513db2b4\r\n     */\r\n    public function testWonGameFinishedGameWhereOWonViaRightColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"XXO\",\r\n            \" XO\",\r\n            \"  O\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 2d62121f-7e3a-44a0-9032-0d73e3494941\r\n     */\r\n    public function testWonGameFinishedWhereXWonViaTopRowVictory(): void\r\n    {\r\n        $board = [\r\n            \"XXX\",\r\n            \"XOO\",\r\n            \"O  \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 346527db-4db9-4a96-b262-d7023dc022b0\r\n     */\r\n    public function testWonGameFinishedWhereXWonViaMiddleRowVictory(): void\r\n    {\r\n        $board = [\r\n            \"O  \",\r\n            \"XXX\",\r\n            \" O \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: a013c583-75f8-4ab2-8d68-57688ff04574\r\n     */\r\n    public function testWonGameFinishedWhereXWonViaBottomRowVictory(): void\r\n    {\r\n        $board = [\r\n            \" OO\",\r\n            \"O X\",\r\n            \"XXX\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 2c08e7d7-7d00-487f-9442-e7398c8f1727\r\n     */\r\n    public function testWonGameFinishedWhereOWonViaTopRowVictory(): void\r\n    {\r\n        $board = [\r\n            \"OOO\",\r\n            \"XXO\",\r\n            \"XX \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: bb1d6c62-3e3f-4d1a-9766-f8803c8ed70f\r\n     */\r\n    public function testWonGameFinishedWhereOWonViaMiddleRowVictory(): void\r\n    {\r\n        $board = [\r\n            \"XX \",\r\n            \"OOO\",\r\n            \"X  \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 6ef641e9-12ec-44f5-a21c-660ea93907af\r\n     */\r\n    public function testWonGameFinishedWhereOWonViaBottomRowVictory(): void\r\n    {\r\n        $board = [\r\n            \"XOX\",\r\n            \" XX\",\r\n            \"OOO\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: ab145b7b-26a7-426c-ab71-bf418cd07f81\r\n     */\r\n    public function testWonGameFinishedWhereXWonViaFallingDiagonalVictory(): void\r\n    {\r\n        $board = [\r\n            \"XOO\",\r\n            \" X \",\r\n            \"  X\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 7450caab-08f5-4f03-a74b-99b98c4b7a4b\r\n     */\r\n    public function testWonGameFinishedWhereXWonViaRisingDiagonalVictory(): void\r\n    {\r\n        $board = [\r\n            \"O X\",\r\n            \"OX \",\r\n            \"X  \"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: c2a652ee-2f93-48aa-a710-a70cd2edce61\r\n     */\r\n    public function testWonGameFinishedWhereOWonViaFallingDiagonalVictory(): void\r\n    {\r\n        $board = [\r\n            \"OXX\",\r\n            \"OOX\",\r\n            \"X O\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 5b20ceea-494d-4f0c-a986-b99efc163bcf\r\n     */\r\n    public function testWonGameFinishedWhereOWonViaRisingDiagonalVictory(): void\r\n    {\r\n        $board = [\r\n            \"  O\",\r\n            \" OX\",\r\n            \"OXX\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 035a49b9-dc35-47d3-9d7c-de197161b9d4\r\n     */\r\n    public function testWonGameFinishedGameWhereXWonViaARowAndAColumnVictory(): void\r\n    {\r\n        $board = [\r\n            \"XXX\",\r\n            \"XOO\",\r\n            \"XOO\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: e5dfdeb0-d2bf-4b5a-b307-e673f69d4a53\r\n     */\r\n    public function testWonGameFinishedGameWhereXWonViaTwoDiagonalVictories(): void\r\n    {\r\n        $board = [\r\n            \"XOX\",\r\n            \"OXO\",\r\n            \"XOX\"\r\n        ];\r\n        $this->assertEquals(State::Win, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: b42ed767-194c-4364-b36e-efbfb3de8788\r\n     */\r\n    public function testDrawGame(): void\r\n    {\r\n        $board = [\r\n            \"XOX\",\r\n            \"XXO\",\r\n            \"OXO\"\r\n        ];\r\n        $this->assertEquals(State::Draw, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 227a76b2-0fef-4e16-a4bd-8f9d7e4c3b13\r\n     */\r\n    public function testAnotherDrawGame(): void\r\n    {\r\n        $board = [\r\n            \"XXO\",\r\n            \"OXX\",\r\n            \"XOO\"\r\n        ];\r\n        $this->assertEquals(State::Draw, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 4d93f15c-0c40-43d6-b966-418b040012a9\r\n     */\r\n    public function testOngoingGameOneMoveIn(): void\r\n    {\r\n        $board = [\r\n            \"   \",\r\n            \"X  \",\r\n            \"   \"\r\n        ];\r\n        $this->assertEquals(State::Ongoing, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: c407ae32-4c44-4989-b124-2890cf531f19\r\n     */\r\n    public function testOngoingGameTwoMovesIn(): void\r\n    {\r\n        $board = [\r\n            \"O  \",\r\n            \" X \",\r\n            \"   \"\r\n        ];\r\n        $this->assertEquals(State::Ongoing, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 199b7a8d-e2b6-4526-a85e-78b416e7a8a9\r\n     */\r\n    public function testOngoingGameFiveMovesIn(): void\r\n    {\r\n        $board = [\r\n            \"X  \",\r\n            \" XO\",\r\n            \"OX \"\r\n        ];\r\n        $this->assertEquals(State::Ongoing, $this->stateOfTicTacToe->gameState($board));\r\n    }\r\n\r\n    /**\r\n     * uuid: 1670145b-1e3d-4269-a7eb-53cd327b302e\r\n     */\r\n    public function testInvalidBoardsXWentTwice(): void\r\n    {\r\n        $this->expectException(RuntimeException::class);\r\n        $this->expectExceptionMessage(\"Wrong turn order: X went twice\");\r\n\r\n        $board = [\r\n            \"XX \",\r\n            \"   \",\r\n            \"   \"\r\n        ];\r\n        $this->stateOfTicTacToe->gameState($board);\r\n    }\r\n\r\n    /**\r\n     * uuid: 47c048e8-b404-4bcf-9e51-8acbb3253f3b\r\n     */\r\n    public function testInvalidBoardOStarted(): void\r\n    {\r\n        $this->expectException(RuntimeException::class);\r\n        $this->expectExceptionMessage(\"Wrong turn order: O started\");\r\n\r\n        $board = [\r\n            \"OOX\",\r\n            \"   \",\r\n            \"   \"\r\n        ];\r\n        $this->stateOfTicTacToe->gameState($board);\r\n    }\r\n\r\n    /**\r\n     * uuid: 6c1920f2-ab5c-4648-a0c9-997414dda5eb\r\n     */\r\n    public function testInvalidBoard(): void\r\n    {\r\n        $this->expectException(RuntimeException::class);\r\n        $this->expectExceptionMessage(\"Impossible board: game should have ended after the game was won\");\r\n\r\n        $board = [\r\n            \"XXX\",\r\n            \"OOO\",\r\n            \"   \"\r\n        ];\r\n        $this->stateOfTicTacToe->gameState($board);\r\n    }\r\n\r\n    /**\r\n     * uuid: 4801cda2-f5b7-4c36-8317-3cdd167ac22c\r\n     */\r\n    public function testInvalidBoardPlayersKeptPlayingAfterAWin(): void\r\n    {\r\n        $this->expectException(RuntimeException::class);\r\n        $this->expectExceptionMessage(\"Impossible board: game should have ended after the game was won\");\r\n\r\n        $board = [\r\n            \"XXX\",\r\n            \"OOO\",\r\n            \"XOX\"\r\n        ];\r\n        $this->stateOfTicTacToe->gameState($board);\r\n    }\r\n}\r\n"
  }
}