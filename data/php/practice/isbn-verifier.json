{
  "language": "php",
  "slug": "isbn-verifier",
  "docs": {
    "instructions": "# Instructions\r\n\r\nThe [ISBN-10 verification process][isbn-verification] is used to validate book identification numbers.\r\nThese normally contain dashes and look like: `3-598-21508-8`\r\n\r\n## ISBN\r\n\r\nThe ISBN-10 format is 9 digits (0 to 9) plus one check character (either a digit or an X only).\r\nIn the case the check character is an X, this represents the value '10'.\r\nThese may be communicated with or without hyphens, and can be checked for their validity by the following formula:\r\n\r\n```text\r\n(d₁ * 10 + d₂ * 9 + d₃ * 8 + d₄ * 7 + d₅ * 6 + d₆ * 5 + d₇ * 4 + d₈ * 3 + d₉ * 2 + d₁₀ * 1) mod 11 == 0\r\n```\r\n\r\nIf the result is 0, then it is a valid ISBN-10, otherwise it is invalid.\r\n\r\n## Example\r\n\r\nLet's take the ISBN-10 `3-598-21508-8`.\r\nWe plug it in to the formula, and get:\r\n\r\n```text\r\n(3 * 10 + 5 * 9 + 9 * 8 + 8 * 7 + 2 * 6 + 1 * 5 + 5 * 4 + 0 * 3 + 8 * 2 + 8 * 1) mod 11 == 0\r\n```\r\n\r\nSince the result is 0, this proves that our ISBN is valid.\r\n\r\n## Task\r\n\r\nGiven a string the program should check if the provided string is a valid ISBN-10.\r\nPutting this into place requires some thinking about preprocessing/parsing of the string prior to calculating the check digit for the ISBN.\r\n\r\nThe program should be able to verify ISBN-10 both with and without separating dashes.\r\n\r\n## Caveats\r\n\r\nConverting from strings to numbers can be tricky in certain languages.\r\nNow, it's even trickier since the check digit of an ISBN-10 may be 'X' (representing '10').\r\nFor instance `3-598-21507-X` is a valid ISBN-10.\r\n\r\n[isbn-verification]: https://en.wikipedia.org/wiki/International_Standard_Book_Number\r\n",
    "instructions_append": "",
    "hints": ""
  },
  "starter_code": {
    "IsbnVerifier.php": "<?php\r\n\r\n/*\r\n * By adding type hints and enabling strict type checking, code can become\r\n * easier to read, self-documenting and reduce the number of potential bugs.\r\n * By default, type declarations are non-strict, which means they will attempt\r\n * to change the original type to match the type specified by the\r\n * type-declaration.\r\n *\r\n * In other words, if you pass a string to a function requiring a float,\r\n * it will attempt to convert the string value to a float.\r\n *\r\n * To enable strict mode, a single declare directive must be placed at the top\r\n * of the file.\r\n * This means that the strictness of typing is configured on a per-file basis.\r\n * This directive not only affects the type declarations of parameters, but also\r\n * a function's return type.\r\n *\r\n * For more info review the Concept on strict type checking in the PHP track\r\n * <link>.\r\n *\r\n * To disable strict typing, comment out the directive below.\r\n */\r\n\r\ndeclare(strict_types=1);\r\n\r\nclass IsbnVerifier\r\n{\r\n    public function isValid(string $isbn): bool\r\n    {\r\n        throw new \\BadMethodCallException(sprintf('Implement the %s method', __FUNCTION__));\r\n    }\r\n}\r\n"
  },
  "tests": {
    "IsbnVerifierTest.php": "<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\n\r\nclass IsbnVerifierTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'IsbnVerifier.php';\r\n    }\r\n\r\n    /**\r\n     * uuid: 0caa3eac-d2e3-4c29-8df8-b188bc8c9292\r\n     */\r\n    #[TestDox('Valid ISBN')]\r\n    public function testValidIsbn(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(true, $isbnVerifier->isValid('3-598-21508-8'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 19f76b53-7c24-45f8-87b8-4604d0ccd248\r\n     */\r\n    #[TestDox('Invalid ISBN check digit')]\r\n    public function testInvalidIsbnCheckDigit(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-21508-9'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 4164bfee-fb0a-4a1c-9f70-64c6a1903dcd\r\n     */\r\n    #[TestDox('Valid ISBN with a check digit of 10')]\r\n    public function testValidIsbnWithACheckDigitOf10(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(true, $isbnVerifier->isValid('3-598-21507-X'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 3ed50db1-8982-4423-a993-93174a20825c\r\n     */\r\n    #[TestDox('Check digit is a character other than X')]\r\n    public function testCheckDigitIsACharacterOtherThanX(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-21507-A'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 9416f4a5-fe01-4b61-a07b-eb75892ef562\r\n     */\r\n    #[TestDox('Invalid check digit in ISBN is not treated as zero')]\r\n    public function testInvalidCheckDigitInIsbnIsNotTreatedAsZero(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('4-598-21507-B'));\r\n    }\r\n\r\n    /**\r\n     * uuid: c19ba0c4-014f-4dc3-a63f-ff9aefc9b5ec\r\n     */\r\n    #[TestDox('Invalid character in ISBN is not treated as zero')]\r\n    public function testInvalidCharacterInIsbnIsNotTreatedAsZero(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-P1581-X'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 28025280-2c39-4092-9719-f3234b89c627\r\n     */\r\n    #[TestDox('X is only valid as a check digit')]\r\n    public function testXIsOnlyValidAsACheckDigit(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-2X507-9'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 8005b57f-f194-44ee-88d2-a77ac4142591\r\n     */\r\n    #[TestDox('Only one check digit is allowed')]\r\n    public function testOnlyOneCheckDigitIsAllowed(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-21508-96'));\r\n    }\r\n\r\n    /**\r\n     * uuid: fdb14c99-4cf8-43c5-b06d-eb1638eff343\r\n     */\r\n    #[TestDox('X is not substituted by the value 10')]\r\n    public function testXIsNotSubstitutedByTheValue10(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-2X507-5'));\r\n    }\r\n\r\n    /**\r\n     * uuid: f6294e61-7e79-46b3-977b-f48789a4945b\r\n     */\r\n    #[TestDox('Valid ISBN without separating dashes')]\r\n    public function testValidIsbnWithoutSeparatingDashes(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(true, $isbnVerifier->isValid('3598215088'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 185ab99b-3a1b-45f3-aeec-b80d80b07f0b\r\n     */\r\n    #[TestDox('ISBN without separating dashes and X as check digit')]\r\n    public function testIsbnWithoutSeparatingDashesAndXAsCheckDigit(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(true, $isbnVerifier->isValid('359821507X'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 7725a837-ec8e-4528-a92a-d981dd8cf3e2\r\n     */\r\n    #[TestDox('ISBN without check digit and dashes')]\r\n    public function testIsbnWithoutCheckDigitAndDashes(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('359821507'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 47e4dfba-9c20-46ed-9958-4d3190630bdf\r\n     */\r\n    #[TestDox('Too long ISBN and no dashes')]\r\n    public function testTooLongIsbnAndNoDashes(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3598215078X'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 737f4e91-cbba-4175-95bf-ae630b41fb60\r\n     */\r\n    #[TestDox('Too short ISBN')]\r\n    public function testTooShortIsbn(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('00'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 5458a128-a9b6-4ff8-8afb-674e74567cef\r\n     */\r\n    #[TestDox('ISBN without check digit')]\r\n    public function testIsbnWithoutCheckDigit(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-21507'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 70b6ad83-d0a2-4ca7-a4d5-a9ab731800f7\r\n     */\r\n    #[TestDox('Check digit of X should not be used for 0')]\r\n    public function testCheckDigitOfXShouldNotBeUsedForZero(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3-598-21515-X'));\r\n    }\r\n\r\n    /**\r\n     * uuid: 94610459-55ab-4c35-9b93-ff6ea1a8e562\r\n     */\r\n    #[TestDox('Empty ISBN')]\r\n    public function testEmptyIsbn(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid(''));\r\n    }\r\n\r\n    /**\r\n     * uuid: 7bff28d4-d770-48cc-80d6-b20b3a0fb46c\r\n     */\r\n    #[TestDox('Input is 9 characters')]\r\n    public function testInputIs9Characters(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('134456729'));\r\n    }\r\n\r\n    /**\r\n     * uuid: ed6e8d1b-382c-4081-8326-8b772c581fec\r\n     */\r\n    #[TestDox('Invalid characters are not ignored after checking length')]\r\n    public function testInvalidCharactersAreNotIgnoredAfterCheckingLength(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3132P34035'));\r\n    }\r\n\r\n    /**\r\n     * uuid: daad3e58-ce00-4395-8a8e-e3eded1cdc86\r\n     */\r\n    #[TestDox('Invalid characters are not ignored before checking length')]\r\n    public function testCatchInvalidCharactersInOnOtherwiseValidIsbn(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('3598P215088'));\r\n    }\r\n\r\n    /**\r\n     * uuid: fb5e48d8-7c03-4bfb-a088-b101df16fdc3\r\n     */\r\n    #[TestDox('Input is too long but contains a valid ISBN')]\r\n    public function testInputIsTooLongButContainsAValidIsbn(): void\r\n    {\r\n        $isbnVerifier = new IsbnVerifier();\r\n        $this->assertSame(false, $isbnVerifier->isValid('98245726788'));\r\n    }\r\n}\r\n"
  }
}