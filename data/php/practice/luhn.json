{
  "language": "php",
  "slug": "luhn",
  "docs": {
    "instructions": "# Instructions\r\n\r\nDetermine whether a number is valid according to the [Luhn formula][luhn].\r\n\r\nThe number will be provided as a string.\r\n\r\n## Validating a number\r\n\r\nStrings of length 1 or less are not valid.\r\nSpaces are allowed in the input, but they should be stripped before checking.\r\nAll other non-digit characters are disallowed.\r\n\r\n## Examples\r\n\r\n### Valid credit card number\r\n\r\nThe number to be checked is `4539 3195 0343 6467`.\r\n\r\nThe first step of the Luhn algorithm is to start at the end of the number and double every second digit, beginning with the second digit from the right and moving left.\r\n\r\n```text\r\n4539 3195 0343 6467\r\n↑ ↑  ↑ ↑  ↑ ↑  ↑ ↑  (double these)\r\n```\r\n\r\nIf the result of doubling a digit is greater than 9, we subtract 9 from that result.\r\nWe end up with:\r\n\r\n```text\r\n8569 6195 0383 3437\r\n```\r\n\r\nFinally, we sum all digits.\r\nIf the sum is evenly divisible by 10, the original number is valid.\r\n\r\n```text\r\n8 + 5 + 6 + 9 + 6 + 1 + 9 + 5 + 0 + 3 + 8 + 3 + 3 + 4 + 3 + 7 = 80\r\n```\r\n\r\n80 is evenly divisible by 10, so number `4539 3195 0343 6467` is valid!\r\n\r\n### Invalid Canadian SIN\r\n\r\nThe number to be checked is `066 123 478`.\r\n\r\nWe start at the end of the number and double every second digit, beginning with the second digit from the right and moving left.\r\n\r\n```text\r\n066 123 478\r\n ↑  ↑ ↑  ↑  (double these)\r\n```\r\n\r\nIf the result of doubling a digit is greater than 9, we subtract 9 from that result.\r\nWe end up with:\r\n\r\n```text\r\n036 226 458\r\n```\r\n\r\nWe sum the digits:\r\n\r\n```text\r\n0 + 3 + 6 + 2 + 2 + 6 + 4 + 5 + 8 = 36\r\n```\r\n\r\n36 is not evenly divisible by 10, so number `066 123 478` is not valid!\r\n\r\n[luhn]: https://en.wikipedia.org/wiki/Luhn_algorithm\r\n",
    "instructions_append": "",
    "hints": ""
  },
  "starter_code": {
    "Luhn.php": "<?php\r\n\r\n/*\r\n * By adding type hints and enabling strict type checking, code can become\r\n * easier to read, self-documenting and reduce the number of potential bugs.\r\n * By default, type declarations are non-strict, which means they will attempt\r\n * to change the original type to match the type specified by the\r\n * type-declaration.\r\n *\r\n * In other words, if you pass a string to a function requiring a float,\r\n * it will attempt to convert the string value to a float.\r\n *\r\n * To enable strict mode, a single declare directive must be placed at the top\r\n * of the file.\r\n * This means that the strictness of typing is configured on a per-file basis.\r\n * This directive not only affects the type declarations of parameters, but also\r\n * a function's return type.\r\n *\r\n * For more info review the Concept on strict type checking in the PHP track\r\n * <link>.\r\n *\r\n * To disable strict typing, comment out the directive below.\r\n */\r\n\r\ndeclare(strict_types=1);\r\n\r\nfunction isValid(string $number): bool\r\n{\r\n    throw new \\BadFunctionCallException(\"Implement the isValid function\");\r\n}\r\n"
  },
  "tests": {
    "LuhnTest.php": "<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\n\r\nclass LuhnTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'Luhn.php';\r\n    }\r\n\r\n    /**\r\n     * uuid: 792a7082-feb7-48c7-b88b-bbfec160865e\r\n     */\r\n    #[TestDox('Single digit strings can not be valid')]\r\n    public function testSingleDigitStringsCanNotBeValid(): void\r\n    {\r\n        $this->assertFalse(isValid(\"1\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 698a7924-64d4-4d89-8daa-32e1aadc271e\r\n     */\r\n    #[TestDox('A single zero is invalid')]\r\n    public function testASingleZeroIsInvalid(): void\r\n    {\r\n        $this->assertFalse(isValid(\"0\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 73c2f62b-9b10-4c9f-9a04-83cee7367965\r\n     */\r\n    #[TestDox('A simple valid SIN that remains valid if reversed')]\r\n    public function testASimpleValidSINThatRemainsValidIfReversed(): void\r\n    {\r\n        $this->assertTrue(isValid(\"059\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 9369092e-b095-439f-948d-498bd076be11\r\n     */\r\n    #[TestDox('A simple valid SIN that becomes invalid if reversed')]\r\n    public function testASimpleValidSINThatBecomesInvalidIfReversed(): void\r\n    {\r\n        $this->assertTrue(isValid(\"59\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 8f9f2350-1faf-4008-ba84-85cbb93ffeca\r\n     */\r\n    #[TestDox('A valid Canadian SIN')]\r\n    public function testAValidCanadianSIN(): void\r\n    {\r\n        $this->assertTrue(isValid(\"055 444 285\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 1cdcf269-6560-44fc-91f6-5819a7548737\r\n     */\r\n    #[TestDox('Invalid Canadian SIN')]\r\n    public function testInvalidCanadianSIN(): void\r\n    {\r\n        $this->assertFalse(isValid(\"055 444 286\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 656c48c1-34e8-4e60-9a5a-aad8a367810a\r\n     */\r\n    #[TestDox('Invalid credit card')]\r\n    public function testInvalidCreditCard(): void\r\n    {\r\n        $this->assertFalse(isValid(\"8273 1232 7352 0569\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 20e67fad-2121-43ed-99a8-14b5b856adb9\r\n     */\r\n    #[TestDox('Invalid long number with an even remainder')]\r\n    public function testInvalidLongNumberWithAnEvenRemainder(): void\r\n    {\r\n        $this->assertFalse(isValid(\"1 2345 6789 1234 5678 9012\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 7e7c9fc1-d994-457c-811e-d390d52fba5e\r\n     */\r\n    #[TestDox('Invalid long number with a remainder divisible by 5')]\r\n    public function testInvalidLongNumberWithARemainderDivisibleBy5(): void\r\n    {\r\n        $this->assertFalse(isValid(\"1 2345 6789 1234 5678 9013\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: ad2a0c5f-84ed-4e5b-95da-6011d6f4f0aa\r\n     */\r\n    #[TestDox('Valid number with an even amount of digits')]\r\n    public function testValidNumberWithAnEvenAmountOfDigits(): void\r\n    {\r\n        $this->assertTrue(isValid(\"095 245 88\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: ef081c06-a41f-4761-8492-385e13c8202d\r\n     */\r\n    #[TestDox('Valid number with an odd amount of spaces')]\r\n    public function testValidNumberWithAnOddAmountOfSpaces(): void\r\n    {\r\n        $this->assertTrue(isValid(\"234 567 891 234\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: bef66f64-6100-4cbb-8f94-4c9713c5e5b2\r\n     */\r\n    #[TestDox('Valid strings with a non-digit added at the end become invalid')]\r\n    public function testValidStringsWithANonDigitAddedAtTheEndBecomeInvalid(): void\r\n    {\r\n        $this->assertFalse(isValid(\"059a\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 2177e225-9ce7-40f6-b55d-fa420e62938e\r\n     */\r\n    #[TestDox('Valid strings with punctuation included become invalid')]\r\n    public function testValidStringsWithPunctuationIncludedBecomeInvalid(): void\r\n    {\r\n        $this->assertFalse(isValid(\"055-444-285\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: ebf04f27-9698-45e1-9afe-7e0851d0fe8d\r\n     */\r\n    #[TestDox('Valid strings with symbols included become invalid')]\r\n    public function testValidStringsWithSymbolsIncludedBecomeInvalid(): void\r\n    {\r\n        $this->assertFalse(isValid(\"055# 444$ 285\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 08195c5e-ce7f-422c-a5eb-3e45fece68ba\r\n     */\r\n    #[TestDox('Single zero with space is invalid')]\r\n    public function testSingleZeroWithSpaceIsInvalid(): void\r\n    {\r\n        $this->assertFalse(isValid(\" 0\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 12e63a3c-f866-4a79-8c14-b359fc386091\r\n     */\r\n    #[TestDox('More than a single zero is valid')]\r\n    public function testMoreThanASingleZeroIsValid(): void\r\n    {\r\n        $this->assertTrue(isValid(\"0000 0\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: ab56fa80-5de8-4735-8a4a-14dae588663e\r\n     */\r\n    #[TestDox('Input digit 9 is correctly converted to output digit 9')]\r\n    public function testInputDigit9IsCorrectlyConvertedToOutputDigit9(): void\r\n    {\r\n        $this->assertTrue(isValid(\"091\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: b9887ee8-8337-46c5-bc45-3bcab51bc36f\r\n     */\r\n    #[TestDox('Very long input is valid')]\r\n    public function testVeryLongInputIsValid(): void\r\n    {\r\n        $this->assertTrue(isValid(\"9999999999 9999999999 9999999999 9999999999\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 8a7c0e24-85ea-4154-9cf1-c2db90eabc08\r\n     */\r\n    #[TestDox('valid luhn with an odd number of digits and non zero first digit')]\r\n    public function testValidLuhnWithAnOddNumberOfDigitsAndNonZeroFirstDigit(): void\r\n    {\r\n        $this->assertTrue(isValid(\"109\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 39a06a5a-5bad-4e0f-b215-b042d46209b1\r\n     */\r\n    #[TestDox(\"using ascii value for non-doubled non-digit isn't allowed\")]\r\n    public function testUsingAsciiValueForNonDoubledNonDigitIsntAllowed(): void\r\n    {\r\n        $this->assertFalse(isValid(\"055b 444 285\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: f94cf191-a62f-4868-bc72-7253114aa157\r\n     */\r\n    #[TestDox(\"using ascii value for doubled non-digit isn't allowed\")]\r\n    public function testUsingAsciiValueForDoubledNonDigitIsntAllowed(): void\r\n    {\r\n        $this->assertFalse(isValid(\":9\"));\r\n    }\r\n\r\n    /**\r\n     * uuid: 8b72ad26-c8be-49a2-b99c-bcc3bf631b33\r\n     */\r\n    #[TestDox(\"non-numeric, non-space char in the middle with a sum that's divisible by 10 isn't allowed\")]\r\n    public function testNonNumericNonSpaceCharInMiddleWithSumDivisibleBy10IsntAllowed(): void\r\n    {\r\n        $this->assertFalse(isValid(\"59%59\"));\r\n    }\r\n}\r\n"
  }
}