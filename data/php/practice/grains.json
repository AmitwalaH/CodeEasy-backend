{
  "language": "php",
  "slug": "grains",
  "docs": {
    "instructions": "# Instructions\r\n\r\nCalculate the number of grains of wheat on a chessboard.\r\n\r\nA chessboard has 64 squares.\r\nSquare 1 has one grain, square 2 has two grains, square 3 has four grains, and so on, doubling each time.\r\n\r\nWrite code that calculates:\r\n\r\n- the number of grains on a given square\r\n- the total number of grains on the chessboard\r\n",
    "instructions_append": "# Instructions append\r\n\r\n## Maximum integer value\r\n\r\nAccording to [the PHP docs][php-int] there is a maximum integer value:\r\n\r\n> The size of an `int` is platform-dependent, although a maximum value of about two billion is the usual value (that's 32 bits signed).\r\n> 64-bit platforms usually have a maximum value of about 9E18.\r\n> PHP does not support unsigned `int`s.\r\n\r\nIn other words, PHP cannot express any number `2^63` or greater as an integer.\r\nSome of the tests for this exercise require 64 bit integers (`2^64`) which is beyond the integer size limitation of PHP.\r\n\r\n[PHP automatically converts][php-int-to-float] `int`s to `float`s, when the numbers get too big:\r\n\r\n> If PHP encounters a number beyond the bounds of the `int` type, it will be interpreted as a `float` instead.\r\n> Also, an operation which results in a number beyond the bounds of the `int` type will return a `float` instead.\r\n\r\nBut the `float` type [has limited precision][php-float-precision].\r\nAnd King hates unprecision.\r\nSo King decided to expect the results of the calculations as a string which expresses the integer value, rather than expressing the answer as `int` or `float`.\r\nAnd he wants integer calculations, not just a lazy conversion at the end.\r\n\r\nCan you solve this by avoiding numbers that are larger than the language will allow directly?\r\nAnd please don't use other PHP libraries like `gmp` or `bc`, too.\r\n\r\n[php-int]: https://www.php.net/manual/en/language.types.integer.php\r\n[php-int-to-float]: https://www.php.net/manual/en/language.types.integer.php\r\n[php-float-precision]: https://php.net/manual/en/language.types.float.php",
    "hints": ""
  },
  "starter_code": {
    "Grains.php": "<?php\r\n\r\n/*\r\n * By adding type hints and enabling strict type checking, code can become\r\n * easier to read, self-documenting and reduce the number of potential bugs.\r\n * By default, type declarations are non-strict, which means they will attempt\r\n * to change the original type to match the type specified by the\r\n * type-declaration.\r\n *\r\n * In other words, if you pass a string to a function requiring a float,\r\n * it will attempt to convert the string value to a float.\r\n *\r\n * To enable strict mode, a single declare directive must be placed at the top\r\n * of the file.\r\n * This means that the strictness of typing is configured on a per-file basis.\r\n * This directive not only affects the type declarations of parameters, but also\r\n * a function's return type.\r\n *\r\n * For more info review the Concept on strict type checking in the PHP track\r\n * <link>.\r\n *\r\n * To disable strict typing, comment out the directive below.\r\n */\r\n\r\ndeclare(strict_types=1);\r\n\r\nfunction square(int $number): string\r\n{\r\n    throw new \\BadFunctionCallException(\"Implement the square function\");\r\n}\r\n\r\nfunction total(): string\r\n{\r\n    throw new \\BadFunctionCallException(\"Implement the total function\");\r\n}\r\n"
  },
  "tests": {
    "GrainsTest.php": "<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\nuse PHPUnit\\Framework\\TestCase;\r\n\r\nclass GrainsTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'Grains.php';\r\n    }\r\n\r\n    /**\r\n     * uuid: 9fbde8de-36b2-49de-baf2-cd42d6f28405\r\n     */\r\n    #[TestDox('grains on square 1')]\r\n    public function testGrainsOnSquare1(): void\r\n    {\r\n        $this->assertSame('1', square(1));\r\n    }\r\n\r\n    /**\r\n     * uuid: ee1f30c2-01d8-4298-b25d-c677331b5e6d\r\n     */\r\n    #[TestDox('grains on square 2')]\r\n    public function testGrainsOnSquare2(): void\r\n    {\r\n        $this->assertSame('2', square(2));\r\n    }\r\n\r\n     /**\r\n     * uuid: 10f45584-2fc3-4875-8ec6-666065d1163b\r\n     */\r\n    #[TestDox('grains on square 3')]\r\n    public function testGrainsOnSquare3(): void\r\n    {\r\n        $this->assertSame('4', square(3));\r\n    }\r\n\r\n    /**\r\n     * uuid: a7cbe01b-36f4-4601-b053-c5f6ae055170\r\n     */\r\n    #[TestDox('grains on square 4')]\r\n    public function testGrainsOnSquare4(): void\r\n    {\r\n        $this->assertSame('8', square(4));\r\n    }\r\n\r\n    /**\r\n     * uuid: c50acc89-8535-44e4-918f-b848ad2817d4\r\n     */\r\n    #[TestDox('grains on square 16')]\r\n    public function testGrainsOnSquare16(): void\r\n    {\r\n        $this->assertSame('32768', square(16));\r\n    }\r\n\r\n    /**\r\n     * uuid: acd81b46-c2ad-4951-b848-80d15ed5a04f\r\n     */\r\n    #[TestDox('grains on square 32')]\r\n    public function testGrainsOnSquare32(): void\r\n    {\r\n        $this->assertSame('2147483648', square(32));\r\n    }\r\n\r\n    /**\r\n     * uuid: c73b470a-5efb-4d53-9ac6-c5f6487f227b\r\n     */\r\n    #[TestDox('grains on square 64')]\r\n    public function testGrainsOnSquare64(): void\r\n    {\r\n        $this->assertSame('9223372036854775808', square(64));\r\n    }\r\n\r\n    /**\r\n     * uuid: 1d47d832-3e85-4974-9466-5bd35af484e3\r\n     */\r\n    #[TestDox('square 0 is invalid')]\r\n    public function testSquare0IsInvalid(): void\r\n    {\r\n        $this->expectException(InvalidArgumentException::class);\r\n\r\n        square(0);\r\n    }\r\n\r\n     /**\r\n     * uuid: 61974483-eeb2-465e-be54-ca5dde366453\r\n     */\r\n    #[TestDox('negative square is invalid')]\r\n    public function testRejectsNegative(): void\r\n    {\r\n        $this->expectException(InvalidArgumentException::class);\r\n\r\n        square(-1);\r\n    }\r\n\r\n     /**\r\n     * uuid: a95e4374-f32c-45a7-a10d-ffec475c012f\r\n     */\r\n    #[TestDox('square greater than 64 is invalid')]\r\n    public function testRejectsGreaterThan64(): void\r\n    {\r\n        $this->expectException(InvalidArgumentException::class);\r\n\r\n        square(65);\r\n    }\r\n\r\n    /**\r\n     * uuid: 6eb07385-3659-4b45-a6be-9dc474222750\r\n     */\r\n    #[TestDox('returns the total number of grains on the board')]\r\n    public function testTotal(): void\r\n    {\r\n        $this->assertSame('18446744073709551615', total());\r\n    }\r\n}\r\n"
  }
}