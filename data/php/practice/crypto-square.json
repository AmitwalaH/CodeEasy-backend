{
  "language": "php",
  "slug": "crypto-square",
  "docs": {
    "instructions": "# Instructions\r\n\r\nImplement the classic method for composing secret messages called a square code.\r\n\r\nGiven an English text, output the encoded version of that text.\r\n\r\nFirst, the input is normalized: the spaces and punctuation are removed from the English text and the message is down-cased.\r\n\r\nThen, the normalized characters are broken into rows.\r\nThese rows can be regarded as forming a rectangle when printed with intervening newlines.\r\n\r\nFor example, the sentence\r\n\r\n```text\r\n\"If man was meant to stay on the ground, god would have given us roots.\"\r\n```\r\n\r\nis normalized to:\r\n\r\n```text\r\n\"ifmanwasmeanttostayonthegroundgodwouldhavegivenusroots\"\r\n```\r\n\r\nThe plaintext should be organized into a rectangle as square as possible.\r\nThe size of the rectangle should be decided by the length of the message.\r\n\r\nIf `c` is the number of columns and `r` is the number of rows, then for the rectangle `r` x `c` find the smallest possible integer `c` such that:\r\n\r\n- `r * c >= length of message`,\r\n- and `c >= r`,\r\n- and `c - r <= 1`.\r\n\r\nOur normalized text is 54 characters long, dictating a rectangle with `c = 8` and `r = 7`:\r\n\r\n```text\r\n\"ifmanwas\"\r\n\"meanttos\"\r\n\"tayonthe\"\r\n\"groundgo\"\r\n\"dwouldha\"\r\n\"vegivenu\"\r\n\"sroots  \"\r\n```\r\n\r\nThe coded message is obtained by reading down the columns going left to right.\r\n\r\nThe message above is coded as:\r\n\r\n```text\r\n\"imtgdvsfearwermayoogoanouuiontnnlvtwttddesaohghnsseoau\"\r\n```\r\n\r\nOutput the encoded text in chunks that fill perfect rectangles `(r X c)`, with `c` chunks of `r` length, separated by spaces.\r\nFor phrases that are `n` characters short of the perfect rectangle, pad each of the last `n` chunks with a single trailing space.\r\n\r\n```text\r\n\"imtgdvs fearwer mayoogo anouuio ntnnlvt wttddes aohghn  sseoau \"\r\n```\r\n\r\nNotice that were we to stack these, we could visually decode the ciphertext back in to the original message:\r\n\r\n```text\r\n\"imtgdvs\"\r\n\"fearwer\"\r\n\"mayoogo\"\r\n\"anouuio\"\r\n\"ntnnlvt\"\r\n\"wttddes\"\r\n\"aohghn \"\r\n\"sseoau \"\r\n```\r\n",
    "instructions_append": "",
    "hints": ""
  },
  "starter_code": {
    "CryptoSquare.php": "<?php\r\n\r\n/*\r\n * By adding type hints and enabling strict type checking, code can become\r\n * easier to read, self-documenting and reduce the number of potential bugs.\r\n * By default, type declarations are non-strict, which means they will attempt\r\n * to change the original type to match the type specified by the\r\n * type-declaration.\r\n *\r\n * In other words, if you pass a string to a function requiring a float,\r\n * it will attempt to convert the string value to a float.\r\n *\r\n * To enable strict mode, a single declare directive must be placed at the top\r\n * of the file.\r\n * This means that the strictness of typing is configured on a per-file basis.\r\n * This directive not only affects the type declarations of parameters, but also\r\n * a function's return type.\r\n *\r\n * For more info review the Concept on strict type checking in the PHP track\r\n * <link>.\r\n *\r\n * To disable strict typing, comment out the directive below.\r\n */\r\n\r\ndeclare(strict_types=1);\r\n\r\nfunction crypto_square(string $plaintext): string\r\n{\r\n    throw new \\BadFunctionCallException(\"Implement the crypto_square function\");\r\n}\r\n"
  },
  "tests": {
    "CryptoSquareTest.php": "<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\TestDox;\r\n\r\nclass CryptoSquareTest extends TestCase\r\n{\r\n    public static function setUpBeforeClass(): void\r\n    {\r\n        require_once 'CryptoSquare.php';\r\n    }\r\n\r\n    /**\r\n     * uuid 407c3837-9aa7-4111-ab63-ec54b58e8e9f\r\n     */\r\n    #[TestDox('empty plaintext results in an empty ciphertext')]\r\n    public function testEmptyPlaintextResultsInAnEmptyCiphertext(): void\r\n    {\r\n        $this->assertEquals(\"\", crypto_square(\"\"));\r\n    }\r\n\r\n    /**\r\n     * uuid aad04a25-b8bb-4304-888b-581bea8e0040\r\n     */\r\n    #[TestDox('normalization results in empty plaintext')]\r\n    public function testNormalizationResultsInEmptyPlaintext(): void\r\n    {\r\n        $this->assertEquals(\"\", crypto_square(\"... --- ...\"));\r\n    }\r\n\r\n    /**\r\n     * uuid 64131d65-6fd9-4f58-bdd8-4a2370fb481d\r\n     */\r\n    #[TestDox('Lowercase')]\r\n    public function testLowercase(): void\r\n    {\r\n        $this->assertEquals(\"a\", crypto_square(\"A\"));\r\n    }\r\n\r\n    /**\r\n     * uuid 63a4b0ed-1e3c-41ea-a999-f6f26ba447d6\r\n     */\r\n    #[TestDox('Remove spaces')]\r\n    public function testRemoveSpaces(): void\r\n    {\r\n        $this->assertEquals(\"b\", crypto_square(\"  b \"));\r\n    }\r\n\r\n    /**\r\n     * uuid 1b5348a1-7893-44c1-8197-42d48d18756c\r\n     */\r\n    #[TestDox('Remove punctuation')]\r\n    public function testRemovePunctuation(): void\r\n    {\r\n        $this->assertEquals(\"1\", crypto_square(\"@1,%!\"));\r\n    }\r\n\r\n    /**\r\n     * uuid 8574a1d3-4a08-4cec-a7c7-de93a164f41a\r\n     */\r\n    #[TestDox('9 character plaintext results in 3 chunks of 3 characters')]\r\n    public function test9CharacterPlaintextResultsIn3ChunksOf3Characters(): void\r\n    {\r\n        $this->assertEquals(\"tsf hiu isn\", crypto_square(\"This is fun!\"));\r\n    }\r\n\r\n    /**\r\n     * uuid a65d3fa1-9e09-43f9-bcec-7a672aec3eae\r\n     */\r\n    #[TestDox('8 character plaintext results in 3 chunks, the last one with a trailing space')]\r\n    public function test8CharacterPlaintextResultsIn3ChunksTheLastOneWithATrailingSpace(): void\r\n    {\r\n        $this->assertEquals(\"clu hlt io \", crypto_square(\"Chill out.\"));\r\n    }\r\n\r\n    /**\r\n     * uuid 33fd914e-fa44-445b-8f38-ff8fbc9fe6e6\r\n     */\r\n    #[TestDox('54 character plaintext results in 8 chunks, the last two with trailing spaces')]\r\n    public function test54CharacterPlaintextResultsIn7ChunksTheLastTwoWithTrailingSpaces(): void\r\n    {\r\n        $this->assertEquals(\r\n            \"imtgdvs fearwer mayoogo anouuio ntnnlvt wttddes aohghn  sseoau \",\r\n            crypto_square(\"If man was meant to stay on the ground, god would have given us roots.\")\r\n        );\r\n    }\r\n}\r\n"
  }
}