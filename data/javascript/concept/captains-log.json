{
  "language": "javascript",
  "slug": "captains-log",
  "title": "Captains Log",
  "docs": {
    "introduction": "# Introduction\n\nMany programs need (pseudo-)random values to simulate real-world events.\n\nCommon, familiar examples include:\n\n- A coin toss: a random value from ('H', 'T').\n- The roll of a die: a random integer from 1 to 6.\n- Shuffling a deck of cards: a random ordering of a card list.\n- The creation of trees and bushes in a 3-D graphics simulation.\n\nGenerating truly random values with a computer is a [surprisingly difficult technical challenge][why-randomness-is-hard], which is why there are also \"pseudorandom\" generators.\n\n<!-- prettier-ignore -->\n~~~exercism/caution\nThe `Math.random()` function should NOT be used for security and cryptographic applications!\nFinish the learning exercise(s) about this concept to learn more\n~~~\n\n## Generating random numbers\n\nIn Javascript, you can generate pseudorandom numbers using the [`Math.random()`][Math.random] function.\nIt will return a pseudorandom floating-point number between 0 (inclusive), and 1 (exclusive).\n\n[why-randomness-is-hard]: https://www.malwarebytes.com/blog/news/2013/09/in-computers-are-random-numbers-really-random\n[Math.random]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n",
    "instructions": "# Instructions\n\nMary is a big fan of the TV series Star Trek: The Next Generation.\nShe often plays pen-and-paper role playing games, where she and her friends pretend to be the crew of the Starship Enterprise.\nMary's character is Captain Picard, which means she has to keep the captain's log.\nShe loves the creative part of the game, but doesn't like to generate random data on the spot.\n\nHelp Mary by creating random generators for data commonly appearing in the captain's log.\n\n## 1. Generate a random starship registry number\n\nEnterprise (registry number NCC-1701) is not the only starship flying around!\nWhen it meets another starship, Mary needs to log the registry number of that starship.\n\nRegistry numbers start with the prefix \"NCC-\" and then use a number from 1000 to 9999 (both inclusive).\n\nImplement the `randomShipRegistryNumber()` function that returns a random starship registry number.\n\n```javascript\nrandomShipRegistryNumber();\n// => \"NCC-1947\"\n```\n\n## 2. Generate a random stardate\n\nWhat's the use of a log if it doesn't include dates?\n\nA stardate is a floating point number.\nThe adventures of the Starship Enterprise from the first season of The Next Generation take place between the stardates 41000.0 and 42000.0.\nThe \"4\" stands for the 24th century, the \"1\" for the first season.\n\nImplement the function `randomStardate` that returns a floating point number between 41000.0 (inclusive) and 42000.0 (exclusive).\n\n```javascript\nrandomStardate();\n// => 41458.15721310934\n```\n\n## 3. Generate a random planet\n\nThe Starship Enterprise encounters many planets in its travels.\nPlanets in the Star Trek universe are split into categories based on their properties.\nFor example, Earth is a class M planet.\nAll possible planetary classes are: D, H, J, K, L, M, N, R, T, and Y.\n\nImplement the `randomPlanetClass()` function.\nIt should return one of the planetary classes at random.\n\n```javascript\nrandomPlanetClass();\n// => \"K\"\n```\n",
    "hints": "# Hints\n\n## 1. Generate a random starship registry number\n\n- To generate a random number in the range _min_ (inclusive) to _max_ (exclusive) you can use the snippet `min + Math.random()*(max - min)`.\n- There is a [built in function][floor] for turning a floating point number into an integer.\n\n## 2.Generate a random stardate\n\n- To generate a random number in the range _min_ (inclusive) to _max_ (exclusive) you can use the snippet `min + Math.random()*(max - min)`.\n\n## 3. Generate a random planet\n\n- You can use a randomly generated integer as an array index.\n\n[floor]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor\n"
  },
  "starter_code": "// @ts-check\n\n/**\n * Generates a random starship registry number.\n *\n * @returns {string} the generated registry number.\n */\nexport function randomShipRegistryNumber() {\n  return `NCC-${Math.floor(1000 + Math.random() * 9000)}`;\n}\n\n/**\n * Generates a random stardate.\n *\n * @returns {number} a stardate between 41000 (inclusive) and 42000 (exclusive).\n */\nexport function randomStardate() {\n  return 41000 + Math.random() * 1000;\n}\n\nconst PLANET_CLASSES = 'DHJKLMNRTY';\n\n/**\n * Generates a random planet class.\n *\n * @returns {string} a one-letter planet class.\n */\nexport function randomPlanetClass() {\n  return PLANET_CLASSES[Math.floor(Math.random() * PLANET_CLASSES.length)];\n}\n",
  "tests": "import { describe, expect, test } from '@jest/globals';\nimport {\n  randomShipRegistryNumber,\n  randomStardate,\n  randomPlanetClass,\n} from './captains-log';\n\ndescribe('randomShipRegistryNumber', () => {\n  test('registry numbers are valid', () => {\n    for (let i = 0; i < 4; i++) {\n      expect(randomShipRegistryNumber()).toMatch(/NCC-[1-9][0-9]{3}/);\n    }\n  });\n\n  test('returns a random registry number', () => {\n    expect(randomShipRegistryNumber()).not.toEqual(randomShipRegistryNumber());\n  });\n});\n\nfunction loadDie(...values) {\n  const originalRandom = Math.random;\n\n  Math.random = function loadedDie() {\n    if (values.length === 0) {\n      return originalRandom();\n    }\n    return values.shift();\n  };\n\n  return () => {\n    Math.random = originalRandom;\n  };\n}\n\ndescribe('randomStardate', () => {\n  test('stardate is between 41000 and 42000', () => {\n    const min = 0;\n    const max = 1 - Number.EPSILON * 32;\n\n    // prettier-ignore\n    const restore = loadDie(\n      min, min, min, min, min, min,\n      max, max, max, max, max, max,\n      0.5, 0.5, 0.5, 0.5, 0.5, 0.5\n    );\n\n    for (let i = 0; i < 10_000; i++) {\n      const starDate = randomStardate();\n      expect(starDate).toBeGreaterThanOrEqual(41_000);\n      expect(starDate).toBeLessThan(42_000);\n    }\n\n    restore();\n  });\n});\n\ndescribe('randomPlanetClass', () => {\n  test('planet classes are valid', () => {\n    const expected = 'DHJKLMNRTY';\n    for (let i = 0; i < 1_000; i++) {\n      const actual = randomPlanetClass();\n      expect(expected).toContain(actual);\n    }\n  });\n\n  test('all planet classes can be returned', () => {\n    const expected = 'DHJKLMNRTY';\n    const seen = {};\n\n    for (let i = 0; i < 1_000; i++) {\n      const actual = randomPlanetClass();\n      seen[actual] = true;\n    }\n\n    expect(Object.keys(seen).length).toBe(expected.length);\n  });\n});\n"
}