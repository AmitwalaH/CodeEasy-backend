{
  "language": "javascript",
  "slug": "amusement-park",
  "title": "Amusement Park",
  "docs": {
    "introduction": "# Introduction\n\nIn contrast to many other languages, there are two different entities in JavaScript that represent the absence of a (meaningful) value.\nThere is `null` and `undefined`.\n\n## Null\n\nThe primitive value `null` is used as an intentional \"empty value\" for variables of any type.\n\n```javascript\nlet name = null;\n// name is intentionally set to \"empty\" because it is not\n// available\n```\n\nYou can check whether a variable is null by using the [strict equality operator][mdn-strict-equality] `===`.\n\n```javascript\nlet name = null;\n\nname === null;\n// => true\n```\n\n## Undefined\n\n> A variable that has not been assigned a value is of type `undefined`.<sup>1</sup>\n\nThat means while `null` represents an empty value (but still a value), `undefined` represents the total absence of a value. 游뱚\n\n`undefined` appears in different contexts.\n\n- If a variable is declared without a value (initialization), it is `undefined`.\n- If you try to access a value for a non-existing key in an object, you get `undefined`.\n- If a function does not return a value, the result is `undefined`.\n- If an argument is not passed to a function, it is `undefined`, unless that argument has a default value.\n\n```javascript\nlet name;\nconsole.log(name);\n// => undefined\n```\n\nYou can check whether a variable is undefined using the strict equality operator `===`.\n\n```javascript\nlet name;\n\nname === undefined;\n// => true\n```\n\n## Optional Chaining\n\nIf you try to retrieve a nested value in an object but the parent key does not exist, JavaScript will throw an error.\nTo easily avoid this, optional chaining was added to the language specification in 2020.\nWith the optional chaining operator `?.` you can ensure that JavaScript only tries to access the nested key if the parent was not `null` or `undefined`.\nOtherwise, `undefined` is returned.\n\n```javascript\nconst obj = {\n  address: {\n    street: 'Trincomalee Highway',\n    city: 'Batticaloa',\n  },\n};\n\nobj.address.zipCode;\n// => undefined\n\nobj.residence.street;\n// => TypeError: Cannot read property 'street' of undefined\n\nobj.residence?.street;\n// => undefined\n```\n\n## Nullish Coalescing\n\nThere are situations where you want to apply a default value in case a variable is null or undefined (but only then).\nTo address this, the nullish coalescing operator `??` was introduced in 2020.\nIt returns the right-hand side operand only when the left-hand side operand is `null` or `undefined`.\nOtherwise, the left-hand side operand is returned.\n\n```javascript\nlet amount = null;\namount = amount ?? 1;\n// => 1\n\namount = 0;\namount = amount ?? 1;\n// => 0\n```\n\n---\n\n[1] Undefined, MDN. (2021). https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined (accessed June 4, 2021).\n\n[mdn-strict-equality]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality\n",
    "instructions": "# Instructions\n\nIt is your job to provide and maintain parts of the IT system of an amusement park.\nIn particular, you are responsible for the program that manages visitors and tickets.\n\nFirst, you will create a new visitor in the system.\nThen you will provide a function for revoking a ticket.\nIn tasks 3 and 4, you will work on the ticket tracking system that helps to prevent forgery.\nLastly, you will help adapt the system to new legal requirements.\n\n## 1. Create a new visitor\n\nWhen visitors come to the amusement park for the first time, they need to register by entering their name and age in a terminal and agreeing to the terms and conditions.\nOf course, they also need to buy a ticket.\nEach ticket has an identifier like `H32AZ123`.\n\nWrite a function `createVisitor` that accepts three arguments.\n\n- The name of the visitor.\n- The age of the visitor.\n- The identifier of the ticket that the visitor bought.\n\nThe function should return an object that holds this information.\nThe keys in the object should be called `name`, `age` and `ticketId`.\n\n```javascript\ncreateVisitor('Verena Nardi', 45, 'H32AZ123');\n// => { name: 'Verena Nardi', age: 45, ticketId: 'H32AZ123' }\n```\n\n## 2. Revoke the ticket\n\nWhen people leave the amusement park, their ticket gets revoked.\nIf they come back, they need to buy a new one.\nTo save regular visitors some time, they only need to register once and the visitor information will be kept for subsequent visits.\n\nThat means when a visitor leaves the park, only their ticket should be invalidated but the rest of the visitor object should stay the same.\nImplement the function `revokeTicket` that accepts a visitor object, sets the ticket identifier to `null` and returns the object afterwards.\n\n```javascript\nconst visitor = {\n  name: 'Verena Nardi',\n  age: 45,\n  ticketId: 'H32AZ123',\n};\n\nrevokeTicket(visitor);\n// => { name: 'Verena Nardi', age: 45, ticketId: null }\n```\n\n## 3. Determine the ticket status\n\nTo prevent forgery, the ticket identifiers are unique.\nOnce a ticket is printed, its identifier is added as a key in an object in the system so it can be tracked.\n\nBefore the ticket is sold to a visitor, it is stored with the value `null` in the ticket tracking object.\nWhen it is sold to a visitor, the visitor's name is assigned as a value.\nWhen employees have doubts about the validity of a ticket, they need to check the status of the ticket in the system.\n\nImplement a function `ticketStatus` that accepts the tracking object and a ticket identifier as arguments.\nIt should return one of the following results.\n\n- `'unknown ticket id'` if the identifier was not found in the tracking object\n- `'not sold'` in case the ticket was printed but not sold\n- `'sold to {name}'` where `{name}` is the name of the visitor if the ticket was sold\n\n```javascript\nconst tickets = {\n  '0H2AZ123': null,\n  '23LA9T41': 'Verena Nardi',\n};\n\nticketStatus(tickets, 'RE90VAW7');\n// => 'unknown ticket id'\n\nticketStatus(tickets, '0H2AZ123');\n// => 'not sold'\n\nticketStatus(tickets, '23LA9T41');\n// => 'sold to Verena Nardi'\n```\n\n## 4. Improve the ticket status response\n\nAfter a while, you get feedback from the employees that they want the ticket status to be easier to understand at the first glance.\nThey only want to see either the name of the visitor or that the ticket is invalid.\n\nWrite a function `simpleTicketStatus` that accepts the same arguments as `ticketStatus` in task 3.\nThis function only returns one of two different results.\n\n- the name of the visitor if the ticket was sold\n- `'invalid ticket !!!'` if the ticket was not sold yet or the identifier was not found in the tracking object\n\n```javascript\nconst tickets = {\n  '0H2AZ123': null,\n  '23LA9T41': 'Verena Nardi',\n};\n\nsimpleTicketStatus(tickets, '23LA9T41');\n// => 'Verena Nardi'\n\nsimpleTicketStatus(tickets, '0H2AZ123');\n// => 'invalid ticket !!!'\n\nsimpleTicketStatus(tickets, 'RE90VAW7');\n// => 'invalid ticket !!!'\n```\n\n## 5. Determine the version of terms and conditions\n\nDue to new legal requirements, newly created visitor objects now also contain detailed information on the \"General Terms & Conditions\" (GTC) that the user agreed to.\nYou can see an example of the new visitor object below.\n\nThe cashiers of the amusement park now need to check whether a visitor needs to sign a new version of the GTC.\nFor this, implement a function `gtcVersion` that accepts a visitor object as an argument and returns the GTC version if it is available.\nIf the version information is not available, nothing should be returned.\n\n```javascript\nconst visitorNew = {\n  name: 'Verena Nardi',\n  age: 45,\n  ticketId: 'H32AZ123',\n  gtc: {\n    signed: true,\n    version: '2.1',\n  },\n};\n\ngtcVersion(visitorNew);\n// => '2.1'\n\nconst visitorOld = {\n  name: 'Verena Nardi',\n  age: 45,\n  ticketId: 'H32AZ123',\n};\n\ngtcVersion(visitorOld);\n// => undefined\n```\n",
    "hints": "# Hints\n\n## 1. Create a new visitor\n\n- Revisit the [concept \"Objects\"][concept-objects] to find out how to create an object with certain keys and values.\n\n## 2. Revoke the ticket\n\n- Use the assignment operator `=` to set the `ticketId` property of the visitor object to `null`.\n- Return the visitor object afterwards.\n\n## 3. Determine the ticket status\n\n- Revisit the [concept \"Conditionals\"][concept-conditionals] to find out how conditionally return different values from the function.\n- Use the bracket notation to access the value of the given `ticketId` in the object.\n- Use the strict equality operator `===` to check for `null` or `undefined`.\n\n## 4. Improve the ticket status response\n\n- Retrieve the value for a given `ticketId` with bracket notation like in the previous task.\n- No if-statement is needed to solve this task.\n- Use the [nullish coalescing operator][mdn-nullish-coalescing] `??` instead.\n\n## 5. Determine the version of terms and conditions\n\n- Revisit the [concept \"Objects\"][concept-objects] for how to access nested values and start with writing down the expression for retrieving the version.\n- Then use the [optional chaining][mdn-optional-chaining] operator to handle the case of the missing gtc object.\n- No if-statement is needed to solve this task.\n\n[concept-objects]: /tracks/javascript/concepts/objects\n[concept-conditionals]: /tracks/javascript/concepts/conditionals\n[mdn-strict-equality]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality\n[mdn-nullish-coalescing]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator\n[mdn-optional-chaining]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining\n"
  },
  "starter_code": "/// <reference path=\"../global.d.ts\" />\n// @ts-check\n\n/**\n * Creates a new visitor.\n *\n * @param {string} name\n * @param {number} age\n * @param {string} ticketId\n * @returns {Visitor} the visitor that was created\n */\nexport function createVisitor(name, age, ticketId) {\n  return { name, age, ticketId };\n}\n\n/**\n * Revokes a ticket for a visitor.\n *\n * @param {Visitor} visitor the visitor with an active ticket\n * @returns {Visitor} the visitor without a ticket\n */\nexport function revokeTicket(visitor) {\n  visitor.ticketId = null;\n  return visitor;\n}\n\n/**\n * Determines the status a ticket has in the ticket tracking object.\n *\n * @param {Record<string, string|null>} tickets\n * @param {string} ticketId\n * @returns {string} ticket status\n */\nexport function ticketStatus(tickets, ticketId) {\n  if (tickets[ticketId] === undefined) {\n    return 'unknown ticket id';\n  }\n\n  if (tickets[ticketId] === null) {\n    return 'not sold';\n  }\n\n  return 'sold to ' + tickets[ticketId];\n}\n\n/**\n * Determines the status a ticket has in the ticket tracking object\n * and returns a simplified status message.\n *\n * @param {Record<string, string|null>} tickets\n * @param {string} ticketId\n * @returns {string} ticket status\n */\nexport function simpleTicketStatus(tickets, ticketId) {\n  return tickets[ticketId] ?? 'invalid ticket !!!';\n}\n\n/**\n * Determines the version of the GTC that was signed by the visitor.\n *\n * @param {VisitorWithGtc} visitor\n * @returns {string | undefined} version\n */\nexport function gtcVersion(visitor) {\n  return visitor.gtc?.version;\n}\n",
  "tests": "import { describe, expect, test } from '@jest/globals';\nimport {\n  createVisitor,\n  gtcVersion,\n  revokeTicket,\n  simpleTicketStatus,\n  ticketStatus,\n} from './amusement-park';\n\ndescribe('createVisitor', () => {\n  test('correctly assembles the visitor object', () => {\n    const expected1 = { name: 'Imran Kudrna', age: 21, ticketId: 'ECMZR67C' };\n    const expected2 = { name: 'N캐lani Sansone', age: 76, ticketId: 'YX52GB06' };\n    const expected3 = { name: 'Bogi켹a Kal코', age: 55, ticketId: '30Z2OKJP' };\n\n    expect(createVisitor('Imran Kudrna', 21, 'ECMZR67C')).toEqual(expected1);\n    expect(createVisitor('N캐lani Sansone', 76, 'YX52GB06')).toEqual(expected2);\n    expect(createVisitor('Bogi켹a Kal코', 55, '30Z2OKJP')).toEqual(expected3);\n  });\n});\n\ndescribe('revokeTicket', () => {\n  test('sets the ticketId to null', () => {\n    const visitor = { name: 'Mar칤a Pilar Neri', age: 16, ticketId: 'MFBSF3S2' };\n\n    const expected = { name: 'Mar칤a Pilar Neri', age: 16, ticketId: null };\n    expect(revokeTicket(visitor)).toEqual(expected);\n  });\n\n  test('returns the same object that was passed in', () => {\n    const visitor = { name: 'Anatoli Traverse', age: 34, ticketId: 'AA5AA01D' };\n\n    // This checks that the same object that was passed in is returned.\n    // https://jestjs.io/docs/expect#tobevalue\n    expect(Object.is(revokeTicket(visitor), visitor)).toBe(true);\n  });\n\n  test('does nothing if the ticket was already revoked', () => {\n    const visitor = { name: 'Min-Ji Chu', age: 51, ticketId: null };\n    const actual = revokeTicket(visitor);\n\n    expect(actual).toEqual(visitor);\n    // This checks that the same object that was passed in is returned.\n    expect(Object.is(actual, visitor)).toBe(true);\n  });\n});\n\ndescribe('ticketStatus', () => {\n  test('correctly identifies that a ticket is not in the tracking object', () => {\n    expect(ticketStatus(testTickets(), 'Y4KXZOYM')).toBe('unknown ticket id');\n    expect(ticketStatus(testTickets(), '8ATQC1ZJ')).toBe('unknown ticket id');\n    expect(ticketStatus(testTickets(), 'G833HR8A')).toBe('unknown ticket id');\n  });\n\n  test('correctly identifies that a ticket is not sold', () => {\n    expect(ticketStatus(testTickets(), 'V42NWRMQ')).toBe('not sold');\n    expect(ticketStatus(testTickets(), 'A56MTX8E')).toBe('not sold');\n    expect(ticketStatus(testTickets(), 'YEVHK4MC')).toBe('not sold');\n  });\n\n  test('returns the correct string for a ticket that was sold', () => {\n    const actual1 = ticketStatus(testTickets(), 'QINS6S94');\n    expect(actual1).toBe('sold to Hong Hsu');\n\n    const actual2 = ticketStatus(testTickets(), 'H31SAW5Q');\n    expect(actual2).toBe('sold to Lior MacNeil');\n\n    const actual3 = ticketStatus(testTickets(), 'M9ZTXP89');\n    expect(actual3).toBe('sold to Kamani Ybarra');\n  });\n});\n\ndescribe('simpleTicketStatus', () => {\n  test('identifies ticket that are not in the tracking object as invalid', () => {\n    const expected = 'invalid ticket !!!';\n    expect(simpleTicketStatus(testTickets(), 'Y4KXZOYM')).toBe(expected);\n    expect(simpleTicketStatus(testTickets(), '8ATQC1ZJ')).toBe(expected);\n    expect(simpleTicketStatus(testTickets(), 'G833HR8A')).toBe(expected);\n  });\n\n  test('identifies tickets that are not sold as invalid', () => {\n    const expected = 'invalid ticket !!!';\n    expect(simpleTicketStatus(testTickets(), 'V42NWRMQ')).toBe(expected);\n    expect(simpleTicketStatus(testTickets(), 'A56MTX8E')).toBe(expected);\n    expect(simpleTicketStatus(testTickets(), 'YEVHK4MC')).toBe(expected);\n  });\n\n  test('returns the visitor name for tickets that were sold', () => {\n    expect(simpleTicketStatus(testTickets(), 'QINS6S94')).toBe('Hong Hsu');\n    expect(simpleTicketStatus(testTickets(), 'H31SAW5Q')).toBe('Lior MacNeil');\n    expect(simpleTicketStatus(testTickets(), 'M9ZTXP89')).toBe('Kamani Ybarra');\n  });\n\n  test('tickets with \"strange\" name values are valid nevertheless', () => {\n    const tickets = {\n      B7627X32: '',\n      XF1X6S2W: 0,\n      KJJIFFO0: false,\n    };\n\n    const unexpected = 'invalid ticket !!!';\n    expect(simpleTicketStatus(tickets, 'B7627X32')).not.toEqual(unexpected);\n    expect(simpleTicketStatus(tickets, 'XF1X6S2W')).not.toEqual(unexpected);\n    expect(simpleTicketStatus(tickets, 'KJJIFFO0')).not.toEqual(unexpected);\n  });\n});\n\ndescribe('gtcVersion', () => {\n  test('determines the GTC version if it is present', () => {\n    const visitor1 = {\n      name: 'Zohar Pekkanen',\n      age: 28,\n      ticketId: '8DGM3163',\n      gtc: {\n        signed: true,\n        version: '4.2',\n      },\n    };\n\n    const visitor2 = {\n      name: 'Fen Van der Hout',\n      age: 70,\n      ticketId: 'BMYPNZGT',\n      gtc: {\n        signed: true,\n        version: '1.6',\n      },\n    };\n\n    expect(gtcVersion(visitor1)).toBe('4.2');\n    expect(gtcVersion(visitor2)).toBe('1.6');\n  });\n\n  test('returns nothing if there is no gtc object', () => {\n    const visitor1 = {\n      name: 'Xu칙n Jahoda',\n      age: 15,\n      ticketId: 'NZGKELXC',\n    };\n\n    const visitor2 = {\n      name: 'Micha T칩t',\n      age: 49,\n      ticketId: '3BGCW1G9',\n    };\n\n    expect(gtcVersion(visitor1)).toBeUndefined();\n    expect(gtcVersion(visitor2)).toBeUndefined();\n  });\n\n  test('returns nothing if there is a gtc object but no gtc version', () => {\n    const visitor1 = {\n      name: 'Xu칙n Jahoda',\n      age: 15,\n      ticketId: 'NZGKELXC',\n      gtc: {},\n    };\n\n    const visitor2 = {\n      name: 'Micha T칩t',\n      age: 49,\n      ticketId: '3BGCW1G9',\n      gtc: {\n        signed: false,\n      },\n    };\n\n    expect(gtcVersion(visitor1)).toBeUndefined();\n    expect(gtcVersion(visitor2)).toBeUndefined();\n  });\n\n  test('does not modify the visitor object', () => {\n    const visitor = {\n      name: 'Zohar Pekkanen',\n      age: 28,\n      ticketId: '8DGM3163',\n    };\n\n    const expected = {\n      name: 'Zohar Pekkanen',\n      age: 28,\n      ticketId: '8DGM3163',\n    };\n\n    gtcVersion(visitor);\n    expect(visitor).toEqual(expected);\n  });\n});\n\nconst testTickets = () => {\n  return {\n    QINS6S94: 'Hong Hsu',\n    V42NWRMQ: null,\n    A56MTX8E: null,\n    H31SAW5Q: 'Lior MacNeil',\n    M9ZTXP89: 'Kamani Ybarra',\n    YEVHK4MC: null,\n  };\n};\n"
}
