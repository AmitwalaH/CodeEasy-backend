{
  "language": "ruby",
  "slug": "boutique-inventory-improvements",
  "docs": {
    "introduction": "# Introduction\r\n\r\n`OpenStruct` allows you to easily create an object from a `Hash`. \r\nRather than having to access using `Hash` keys, `OpenStruct` instead allows us to use methods to access and set values.\r\n\r\n\r\n```ruby\r\nattributes = { name: \"Jeremy Walker\", age: 21, location: \"Nomadic\" }\r\nperson = OpenStruct.new(attributes)\r\n\r\nperson.name\r\n#=> Jeremy Walker\r\n\r\nperson.location\r\n#=> Nomadic\r\n\r\n# Update the age\r\nperson.age = 35\r\n\r\n# It sets correctly\r\nperson.age\r\n#=> 35\r\n```\r\n\r\nOne bonus to this approach is that we can take advantage of a shortcut when using block syntax. \r\nIn situations where a block calls a single method, you can replace the block with `&:` followed by the method name. \r\nFor example, these two lines are synonymous:\r\n\r\n```ruby\r\npeople.sum { |person| person.age }\r\npeople.sum(&:age)\r\n```\r\n\r\n## Standard Library\r\n\r\nAll of the classes you've seen in previous exercises have been part of Ruby's Core Library.\r\n\r\nOpenStruct is part of Ruby's Standard Library (often shortened to \"stdlib\") - a collection of classes for working with things such as dates, json, and networking.\r\nIt also provides some useful functionality for making your code easier to work with.\r\n\r\nWhen using classes that are not from the Core Library — your own code in different files, classes from stdlib, or external dependencies — we need to import them using the `require` method before we can use them.\r\nFor example:\r\n\r\n```ruby\r\nrequire 'ostruct'\r\n\r\nperson = OpenStruct.new(name: \"Jeremy Walker\")\r\n# ...\r\n```\r\n\r\n\r\n",
    "instructions": "# Instructions\r\n\r\nYou're continuing to work on the stock management system you built previously. Since discovering `OpenStruct` and block shortcuts, you've decided to refactor the code a little. Rather than storing the items as hashes, you're going to utilize your newfound skills.\r\n\r\n## 1. Allow retrievable of items\r\n\r\nYou want to continue to retrieve the list of items in stock, but this time they should be objects that can have methods called on them.\r\n\r\n```ruby\r\ninventory = BoutiqueInventory.new([\r\n  {price: 65.00, name: \"Maxi Brown Dress\", quantity_by_size: {s: 3, m: 7, l: 8, xl: 4}},\r\n  {price: 50.00, name: \"Red Short Skirt\", quantity_by_size: {}},\r\n  {price: 29.99, name: \"Black Short Skirt\", quantity_by_size: {s: 1, xl: 4}},\r\n  {price: 20.00, name: \"Bamboo Socks Cats\", quantity_by_size: {s: 7, m: 2}}\r\n])\r\n\r\ninventory.items.first.name\r\n# => \"Maxi Brown Dress\"\r\n\r\ninventory.items.first.price\r\n# => 65\r\n\r\ninventory.items.size\r\n# => 4\r\n```\r\n\r\n# 2. Refactor `item_names` \r\n\r\nRefactor `item_names` to use the new block shortcut you've learnt rather than hashes.\r\nAs a reminder, the method should return:\r\n\r\n```ruby\r\nBoutiqueInventory.new([\r\n  {price: 65.00, name: \"Maxi Brown Dress\", quantity_by_size: {s: 3, m: 7, l: 8, xl: 4}},\r\n  {price: 50.00, name: \"Red Short Skirt\", quantity_by_size: {}},\r\n  {price: 29.99, name: \"Black Short Skirt\", quantity_by_size: {s: 1, xl: 4}},\r\n  {price: 20.00, name: \"Bamboo Socks Cats\", quantity_by_size: {s: 7, m: 2}}\r\n]).item_names\r\n\r\n# => [\"Bamboo Socks Cats\", \"Black Short Skirt\", \"Maxi Brown Dress\", \"Red Short Skirt\"]\r\n```\r\n\r\n\r\n# 2. Refactor `total_stock`\r\n\r\nRefactor `total_stock` to use the openstruct's method, rather than referencing a hash.\r\nAs a reminder, the method should return::\r\n\r\n```ruby\r\nBoutiqueInventory.new([\r\n  {price: 65.00, name: \"Maxi Brown Dress\", quantity_by_size: {s: 3, m: 7, l: 8, xl: 4}},\r\n  {price: 50.00, name: \"Red Short Skirt\", quantity_by_size: {}},\r\n  {price: 29.99, name: \"Black Short Skirt\", quantity_by_size: {s: 1, xl: 4}},\r\n  {price: 20.00, name: \"Bamboo Socks Cats\", quantity_by_size: {s: 7, m: 2}}\r\n]).total_stock\r\n\r\n# => 36\r\n```\r\n",
    "hints": ""
  },
  "starter_code": "class BoutiqueInventory\r\n  attr_reader :items\r\n\r\n  def initialize(items)\r\n    @items = items\r\n\r\n    raise \"Refactor this code so that items is an array of openstructs\"\r\n  end\r\n\r\n  def item_names\r\n    items.map { |item| item[:name] }.sort\r\n\r\n    raise \"Refactor the code in item_names\"\r\n  end\r\n\r\n  def total_stock\r\n    items.sum do |item|\r\n      item[:quantity_by_size].values.sum\r\n    end\r\n\r\n    raise \"Refactor the code in total_stock\"\r\n  end\r\nend\r\n",
  "tests": "require 'minitest/autorun'\r\nrequire_relative 'boutique_inventory'\r\n\r\nclass BoutiqueInventoryTest < Minitest::Test\r\n  def test_no_item_names\r\n    assert_empty BoutiqueInventory.new([]).item_names\r\n  end\r\n\r\n  def test_one_item_name\r\n    items = [\r\n      { price: 65.00, name: \"Red Brown Dress\", quantity_by_size: {} }\r\n    ]\r\n    names = [\"Red Brown Dress\"]\r\n    assert_equal names, BoutiqueInventory.new(items).item_names\r\n  end\r\n\r\n  def test_three_item_names\r\n    items = [\r\n      { price: 65.00, name: \"Red Brown Dress\", quantity_by_size: {} },\r\n      { price: 50.00, name: \"Red Short Skirt\", quantity_by_size: {} },\r\n      { price: 29.99, name: \"Black Short Skirt\", quantity_by_size: {} }\r\n    ]\r\n    names = [\"Black Short Skirt\", \"Red Brown Dress\", \"Red Short Skirt\"]\r\n    assert_equal names, BoutiqueInventory.new(items).item_names\r\n  end\r\n\r\n  def test_total_stock_for_no_items\r\n    assert_equal 0, BoutiqueInventory.new([]).total_stock\r\n  end\r\n\r\n  def test_total_stock_for_no_stock\r\n    shoes = { price: 30.00, name: \"Shoes\", quantity_by_size: {} }\r\n    coat = { price: 65.00, name: \"Coat\", quantity_by_size: {} }\r\n    items = [shoes, coat]\r\n    assert_equal 0, BoutiqueInventory.new(items).total_stock\r\n  end\r\n\r\n  def test_total_stock_for_some_items\r\n    shoes = { price: 30.00, name: \"Shoes\", quantity_by_size: { s: 1, xl: 4 } }\r\n    coat = { price: 65.00, name: \"Coat\", quantity_by_size: {} }\r\n    handkerchief = { price: 19.99, name: \"Handkerchief\", quantity_by_size: {} }\r\n    items = [shoes, coat, handkerchief]\r\n    assert_equal 5, BoutiqueInventory.new(items).total_stock\r\n  end\r\n\r\n  def test_items_is_an_array_of_ostruct\r\n    shoes = { price: 30.00, name: \"Shoes\", quantity_by_size: { s: 1, xl: 4 } }\r\n    coat = { price: 65.00, name: \"Coat\", quantity_by_size: { m: 1, l: 2 } }\r\n    handkerchief = { price: 19.99, name: \"Handkerchief\", quantity_by_size: { s: 3, m: 2 } }\r\n    items = [shoes, coat, handkerchief]\r\n    assert_instance_of Array, BoutiqueInventory.new(items).items\r\n    assert_instance_of OpenStruct, BoutiqueInventory.new(items).items.first\r\n  end\r\nend\r\n"
}