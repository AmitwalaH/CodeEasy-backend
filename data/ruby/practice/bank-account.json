{
  "language": "ruby",
  "type": "practice",
  "slug": "bank-account",
  "title": "Bank Account",
  "docs": {
    "instructions": "# Instructions\r\n\r\nYour task is to implement bank accounts supporting opening/closing, withdrawals, and deposits of money.\r\n\r\nAs bank accounts can be accessed in many different ways (internet, mobile phones, automatic charges), your bank software must allow accounts to be safely accessed from multiple threads/processes (terminology depends on your programming language) in parallel.\r\nFor example, there may be many deposits and withdrawals occurring in parallel; you need to ensure there are no [race conditions][wikipedia] between when you read the account balance and set the new balance.\r\n\r\nIt should be possible to close an account; operations against a closed account must fail.\r\n\r\n[wikipedia]: https://en.wikipedia.org/wiki/Race_condition#In_software\r\n",
    "hints": ""
  },
  "starter_code": "=begin\r\nWrite your code for the 'Bank Account' exercise in this file. Make the tests in\r\n`bank_account_test.rb` pass.\r\n\r\nTo get started with TDD, see the `README.md` file in your\r\n`ruby/bank-account` directory.\r\n=end\r\n",
  "tests": "require 'minitest/autorun'\r\nrequire_relative 'bank_account'\r\n\r\nclass BankAccountTest < Minitest::Test\r\n  def test_newly_opened_account_has_zero_balance\r\n    # skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    assert_equal 0, bank_account.balance\r\n  end\r\n\r\n  def test_single_deposit\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(100)\r\n    assert_equal 100, bank_account.balance\r\n  end\r\n\r\n  def test_multiple_deposits\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(100)\r\n    bank_account.deposit(50)\r\n    assert_equal 150, bank_account.balance\r\n  end\r\n\r\n  def test_withdraw_once\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(100)\r\n    bank_account.withdraw(75)\r\n    assert_equal 25, bank_account.balance\r\n  end\r\n\r\n  def test_withdraw_twice\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(100)\r\n    bank_account.withdraw(80)\r\n    bank_account.withdraw(20)\r\n    assert_equal 0, bank_account.balance\r\n  end\r\n\r\n  def test_can_do_multiple_operations_sequentially\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(100)\r\n    bank_account.deposit(110)\r\n    bank_account.withdraw(200)\r\n    bank_account.deposit(60)\r\n    bank_account.withdraw(50)\r\n    assert_equal 20, bank_account.balance\r\n  end\r\n\r\n  def test_cannot_check_balance_of_closed_account\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.close\r\n    assert_raises(ArgumentError, \"You can't check the balance of a closed account\") { bank_account.balance }\r\n  end\r\n\r\n  def test_cannot_deposit_into_closed_account\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.close\r\n    assert_raises(ArgumentError, \"You can't deposit money into a closed account\") { bank_account.deposit(50) }\r\n  end\r\n\r\n  def test_cannot_deposit_into_unopened_account\r\n    skip\r\n    bank_account = BankAccount.new\r\n    assert_raises(ArgumentError, \"You can't deposit money into a closed account\") { bank_account.deposit(50) }\r\n  end\r\n\r\n  def test_cannot_withdraw_from_closed_account\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.close\r\n    assert_raises(ArgumentError, \"You can't withdraw money into a closed account\") { bank_account.withdraw(50) }\r\n  end\r\n\r\n  def test_cannot_close_an_account_that_was_not_opened\r\n    skip\r\n    bank_account = BankAccount.new\r\n    assert_raises(ArgumentError, \"You can't close an already closed account\") { bank_account.close }\r\n  end\r\n\r\n  def test_cannot_open_an_already_opened_account\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    assert_raises(ArgumentError, \"You can't open an already open account\") { bank_account.open }\r\n  end\r\n\r\n  def test_reopened_account_does_not_retain_balance\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(50)\r\n    bank_account.close\r\n    bank_account.open\r\n    assert_equal 0, bank_account.balance\r\n  end\r\n\r\n  def test_cannot_withdraw_more_than_deposited\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(25)\r\n    assert_raises(ArgumentError, \"You can't withdraw more than you have\") { bank_account.withdraw(50) }\r\n  end\r\n\r\n  def test_cannot_withdraw_negative\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    bank_account.deposit(100)\r\n    assert_raises(ArgumentError, \"You can't withdraw a negative amount\") { bank_account.withdraw(-50) }\r\n  end\r\n\r\n  def test_cannot_deposit_negative\r\n    skip\r\n    bank_account = BankAccount.new\r\n    bank_account.open\r\n    assert_raises(ArgumentError, \"You can't deposit a negative amount\") { bank_account.deposit(-50) }\r\n  end\r\nend\r\n"
}