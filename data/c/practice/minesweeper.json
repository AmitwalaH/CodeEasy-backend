{
  "language": "c",
  "slug": "minesweeper",
  "docs": {
    "introduction": "# Introduction\r\n\r\n[Minesweeper][wikipedia] is a popular game where the user has to find the mines using numeric hints that indicate how many mines are directly adjacent (horizontally, vertically, diagonally) to a square.\r\n\r\n[wikipedia]: https://en.wikipedia.org/wiki/Minesweeper_(video_game)\r\n",
    "instructions": "# Instructions\r\n\r\nYour task is to add the mine counts to empty squares in a completed Minesweeper board.\r\nThe board itself is a rectangle composed of squares that are either empty (`' '`) or a mine (`'*'`).\r\n\r\nFor each empty square, count the number of mines adjacent to it (horizontally, vertically, diagonally).\r\nIf the empty square has no adjacent mines, leave it empty.\r\nOtherwise replace it with the adjacent mines count.\r\n\r\nFor example, you may receive a 5 x 4 board like this (empty spaces are represented here with the '·' character for display on screen):\r\n\r\n```text\r\n·*·*·\r\n··*··\r\n··*··\r\n·····\r\n```\r\n\r\nWhich your code should transform into this:\r\n\r\n```text\r\n1*3*1\r\n13*31\r\n·2*2·\r\n·111·\r\n```\r\n",
    "hints": ""
  },
  "starter_code": {
    "minesweeper.c": "#include \"minesweeper.h\"\r\n",
    "minesweeper.h": "#ifndef MINESWEEPER_H\r\n#define MINESWEEPER_H\r\n#include <stddef.h>\r\n\r\nchar **annotate(const char **minefield, const size_t rows);\r\nvoid free_annotation(char **annotation);\r\n\r\n#endif\r\n"
  },
  "tests": {
    "test_minesweeper.c": "#include \"test-framework/unity.h\"\r\n#include \"minesweeper.h\"\r\n#include <stdlib.h>\r\n\r\n#define ARRAY_SIZE(arr) (sizeof(arr) / sizeof(arr[0]))\r\n\r\nvoid setUp(void)\r\n{\r\n}\r\n\r\nvoid tearDown(void)\r\n{\r\n}\r\n\r\nstatic void test_annotate_no_rows(void)\r\n{\r\n   const char **minefield = NULL;\r\n   const size_t rows = 0;\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_NULL(actual);\r\n}\r\n\r\nstatic void test_annotate_no_columns(void)\r\n{\r\n   TEST_IGNORE();   // delete this line to run test\r\n   const char *minefield[] = { \"\" };\r\n   const char *expected[] = { \"\" };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_no_mines(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"   \",\r\n      \"   \",\r\n      \"   \"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"   \",\r\n      \"   \",\r\n      \"   \"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_minefield_with_only_mines(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"***\",\r\n      \"***\",\r\n      \"***\"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"***\",\r\n      \"***\",\r\n      \"***\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_mine_surrounded_by_spaces(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"   \",\r\n      \" * \",\r\n      \"   \"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"111\",\r\n      \"1*1\",\r\n      \"111\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_space_surrounded_by_mines(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"***\",\r\n      \"* *\",\r\n      \"***\"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"***\",\r\n      \"*8*\",\r\n      \"***\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_horizontal_line(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \" * * \"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"1*2*1\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_horizontal_line_mines_at_edges(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"*   *\"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"*1 1*\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_vertical_line(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \" \",\r\n      \"*\",\r\n      \" \",\r\n      \"*\",\r\n      \" \"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"1\",\r\n      \"*\",\r\n      \"2\",\r\n      \"*\",\r\n      \"1\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_vertical_line_mines_at_edges(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"*\",\r\n      \" \",\r\n      \" \",\r\n      \" \",\r\n      \"*\"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"*\",\r\n      \"1\",\r\n      \" \",\r\n      \"1\",\r\n      \"*\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_cross(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \"  *  \",\r\n      \"  *  \",\r\n      \"*****\",\r\n      \"  *  \",\r\n      \"  *  \"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \" 2*2 \",\r\n      \"25*52\",\r\n      \"*****\",\r\n      \"25*52\",\r\n      \" 2*2 \"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nstatic void test_annotate_large_minefield(void)\r\n{\r\n   TEST_IGNORE();\r\n   const char *minefield[] = {\r\n      // clang-format off\r\n      \" *  * \",\r\n      \"  *   \",\r\n      \"    * \",\r\n      \"   * *\",\r\n      \" *  * \",\r\n      \"      \"\r\n      // clang-format on\r\n   };\r\n   const char *expected[] = {\r\n      // clang-format off\r\n      \"1*22*1\",\r\n      \"12*322\",\r\n      \" 123*2\",\r\n      \"112*4*\",\r\n      \"1*22*2\",\r\n      \"111111\"\r\n      // clang-format on\r\n   };\r\n   const size_t rows = ARRAY_SIZE(expected);\r\n   char **actual = annotate(minefield, rows);\r\n   TEST_ASSERT_EQUAL_STRING_ARRAY(expected, actual, rows);\r\n   free_annotation(actual);\r\n}\r\n\r\nint main(void)\r\n{\r\n   UNITY_BEGIN();\r\n\r\n   RUN_TEST(test_annotate_no_rows);\r\n   RUN_TEST(test_annotate_no_columns);\r\n   RUN_TEST(test_annotate_no_mines);\r\n   RUN_TEST(test_annotate_minefield_with_only_mines);\r\n   RUN_TEST(test_annotate_mine_surrounded_by_spaces);\r\n   RUN_TEST(test_annotate_space_surrounded_by_mines);\r\n   RUN_TEST(test_annotate_horizontal_line);\r\n   RUN_TEST(test_annotate_horizontal_line_mines_at_edges);\r\n   RUN_TEST(test_annotate_vertical_line);\r\n   RUN_TEST(test_annotate_vertical_line_mines_at_edges);\r\n   RUN_TEST(test_annotate_cross);\r\n   RUN_TEST(test_annotate_large_minefield);\r\n\r\n   return UNITY_END();\r\n}\r\n"
  }
}